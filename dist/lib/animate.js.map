{"version":3,"file":"animate.js","names":["canUseDOM","animate","duration","timing","draw","start","performance","now","requestAnimationFrame","time","timeFraction","progress"],"sources":["../../src/lib/animate.ts"],"sourcesContent":["import { canUseDOM } from \"./dom\";\n\n/**\n * Функция для js анимации\n * @param {number} duration\n * @param {function} timing тайминг функция анимации\n * @param {function} draw коллбэк, в который прокидывается прогресс [0, 1]\n * @returns {void}\n */\nexport type TimingInterface = (timeFraction: number) => number;\n\nexport type DrawInterface = (progress: number) => void;\n\nexport interface AnimateArgumentsInterface {\n  duration: number;\n  timing: TimingInterface;\n  draw: DrawInterface;\n}\n\nexport function animate({\n  duration,\n  timing,\n  draw,\n}: AnimateArgumentsInterface): void {\n  if (!canUseDOM) {\n    return;\n  }\n\n  const start = performance.now();\n\n  requestAnimationFrame(function animate(time: number): void {\n    let timeFraction = (time - start) / duration;\n\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n\n    const progress = timing(timeFraction);\n\n    draw(progress);\n\n    if (timeFraction < 1) {\n      requestAnimationFrame(animate);\n    }\n  });\n}\n"],"mappings":"AAAA,SAASA,SAAS;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;;AAWA,OAAO,SAASC,OAAO,OAIa;EAAA,IAHlCC,QAAQ,QAARA,QAAQ;IACRC,MAAM,QAANA,MAAM;IACNC,IAAI,QAAJA,IAAI;EAEJ,IAAI,CAACJ,SAAS,EAAE;IACd;EACF;EAEA,IAAMK,KAAK,GAAGC,WAAW,CAACC,GAAG,EAAE;EAE/BC,qBAAqB,CAAC,SAASP,OAAO,CAACQ,IAAY,EAAQ;IACzD,IAAIC,YAAY,GAAG,CAACD,IAAI,GAAGJ,KAAK,IAAIH,QAAQ;IAE5C,IAAIQ,YAAY,GAAG,CAAC,EAAE;MACpBA,YAAY,GAAG,CAAC;IAClB;IAEA,IAAMC,QAAQ,GAAGR,MAAM,CAACO,YAAY,CAAC;IAErCN,IAAI,CAACO,QAAQ,CAAC;IAEd,IAAID,YAAY,GAAG,CAAC,EAAE;MACpBF,qBAAqB,CAACP,OAAO,CAAC;IAChC;EACF,CAAC,CAAC;AACJ"}