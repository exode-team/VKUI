{"version":3,"sources":["../../../../src/components/Input/Input.tsx"],"names":["useRef","useEffect","getClassName","classNames","FormField","withAdaptivity","usePlatform","InputComponent","type","align","getRef","className","getRootRef","sizeY","style","before","after","onInput","value","caretPosition","alwaysInFocus","isFocus","restProps","platform","ref","handleChange","e","caret","target","selectionStart","element","window","requestAnimationFrame","selectionEnd","current","focus","setSelectionRange","disabled","Input"],"mappings":";;;;AAAA,SAAgBA,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AACA,SAASC,SAAT;AAEA,SAASC,cAAT;AACA,SAASC,WAAT;AACA;;AAcA,IAAMC,cAAmD,GAAG,SAAtDA,cAAsD,OAgB1C;AAAA,uBAfhBC,IAegB;AAAA,MAfhBA,IAegB,0BAfT,MAeS;AAAA,MAdhBC,KAcgB,QAdhBA,KAcgB;AAAA,MAbhBC,MAagB,QAbhBA,MAagB;AAAA,MAZhBC,SAYgB,QAZhBA,SAYgB;AAAA,MAXhBC,UAWgB,QAXhBA,UAWgB;AAAA,MAVhBC,KAUgB,QAVhBA,KAUgB;AAAA,MAThBC,KASgB,QAThBA,KASgB;AAAA,MARhBC,MAQgB,QARhBA,MAQgB;AAAA,MAPhBC,KAOgB,QAPhBA,KAOgB;AAAA,MANhBC,OAMgB,QANhBA,OAMgB;AAAA,MALhBC,KAKgB,QALhBA,KAKgB;AAAA,MAJhBC,aAIgB,QAJhBA,aAIgB;AAAA,MAHhBC,aAGgB,QAHhBA,aAGgB;AAAA,0BAFhBC,OAEgB;AAAA,MAFhBA,OAEgB,6BAFN,KAEM;AAAA,MADbC,SACa;;AAEhB,MAAMC,QAAQ,GAAGjB,WAAW,EAA5B;AACA,MAAMkB,GAAG,GAAGxB,MAAM,CAAmB,IAAnB,CAAlB;;AAEA,MAAMyB,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAA2C;AAC5D,QAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,cAAvB;AACA,QAAMC,OAAO,GAAGJ,CAAC,CAACE,MAAlB;AAEFG,IAAAA,MAAM,CAACC,qBAAP,CAA6B,YAAM;AAC/BF,MAAAA,OAAO,CAACD,cAAR,GAAyBF,KAAzB;AACAG,MAAAA,OAAO,CAACG,YAAR,GAAuBN,KAAvB;AACD,KAHH;AAKAV,IAAAA,OAAO,IAAIA,OAAO,CAACS,CAAD,CAAlB;AACD,GAVD,CALgB,CAgBf;AACD;;;AAEAzB,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACdoB,IAAAA,OAAO,qBAAIG,GAAG,CAACU,OAAR,iDAAI,aAAaC,KAAb,EAAJ,CAAP;AACAhB,IAAAA,aAAa,sBAAIK,GAAG,CAACU,OAAR,kDAAI,cAAaE,iBAAb,CAA+BjB,aAA/B,EAA8CA,aAA9C,CAAJ,CAAb;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SACE,oBAAC,SAAD;AACE,IAAA,SAAS,EAAEhB,UAAU,CACnBD,YAAY,CAAC,OAAD,EAAUqB,QAAV,CADO,EAEnB,CAAC,CAACd,KAAF,qBAAqBA,KAArB,CAFmB,yBAGHI,KAHG,EADvB;AAME,IAAA,KAAK,EAAEC,KANT;AAOE,IAAA,SAAS,EAAEH,SAPb;AAQE,IAAA,UAAU,EAAEC,UARd;AASE,IAAA,MAAM,EAAEG,MATV;AAUE,IAAA,KAAK,EAAEC,KAVT;AAWE,IAAA,QAAQ,EAAEM,SAAS,CAACe;AAXtB,KAaE,0CAAWf,SAAX;AAAsB,IAAA,IAAI,EAAEd,IAA5B;AAAkC,IAAA,OAAO,EAAEiB,YAA3C;AAAyD,IAAA,KAAK,EAAEP,KAAhE;AAAuE,IAAA,SAAS,EAAC,WAAjF;AAA6F,IAAA,GAAG,EAAEM,GAAG,IAAId;AAAzG,KAbF,CADF;AAiBD,CAzDD;AA2DA;AACA;AACA;;;AACA,OAAO,IAAM4B,KAAK,GAAGjC,cAAc,CAACE,cAAD,EAAiB;AAClDM,EAAAA,KAAK,EAAE;AAD2C,CAAjB,CAA5B","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport \"./Input.css\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRef<HTMLInputElement>,\n    HasRootRef<HTMLDivElement>,\n    HasAlign,\n    AdaptivityProps,\n    FormFieldProps {\n  isFocus?: boolean;\n  alwaysInFocus?: boolean;\n  caretPosition?: number;\n}\n\nconst InputComponent: React.FunctionComponent<InputProps> = ({\n  type = \"text\",\n  align,\n  getRef,\n  className,\n  getRootRef,\n  sizeY,\n  style,\n  before,\n  after,\n  onInput,\n  value,\n  caretPosition,\n  alwaysInFocus,\n  isFocus = false,\n  ...restProps\n}: InputProps) => {\n\n  const platform = usePlatform();\n  const ref = useRef<HTMLInputElement>(null);\n\n  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n      const caret = e.target.selectionStart\n      const element = e.target\n\n    window.requestAnimationFrame(() => {\n        element.selectionStart = caret\n        element.selectionEnd = caret\n      })\n\n    onInput && onInput(e);\n  };\n   //to enable always in focus uncomment\n  // const handleBlur = () => ref.current?.focus();\n\n  useEffect(() => {\n    isFocus && ref.current?.focus()\n    caretPosition && ref.current?.setSelectionRange(caretPosition, caretPosition)\n  }, [])\n\n  return (\n    <FormField\n      vkuiClass={classNames(\n        getClassName(\"Input\", platform),\n        !!align && `Input--${align}`,\n        `Input--sizeY-${sizeY}`\n      )}\n      style={style}\n      className={className}\n      getRootRef={getRootRef}\n      before={before}\n      after={after}\n      disabled={restProps.disabled}\n    >\n      <input {...restProps} type={type} onInput={handleChange} value={value} vkuiClass=\"Input__el\" ref={ref || getRef} />\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Input\n */\nexport const Input = withAdaptivity(InputComponent, {\n  sizeY: true,\n});\n"],"file":"Input.js"}