{"version":3,"file":"CalendarHeader.js","names":["React","setMonth","setYear","subMonths","addMonths","Icon20ChevronLeftOutline","Icon20ChevronRightOutline","Icon12Dropdown","Tappable","classNames","SelectType","CustomSelect","SizeType","getMonths","getYears","LocaleProviderContext","Paragraph","AdaptivityProvider","CalendarHeader","viewDate","onChange","prevMonth","nextMonth","disablePickers","onNextMonth","onPrevMonth","className","prevMonthProps","nextMonthProps","prevMonthAriaLabel","nextMonthAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","prevMonthIcon","nextMonthIcon","locale","useContext","onMonthsChange","useCallback","event","Number","target","value","onYearChange","months","useMemo","map","label","currentYear","getFullYear","years","formatter","Intl","DateTimeFormat","year","month","REGULAR","format","getMonth","COMPACT","accent"],"sources":["../../../../src/components/CalendarHeader/CalendarHeader.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { setMonth, setYear, subMonths, addMonths } from \"../../lib/date\";\nimport {\n  Icon20ChevronLeftOutline,\n  Icon20ChevronRightOutline,\n  Icon12Dropdown,\n} from \"@vkontakte/icons\";\nimport { Tappable, TappableElementProps } from \"../Tappable/Tappable\";\nimport { classNames } from \"../../lib/classNames\";\nimport { SelectType } from \"../Select/Select\";\nimport { CustomSelect } from \"../CustomSelect/CustomSelect\";\nimport { SizeType } from \"../../hoc/withAdaptivity\";\nimport { getMonths, getYears } from \"../../lib/calendar\";\nimport { LocaleProviderContext } from \"../LocaleProviderContext/LocaleProviderContext\";\nimport { Paragraph } from \"../Typography/Paragraph/Paragraph\";\nimport { AdaptivityProvider } from \"../AdaptivityProvider/AdaptivityProvider\";\nimport \"./CalendarHeader.css\";\n\ntype ArrowMonthProps = Omit<TappableElementProps, \"onClick\" | \"aria-label\">;\n\nexport interface CalendarHeaderProps\n  extends Pick<React.HTMLAttributes<HTMLDivElement>, \"className\"> {\n  viewDate: Date;\n  prevMonth?: boolean;\n  nextMonth?: boolean;\n  disablePickers?: boolean;\n  prevMonthAriaLabel?: string;\n  nextMonthAriaLabel?: string;\n  changeMonthAriaLabel?: string;\n  changeYearAriaLabel?: string;\n  prevMonthIcon?: React.ReactNode;\n  nextMonthIcon?: React.ReactNode;\n  prevMonthProps?: ArrowMonthProps;\n  nextMonthProps?: ArrowMonthProps;\n  onChange(viewDate: Date): void;\n  /**\n   * Нажатие на кнопку переключения на следующий месяц.\n   */\n  onNextMonth?(): void;\n  /**\n   * Нажатие на кнопку переключения на предыдущий месяц.\n   */\n  onPrevMonth?(): void;\n}\n\nexport const CalendarHeader = ({\n  viewDate,\n  onChange,\n  prevMonth = true,\n  nextMonth = true,\n  disablePickers = false,\n  onNextMonth,\n  onPrevMonth,\n  className,\n  prevMonthProps,\n  nextMonthProps,\n  prevMonthAriaLabel = \"Предыдущий месяц\",\n  nextMonthAriaLabel = \"Следующий месяц\",\n  changeMonthAriaLabel = \"Изменить месяц\",\n  changeYearAriaLabel = \"Изменить год\",\n  prevMonthIcon = (\n    <Icon20ChevronLeftOutline\n      vkuiClass=\"CalendarHeader__nav-icon--accent\"\n      width={30}\n      height={30}\n    />\n  ),\n  nextMonthIcon = (\n    <Icon20ChevronRightOutline\n      vkuiClass=\"CalendarHeader__nav-icon--accent\"\n      width={30}\n      height={30}\n    />\n  ),\n}: CalendarHeaderProps) => {\n  const locale = React.useContext(LocaleProviderContext);\n  const onMonthsChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) =>\n      onChange(setMonth(viewDate, Number(event.target.value))),\n    [onChange, viewDate]\n  );\n  const onYearChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) =>\n      onChange(setYear(viewDate, Number(event.target.value))),\n    [onChange, viewDate]\n  );\n\n  const months = React.useMemo(\n    () =>\n      getMonths(locale).map(({ value, label }) => ({\n        value,\n        label: <span vkuiClass=\"CalendarHeader__month\">{label}</span>,\n      })),\n    [locale]\n  );\n\n  const currentYear = viewDate.getFullYear();\n\n  const years = React.useMemo(() => getYears(currentYear, 100), [currentYear]);\n\n  const formatter = new Intl.DateTimeFormat(locale, {\n    year: \"numeric\",\n    month: \"long\",\n  });\n\n  return (\n    <div vkuiClass=\"CalendarHeader\" className={className}>\n      {prevMonth && (\n        <AdaptivityProvider sizeX={SizeType.REGULAR}>\n          <Tappable\n            vkuiClass={classNames(\n              \"CalendarHeader__nav-icon\",\n              \"CalendarHeader__nav-icon-prev\"\n            )}\n            onClick={onPrevMonth}\n            aria-label={`${prevMonthAriaLabel}, ${formatter.format(\n              subMonths(viewDate, 1)\n            )}`}\n            {...prevMonthProps}\n          >\n            {prevMonthIcon}\n          </Tappable>\n        </AdaptivityProvider>\n      )}\n      {disablePickers ? (\n        <Paragraph vkuiClass=\"CalendarHeader__pickers\" weight=\"2\">\n          <span vkuiClass=\"CalendarHeader__month\">\n            {new Intl.DateTimeFormat(locale, {\n              month: \"long\",\n            }).format(viewDate)}\n          </span>\n          &nbsp;\n          {new Intl.DateTimeFormat(locale, {\n            year: \"numeric\",\n          }).format(viewDate)}\n        </Paragraph>\n      ) : (\n        <div vkuiClass=\"CalendarHeader__pickers\">\n          <CustomSelect\n            vkuiClass=\"CalendarHeader__picker\"\n            value={viewDate.getMonth()}\n            options={months}\n            dropdownOffsetDistance={4}\n            fixDropdownWidth={false}\n            sizeY={SizeType.COMPACT}\n            icon={<Icon12Dropdown />}\n            onChange={onMonthsChange}\n            forceDropdownPortal={false}\n            selectType={SelectType.accent}\n            aria-label={changeMonthAriaLabel}\n          />\n          <CustomSelect\n            vkuiClass=\"CalendarHeader__picker\"\n            value={viewDate.getFullYear()}\n            options={years}\n            dropdownOffsetDistance={4}\n            fixDropdownWidth={false}\n            sizeY={SizeType.COMPACT}\n            icon={<Icon12Dropdown />}\n            onChange={onYearChange}\n            forceDropdownPortal={false}\n            selectType={SelectType.accent}\n            aria-label={changeYearAriaLabel}\n          />\n        </div>\n      )}\n      {nextMonth && (\n        <AdaptivityProvider sizeX={SizeType.REGULAR}>\n          <Tappable\n            vkuiClass={classNames(\n              \"CalendarHeader__nav-icon\",\n              \"CalendarHeader__nav-icon-next\"\n            )}\n            onClick={onNextMonth}\n            aria-label={`${nextMonthAriaLabel}, ${formatter.format(\n              addMonths(viewDate, 1)\n            )}`}\n            {...nextMonthProps}\n          >\n            {nextMonthIcon}\n          </Tappable>\n        </AdaptivityProvider>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"}