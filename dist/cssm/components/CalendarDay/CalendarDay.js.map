{"version":3,"sources":["../../../../src/components/CalendarDay/CalendarDay.tsx"],"names":["React","classNames","Tappable","ENABLE_KEYBOARD_INPUT_EVENT_NAME","LocaleProviderContext","CalendarDay","memo","day","today","selected","onChange","hidden","disabled","active","selectionStart","selectionEnd","focused","onEnter","onLeave","hinted","hintedSelectionStart","hintedSelectionEnd","sameMonth","size","props","locale","useContext","ref","useRef","onClick","useCallback","handleEnter","handleLeave","useEffect","current","dispatchEvent","Event","bubbles","focus","Intl","DateTimeFormat","weekday","year","month","format","getDate","displayName"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { Tappable, TappableElementProps } from \"../Tappable/Tappable\";\nimport { ENABLE_KEYBOARD_INPUT_EVENT_NAME } from \"../../hooks/useKeyboardInputTracker\";\nimport { LocaleProviderContext } from \"../LocaleProviderContext/LocaleProviderContext\";\nimport \"./CalendarDay.css\";\n\nexport type CalendarDayElementProps = Omit<\n  TappableElementProps,\n  \"onChange\" | \"size\" | \"disabled\" | \"selected\"\n>;\n\nexport interface CalendarDayProps extends CalendarDayElementProps {\n  day: Date;\n  today?: boolean;\n  selected?: boolean;\n  selectionStart?: boolean;\n  selectionEnd?: boolean;\n  hintedSelectionStart?: boolean;\n  hintedSelectionEnd?: boolean;\n  active?: boolean;\n  hidden?: boolean;\n  disabled?: boolean;\n  focused?: boolean;\n  hinted?: boolean;\n  sameMonth?: boolean;\n  size?: \"s\" | \"m\";\n  onChange(value: Date): void;\n  onEnter?(value: Date): void;\n  onLeave?(value: Date): void;\n}\n\nexport const CalendarDay = React.memo(\n  ({\n    day,\n    today,\n    selected,\n    onChange,\n    hidden,\n    disabled,\n    active,\n    selectionStart,\n    selectionEnd,\n    focused,\n    onEnter,\n    onLeave,\n    hinted,\n    hintedSelectionStart,\n    hintedSelectionEnd,\n    sameMonth,\n    size,\n    ...props\n  }: CalendarDayProps) => {\n    const locale = React.useContext(LocaleProviderContext);\n    const ref = React.useRef<HTMLElement>(null);\n    const onClick = React.useCallback(() => onChange(day), [day, onChange]);\n    const handleEnter = React.useCallback(() => onEnter?.(day), [day, onEnter]);\n    const handleLeave = React.useCallback(() => onLeave?.(day), [day, onLeave]);\n\n    React.useEffect(() => {\n      if (focused && ref.current) {\n        ref.current.dispatchEvent(\n          new Event(ENABLE_KEYBOARD_INPUT_EVENT_NAME, { bubbles: true })\n        );\n        ref.current.focus();\n      }\n    }, [focused]);\n\n    if (hidden) {\n      return <div vkuiClass=\"CalendarDay__hidden\"></div>;\n    }\n\n    return (\n      <Tappable\n        vkuiClass={classNames(\n          \"CalendarDay\",\n          `CalendarDay--size-${size}`,\n          today && \"CalendarDay--today\",\n          selected && !disabled && \"CalendarDay--selected\",\n          active && !disabled && \"CalendarDay--active\",\n          selectionStart && \"CalendarDay--selection-start\",\n          selectionEnd && \"CalendarDay--selection-end\",\n          disabled && \"CalendarDay--disabled\",\n          !sameMonth && \"CalendarDay--not-same-month\"\n        )}\n        hoverMode={active ? \"CalendarDay--active-hover\" : \"CalendarDay--hover\"}\n        hasActive={false}\n        onClick={onClick}\n        disabled={disabled}\n        aria-label={new Intl.DateTimeFormat(locale, {\n          weekday: \"long\",\n          year: \"numeric\",\n          month: \"long\",\n          day: \"numeric\",\n        }).format(day)}\n        tabIndex={-1}\n        getRootRef={ref}\n        focusVisibleMode={active ? \"outside\" : \"inside\"}\n        onEnter={handleEnter}\n        onLeave={handleLeave}\n        {...props}\n      >\n        <div\n          vkuiClass={classNames(\n            \"CalendarDay__hinted\",\n            hinted && \"CalendarDay__hinted--active\",\n            hintedSelectionStart && \"CalendarDay__hinted--selection-start\",\n            hintedSelectionEnd && \"CalendarDay__hinted--selection-end\"\n          )}\n        >\n          <div\n            vkuiClass={classNames(\n              \"CalendarDay__inner\",\n              active && !disabled && \"CalendarDay__inner--active\"\n            )}\n          >\n            <div vkuiClass=\"CalendarDay__day-number\">{day.getDate()}</div>\n          </div>\n        </div>\n      </Tappable>\n    );\n  }\n);\n\nCalendarDay.displayName = \"CalendarDay\";\n"],"file":"CalendarDay.js"}