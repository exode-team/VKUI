{"version":3,"sources":["../../../../src/components/ModalPage/ModalPage.tsx"],"names":["warn","ModalPage","props","React","useContext","ModalRootContext","updateModalHeight","children","header","viewWidth","viewHeight","sizeX","hasMouse","onOpen","onOpened","onClose","onClosed","settlingHeight","dynamicContentHeight","getModalContentRef","nav","restProps","platform","orientation","useEffect","isDesktop","canShowCloseBtn","ViewWidth","SMALL_TABLET","Platform","VKCOM","modalContext","ModalType","PAGE","refs","innerElement","headerElement","contentElement","defaultProps"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport {\n  ModalRootContext,\n  useModalRegistry,\n} from \"../ModalRoot/ModalRootContext\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useOrientationChange } from \"../../hooks/useOrientationChange\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport ModalDismissButton from \"../ModalDismissButton/ModalDismissButton\";\nimport { multiRef } from \"../../lib/utils\";\nimport { ModalType } from \"../ModalRoot/types\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { Platform } from \"../../lib/platform\";\nimport { useAdaptivityIsDesktop } from \"../../hooks/useAdaptivity\";\nimport \"./ModalPage.css\";\n\nexport interface ModalPageProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    AdaptivityProps,\n    NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: React.ReactNode;\n  /**\n   * Будет вызвано при начале открытия модалки.\n   */\n  onOpen?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном открытии модалки.\n   */\n  onOpened?: VoidFunction;\n  /**\n   * Будет вызвано при начале закрытия модалки.\n   */\n  onClose?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном закрытии модалки.\n   */\n  onClosed?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: React.Ref<HTMLDivElement>;\n}\n\nconst warn = warnOnce(\"ModalPage\");\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nconst ModalPage: React.FC<ModalPageProps & AdaptivityContextInterface> = (\n  props\n) => {\n  const { updateModalHeight } = React.useContext(ModalRootContext);\n\n  const {\n    children,\n    header,\n    viewWidth,\n    viewHeight,\n    sizeX,\n    hasMouse,\n    onOpen,\n    onOpened,\n    onClose,\n    onClosed,\n    settlingHeight,\n    dynamicContentHeight,\n    getModalContentRef,\n    nav,\n    ...restProps\n  } = props;\n\n  const platform = usePlatform();\n  const orientation = useOrientationChange();\n\n  React.useEffect(updateModalHeight, [\n    children,\n    orientation,\n    updateModalHeight,\n  ]);\n\n  const isDesktop = useAdaptivityIsDesktop();\n  const canShowCloseBtn =\n    viewWidth >= ViewWidth.SMALL_TABLET || platform === Platform.VKCOM;\n\n  const modalContext = React.useContext(ModalRootContext);\n  const { refs } = useModalRegistry(getNavId(props, warn), ModalType.PAGE);\n\n  return (\n    <div\n      {...restProps}\n      // eslint-disable-next-line vkui/no-object-expression-in-arguments\n      vkuiClass={classNames(\n        getClassName(\"ModalPage\", platform),\n        `ModalPage--sizeX-${sizeX}`,\n        {\n          \"ModalPage--desktop\": isDesktop,\n        }\n      )}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div\n              vkuiClass=\"ModalPage__content\"\n              ref={multiRef<HTMLDivElement>(\n                refs.contentElement,\n                getModalContentRef\n              )}\n            >\n              <div vkuiClass=\"ModalPage__content-in\">{children}</div>\n            </div>\n          </div>\n          {canShowCloseBtn && (\n            <ModalDismissButton onClick={onClose || modalContext.onClose} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nModalPage.defaultProps = {\n  settlingHeight: 75,\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(ModalPage, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n"],"file":"ModalPage.js"}