{"version":3,"sources":["../../../../src/components/ModalPage/ModalPage.tsx"],"names":["warn","ModalPageComponent","children","header","size","sizeProp","viewWidth","viewHeight","sizeX","hasMouse","onOpen","onOpened","onClose","onClosed","settlingHeight","dynamicContentHeight","getModalContentRef","nav","id","hideCloseButton","restProps","React","useContext","ModalRootContext","updateModalHeight","platform","orientation","useEffect","isDesktop","isCloseButtonShown","modalContext","ModalType","PAGE","refs","Platform","IOS","VKCOM","innerElement","headerElement","contentElement","ModalPage","displayName"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport {\n  ModalRootContext,\n  useModalRegistry,\n} from \"../ModalRoot/ModalRootContext\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useOrientationChange } from \"../../hooks/useOrientationChange\";\nimport { withAdaptivity } from \"../../hoc/withAdaptivity\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton\";\nimport { multiRef } from \"../../lib/utils\";\nimport { ModalType } from \"../ModalRoot/types\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { Platform } from \"../../lib/platform\";\nimport { useAdaptivityIsDesktop } from \"../../hooks/useAdaptivity\";\nimport \"./ModalPage.css\";\n\nexport interface ModalPageProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    AdaptivityProps,\n    NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: React.ReactNode;\n  /**\n   * Задаёт контенту максимальную ширину.\n   *\n   * > ⚠️ **Заметки:**\n   * > - Для `viewWidth < SMALL_TABLET_SIZE` будет всегда `\"s\"`\n   * > - Для `platform === VKCOM` максимальная ширина зашита, её не изменить.\n   */\n  size?: \"s\" | \"m\" | \"l\";\n  /**\n   * Будет вызвано при начале открытия модалки.\n   */\n  onOpen?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном открытии модалки.\n   */\n  onOpened?: VoidFunction;\n  /**\n   * Будет вызвано при начале закрытия модалки.\n   */\n  onClose?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном закрытии модалки.\n   */\n  onClosed?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: React.Ref<HTMLDivElement>;\n  /**\n   * Скрывает кнопку закрытия (актуально для iOS, т.к. можно отрисовать кнопку закрытия внутри модалки)\n   */\n  hideCloseButton?: boolean;\n}\n\nconst warn = warnOnce(\"ModalPage\");\n\nconst ModalPageComponent = ({\n  children,\n  header,\n  size: sizeProp = \"s\",\n  viewWidth,\n  viewHeight,\n  sizeX,\n  hasMouse,\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n  settlingHeight, // 75\n  dynamicContentHeight,\n  getModalContentRef,\n  nav,\n  id,\n  hideCloseButton = false,\n  ...restProps\n}: ModalPageProps & AdaptivityContextInterface) => {\n  const { updateModalHeight } = React.useContext(ModalRootContext);\n\n  const platform = usePlatform();\n  const orientation = useOrientationChange();\n\n  React.useEffect(updateModalHeight, [\n    children,\n    orientation,\n    updateModalHeight,\n  ]);\n\n  const isDesktop = useAdaptivityIsDesktop();\n  const isCloseButtonShown = !hideCloseButton && isDesktop;\n  const size = isDesktop ? sizeProp : \"s\";\n\n  const modalContext = React.useContext(ModalRootContext);\n  const { refs } = useModalRegistry(\n    getNavId({ nav, id }, warn),\n    ModalType.PAGE\n  );\n\n  return (\n    <div\n      {...restProps}\n      id={id}\n      vkuiClass={classNames(\n        \"ModalPage\",\n        platform === Platform.IOS && \"ModalPage--ios\",\n        platform === Platform.VKCOM && \"ModalPage--vkcom\",\n        `ModalPage--sizeX-${sizeX}`, // TODO v5.0.0 поправить под новую адаптивность\n        isDesktop && \"ModalPage--desktop\",\n        size && `ModalPage--${size}`\n      )}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div\n              vkuiClass=\"ModalPage__content\"\n              ref={multiRef<HTMLDivElement>(\n                refs.contentElement,\n                getModalContentRef\n              )}\n            >\n              <div vkuiClass=\"ModalPage__content-in\">{children}</div>\n            </div>\n          </div>\n          {isCloseButtonShown && (\n            <ModalDismissButton onClick={onClose || modalContext.onClose} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport const ModalPage = withAdaptivity(ModalPageComponent, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n\nModalPage.displayName = \"ModalPage\";\n"],"file":"ModalPage.js"}