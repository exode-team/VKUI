{"version":3,"file":"View.js","names":["SwipeBackResults","scrollsCache","warn","warnOnce","View","popout","modal","activePanelProp","activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancelProp","onSwipeBackCancel","children","restProps","process","env","NODE_ENV","scrolls","React","useRef","getNavId","id","afterTransition","noop","useEffect","current","panelNodes","useDOM","window","document","scroll","useScroll","configProvider","useConfigProvider","splitCol","useSplitCol","platform","usePlatform","useState","animated","setAnimated","visiblePanels","setVisiblePanels","setActivePanel","undefined","isBack","setIsBack","prevPanel","setPrevPanel","nextPanel","setNextPanel","swipingBack","setSwipingBack","swipeBackStartX","setSwipeBackStartX","swipeBackShift","setSwipeBackShift","swipeBackNextPanel","setSwipeBackNextPanel","swipeBackPrevPanel","setSwipeBackPrevPanel","swipeBackResult","setSwipeBackResult","browserSwipe","setBrowserSwipe","prevActivePanel","usePrevious","prevSwipingBack","prevBrowserSwipe","prevSwipeBackResult","prevSwipeBackPrevPanel","prevOnTransition","panels","Children","toArray","filter","panel","panelId","props","includes","disableAnimation","transitionMotionEnabled","animate","pickPanel","flushTransition","useCallback","isBackTransition","scrollTo","from","to","useIsomorphicLayoutEffect","transitionEndHandler","e","animationName","Boolean","useWaitTransitionFinish","waitTransitionFinish","animationFinishTimeout","useTimeout","IOS","onSwipeBackSuccess","swipingBackTransitionEndHandler","propertyName","target","fail","success","onMoveX","swipeBackExcluded","isWebView","startX","innerWidth","length","blurActiveElement","getScroll","y","slice","shiftX","onEnd","speed","duration","calcPanelSwipeStyles","canUseDOM","isPrev","isNext","prevPanelTranslate","nextPanelTranslate","prevPanelShadow","boxShadow","transform","WebkitTransform","firstLayerId","map","find","animationEvent","supported","set","classNames","isTransitionTarget","compensateScroll","el","marginTop"],"sources":["../../../../src/components/View/View.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { animationEvent } from \"../../lib/supportEvents\";\nimport { IOS } from \"../../lib/platform\";\nimport { Touch, TouchEvent } from \"../Touch/Touch\";\nimport { useConfigProvider } from \"../ConfigProvider/ConfigProviderContext\";\nimport { useSplitCol } from \"../SplitCol/SplitCol\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { canUseDOM, useDOM, blurActiveElement } from \"../../lib/dom\";\nimport { useScroll } from \"../AppRoot/ScrollContext\";\nimport { NavTransitionProvider } from \"../NavTransitionContext/NavTransitionContext\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { swipeBackExcluded } from \"./utils\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePrevious } from \"../../hooks/usePrevious\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { noop } from \"../../lib/utils\";\nimport \"./View.css\";\n\nenum SwipeBackResults {\n  fail = 1,\n  success,\n}\n\ninterface Scrolls {\n  [index: string]: number | undefined;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\nexport let scrollsCache: ViewsScrolls = {};\n\nexport interface ViewProps\n  extends React.HTMLAttributes<HTMLElement>,\n    NavIdProps {\n  activePanel: string;\n  /**\n   * @deprecated будет удалено в 5.0.0. Используйте одноименное свойство у `SplitLayout`.\n   *\n   * Свойство для отрисовки `Alert`, `ActionSheet` и `ScreenSpinner`.\n   */\n  popout?: React.ReactNode;\n  /**\n   * @deprecated будет удалено в 5.0.0. Используйте одноименное свойство у `SplitLayout`.\n   *\n   * Свойство для отрисовки `ModalRoot`.\n   */\n  modal?: React.ReactNode;\n  onTransition?(params: { isBack: boolean; from: string; to: string }): void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?(): void;\n  /**\n   * callback начала анимации свайпа назад.\n   */\n  onSwipeBackStart?(): void;\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?(): void;\n  history?: string[];\n}\n\nexport interface ViewState {\n  animated: boolean;\n\n  visiblePanels: string[];\n  activePanel: string | null;\n  isBack: boolean | undefined;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack: boolean;\n  swipeBackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: SwipeBackResults | null;\n\n  browserSwipe: boolean;\n}\n\nconst warn = warnOnce(\"View\");\n\n/**\n * @see https://vkcom.github.io/VKUI/#/View\n */\nexport const View = ({\n  popout,\n  modal,\n  activePanel: activePanelProp,\n  history,\n  nav,\n  onTransition,\n  onSwipeBack,\n  onSwipeBackStart,\n  onSwipeBackCancel: onSwipeBackCancelProp,\n  children,\n\n  ...restProps\n}: ViewProps) => {\n  if (process.env.NODE_ENV === \"development\") {\n    popout &&\n      warn(\n        \"Свойство popout устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\"\n      );\n    modal &&\n      warn(\n        \"Свойство modal устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\"\n      );\n  }\n\n  const scrolls = React.useRef(\n    scrollsCache[getNavId({ nav, id: restProps.id }) as string] || {}\n  );\n  const afterTransition = React.useRef(noop);\n\n  React.useEffect(() => () => {\n    const id = getNavId({ nav, id: restProps.id });\n    if (id) {\n      scrollsCache[id] = scrolls.current;\n    }\n  });\n\n  const panelNodes = React.useRef<{ [id: string]: HTMLDivElement | null }>({});\n\n  const { window, document } = useDOM();\n  const scroll = useScroll();\n  const configProvider = useConfigProvider();\n  const splitCol = useSplitCol();\n  const platform = usePlatform();\n\n  const [animated, setAnimated] = React.useState(false);\n\n  const [visiblePanels, setVisiblePanels] = React.useState([activePanelProp]);\n  const [activePanel, setActivePanel] = React.useState<string | null>(\n    activePanelProp\n  );\n  const [isBack, setIsBack] = React.useState<boolean | undefined>(undefined);\n  const [prevPanel, setPrevPanel] = React.useState<string | null>(null);\n  const [nextPanel, setNextPanel] = React.useState<string | null>(null);\n\n  const [swipingBack, setSwipingBack] = React.useState<boolean>(false);\n  const [swipeBackStartX, setSwipeBackStartX] = React.useState<number>(0);\n  const [swipeBackShift, setSwipeBackShift] = React.useState<number>(0);\n  const [swipeBackNextPanel, setSwipeBackNextPanel] = React.useState<\n    string | null\n  >(null);\n  const [swipeBackPrevPanel, setSwipeBackPrevPanel] = React.useState<\n    string | null\n  >(null);\n  const [swipeBackResult, setSwipeBackResult] =\n    React.useState<SwipeBackResults | null>(null);\n\n  const [browserSwipe, setBrowserSwipe] = React.useState(false);\n\n  const prevActivePanel = usePrevious(activePanelProp);\n  const prevSwipingBack = usePrevious(swipingBack);\n  const prevBrowserSwipe = usePrevious(browserSwipe);\n  const prevSwipeBackResult = usePrevious(swipeBackResult);\n  const prevSwipeBackPrevPanel = usePrevious(swipeBackPrevPanel);\n  const prevOnTransition = usePrevious(onTransition);\n\n  const panels = (\n    React.Children.toArray(children) as React.ReactElement[]\n  ).filter((panel: React.ReactElement) => {\n    const panelId = getNavId(panel.props, warn);\n\n    return (\n      (panelId !== undefined && visiblePanels.includes(panelId)) ||\n      panelId === swipeBackPrevPanel ||\n      panelId === swipeBackNextPanel\n    );\n  });\n\n  const disableAnimation =\n    configProvider?.transitionMotionEnabled === false || !splitCol?.animate;\n\n  const pickPanel = (id: string | null) => {\n    if (id === null) {\n      return null;\n    }\n    return panelNodes.current[id];\n  };\n\n  const flushTransition = React.useCallback(\n    (prevPanel: string, isBackTransition: boolean) => {\n      if (isBackTransition) {\n        scrolls.current[prevPanel] = 0;\n      }\n      setPrevPanel(null);\n      setNextPanel(null);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n      setAnimated(false);\n      setIsBack(undefined);\n\n      afterTransition.current = () => {\n        scroll?.scrollTo(\n          0,\n          isBackTransition ? scrolls.current[activePanelProp] : 0\n        );\n        onTransition &&\n          onTransition({\n            isBack: isBackTransition,\n            from: prevPanel,\n            to: activePanelProp,\n          });\n      };\n    },\n    [activePanelProp, onTransition, scroll]\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    afterTransition.current();\n    afterTransition.current = noop;\n  }, [afterTransition.current]);\n\n  const transitionEndHandler = React.useCallback(\n    (e?: React.AnimationEvent): void => {\n      if (\n        (!e ||\n          [\n            \"vkui-animation-ios-next-forward\",\n            \"vkui-animation-ios-prev-back\",\n            \"vkui-animation-view-next-forward\",\n            \"vkui-animation-view-prev-back\",\n          ].includes(e.animationName)) &&\n        prevPanel !== null\n      ) {\n        flushTransition(prevPanel, Boolean(isBack));\n      }\n    },\n    [flushTransition, isBack, prevPanel]\n  );\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n  const animationFinishTimeout = useTimeout(\n    transitionEndHandler,\n    platform === IOS ? 600 : 300\n  );\n\n  const onSwipeBackSuccess = React.useCallback(() => {\n    onSwipeBack && onSwipeBack();\n  }, [onSwipeBack]);\n\n  const onSwipeBackCancel = React.useCallback(() => {\n    onSwipeBackCancelProp && onSwipeBackCancelProp();\n    setSwipeBackPrevPanel(null);\n    setSwipeBackNextPanel(null);\n    setSwipingBack(false);\n    setSwipeBackResult(null);\n    setSwipeBackStartX(0);\n    setSwipeBackShift(0);\n  }, [onSwipeBackCancelProp]);\n\n  const swipingBackTransitionEndHandler = React.useCallback(\n    (e?: TransitionEvent): void => {\n      // indexOf because of vendor prefixes in old browsers\n      if (\n        !e ||\n        (e?.propertyName.includes(\"transform\") &&\n          e?.target === pickPanel(swipeBackNextPanel))\n      ) {\n        switch (swipeBackResult) {\n          case SwipeBackResults.fail:\n            onSwipeBackCancel();\n            break;\n          case SwipeBackResults.success:\n            onSwipeBackSuccess();\n        }\n      }\n    },\n    [onSwipeBackCancel, onSwipeBackSuccess, swipeBackNextPanel, swipeBackResult]\n  );\n\n  const onMoveX = (e: TouchEvent): void => {\n    if (swipeBackExcluded(e)) {\n      return;\n    }\n\n    if (\n      platform === IOS &&\n      !configProvider?.isWebView &&\n      (e.startX <= 70 || e.startX >= window!.innerWidth - 70) &&\n      !browserSwipe\n    ) {\n      setBrowserSwipe(true);\n    }\n\n    if (platform === IOS && configProvider?.isWebView && onSwipeBack) {\n      if ((animated && e.startX <= 70) || !window) {\n        return;\n      }\n\n      if (e.startX <= 70 && !swipingBack && history && history.length > 1) {\n        if (activePanel !== null) {\n          // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n          blurActiveElement(document);\n          scrolls.current[activePanel] = scroll?.getScroll().y;\n        }\n\n        setSwipingBack(true);\n        setSwipeBackStartX(e.startX);\n        setSwipeBackPrevPanel(activePanel);\n        setSwipeBackNextPanel(history.slice(-2)[0]);\n      }\n      if (swipingBack) {\n        let swipeBackShift = 0;\n        if (e.shiftX < 0) {\n          swipeBackShift = 0;\n        } else if (e.shiftX > window.innerWidth - swipeBackStartX) {\n          swipeBackShift = window?.innerWidth;\n        } else {\n          swipeBackShift = e.shiftX;\n        }\n        setSwipeBackShift(swipeBackShift);\n      }\n    }\n  };\n\n  const onEnd = React.useCallback(\n    (e: TouchEvent): void => {\n      if (swipingBack && window) {\n        const speed = (swipeBackShift / e.duration) * 1000;\n        if (swipeBackShift === 0) {\n          onSwipeBackCancel();\n        } else if (swipeBackShift >= (window?.innerWidth ?? 0)) {\n          onSwipeBackSuccess();\n        } else if (\n          speed > 250 ||\n          swipeBackStartX + swipeBackShift > window.innerWidth / 2\n        ) {\n          setSwipeBackResult(SwipeBackResults.success);\n        } else {\n          setSwipeBackResult(SwipeBackResults.fail);\n        }\n      }\n    },\n    [\n      onSwipeBackCancel,\n      onSwipeBackSuccess,\n      swipeBackShift,\n      swipeBackStartX,\n      swipingBack,\n      window,\n    ]\n  );\n\n  const calcPanelSwipeStyles = (\n    panelId: string | undefined\n  ): React.CSSProperties => {\n    if (!canUseDOM || !window) {\n      return {};\n    }\n\n    const isPrev = panelId === swipeBackPrevPanel;\n    const isNext = panelId === swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${swipeBackShift}px`;\n    let nextPanelTranslate = `${\n      -50 + (swipeBackShift * 100) / window.innerWidth / 2\n    }%`;\n    let prevPanelShadow =\n      (0.3 * (window.innerWidth - swipeBackShift)) / window.innerWidth;\n\n    if (swipeBackResult) {\n      return isPrev\n        ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` }\n        : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  };\n\n  React.useEffect(() => {\n    popout && blurActiveElement(document);\n  }, [document, popout]);\n\n  React.useEffect(() => {\n    // Нужен переход\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      !prevSwipingBack &&\n      !prevBrowserSwipe\n    ) {\n      const firstLayerId = (\n        React.Children.toArray(children) as React.ReactElement[]\n      )\n        .map((panel) => getNavId(panel.props, warn))\n        .find((id) => id === prevActivePanel || id === activePanelProp);\n\n      const isBackTransition = firstLayerId === activePanelProp;\n      scrolls.current[prevActivePanel] = scroll?.getScroll().y;\n\n      if (disableAnimation) {\n        flushTransition(prevActivePanel, isBackTransition);\n      } else {\n        blurActiveElement(document);\n\n        setVisiblePanels([prevActivePanel, activePanelProp]);\n        setPrevPanel(prevActivePanel);\n        setNextPanel(activePanelProp);\n        setActivePanel(null);\n        setAnimated(true);\n        setIsBack(isBackTransition);\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          animationFinishTimeout.set();\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      prevSwipingBack\n    ) {\n      const nextPanel = activePanelProp;\n      const prevPanel = prevActivePanel;\n      if (prevSwipeBackPrevPanel) {\n        scrolls.current[prevSwipeBackPrevPanel] = 0;\n      }\n\n      setSwipeBackPrevPanel(null);\n      setSwipeBackNextPanel(null);\n      setSwipingBack(false);\n      setSwipeBackResult(null);\n      setSwipeBackStartX(0);\n      setSwipeBackShift(0);\n      setActivePanel(nextPanel);\n      setVisiblePanels([nextPanel]);\n\n      afterTransition.current = () => {\n        if (nextPanel !== null) {\n          scroll?.scrollTo(0, scrolls.current[nextPanel]);\n        }\n        prevOnTransition &&\n          prevOnTransition({\n            isBack: true,\n            from: prevPanel,\n            to: nextPanel,\n          });\n      };\n    }\n\n    // Начался свайп назад\n    if (!prevSwipingBack && swipingBack) {\n      onSwipeBackStart && onSwipeBackStart();\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevSwipeBackResult && swipeBackResult) {\n      waitTransitionFinish(\n        pickPanel(swipeBackNextPanel),\n        swipingBackTransitionEndHandler,\n        platform === IOS ? 600 : 300\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (\n      prevSwipeBackResult === SwipeBackResults.fail &&\n      !swipeBackResult &&\n      activePanel !== null\n    ) {\n      scroll?.scrollTo(0, scrolls.current[activePanel]);\n    }\n\n    // Закончился Safari свайп\n    if (prevActivePanel !== activePanelProp && browserSwipe) {\n      setBrowserSwipe(false);\n      setNextPanel(null);\n      setPrevPanel(null);\n      setAnimated(false);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n    }\n  }, [\n    activePanelProp,\n    activePanel,\n    animationFinishTimeout,\n    browserSwipe,\n    children,\n    disableAnimation,\n    document,\n    flushTransition,\n    onSwipeBackStart,\n    panels,\n    platform,\n    prevActivePanel,\n    prevBrowserSwipe,\n    prevOnTransition,\n    prevSwipeBackPrevPanel,\n    prevSwipeBackResult,\n    prevSwipingBack,\n    scroll,\n    swipeBackNextPanel,\n    swipeBackResult,\n    swipingBack,\n    swipingBackTransitionEndHandler,\n    waitTransitionFinish,\n  ]);\n\n  return (\n    <Touch\n      Component=\"section\"\n      {...restProps}\n      vkuiClass={classNames(\n        \"View\",\n        platform === IOS && \"View--ios\",\n        !disableAnimation && animated && \"View--animated\",\n        !disableAnimation && swipingBack && \"View--swiping-back\",\n        disableAnimation && \"View--no-motion\"\n      )}\n      onMoveX={onMoveX}\n      onEnd={onEnd}\n    >\n      <div vkuiClass=\"View__panels\">\n        {panels.map((panel: React.ReactElement) => {\n          const panelId = getNavId(panel.props, warn);\n          const isPrev =\n            panelId === prevPanel || panelId === swipeBackPrevPanel;\n          const isTransitionTarget =\n            animated && panelId === (isBack ? prevPanel : nextPanel);\n          const compensateScroll =\n            isPrev ||\n            panelId === swipeBackNextPanel ||\n            (panelId === nextPanel && isBack);\n\n          return (\n            <div\n              vkuiClass={classNames(\n                \"View__panel\",\n                panelId === activePanel && \"View__panel--active\",\n                panelId === prevPanel && \"View__panel--prev\",\n                panelId === nextPanel && \"View__panel--next\",\n                panelId === swipeBackPrevPanel &&\n                  \"View__panel--swipe-back-prev\",\n                panelId === swipeBackNextPanel &&\n                  \"View__panel--swipe-back-next\",\n                swipeBackResult === SwipeBackResults.success &&\n                  \"View__panel--swipe-back-success\",\n                swipeBackResult === SwipeBackResults.fail &&\n                  \"View__panel--swipe-back-failed\"\n              )}\n              onAnimationEnd={\n                isTransitionTarget ? transitionEndHandler : undefined\n              }\n              ref={(el) =>\n                panelId !== undefined && (panelNodes.current[panelId] = el)\n              }\n              style={calcPanelSwipeStyles(panelId)}\n              key={panelId}\n            >\n              <div\n                vkuiClass=\"View__panel-in\"\n                style={{\n                  marginTop: compensateScroll\n                    ? -(scrolls.current[panelId as string] ?? 0)\n                    : undefined,\n                }}\n              >\n                <NavTransitionProvider\n                  entering={\n                    panelId === nextPanel || panelId === swipeBackNextPanel\n                  }\n                >\n                  {panel}\n                </NavTransitionProvider>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <AppRootPortal>\n        {!!popout && <div vkuiClass=\"View__popout\">{popout}</div>}\n        {!!modal && <div vkuiClass=\"View__modal\">{modal}</div>}\n      </AppRootPortal>\n    </Touch>\n  );\n};\n"],"mappings":"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"}