{"version":3,"file":"ViewInfinite.js","names":["warn","warnOnce","SwipeBackResults","scrollsCache","ViewInfiniteComponent","props","getNavId","undefined","e","includes","animationName","state","prevPanel","flushTransition","Boolean","isBack","propertyName","target","pickPanel","swipeBackNextPanel","swipeBackResult","fail","onSwipeBackCancel","success","onSwipeBackSuccess","swipeBackExcluded","window","platform","configProvider","IOS","isWebView","startX","innerWidth","browserSwipe","setState","onSwipeBack","animated","swipingBack","history","length","activePanel","prevScrolls","scrolls","scroll","getScroll","y","swipebackStartX","swipeBackPrevPanel","slice","swipeBackShift","shiftX","speed","duration","visiblePanels","nextPanel","document","React","Children","toArray","children","id","animationFinishTimeout","clearTimeout","prevProps","prevState","popout","blurActiveElement","modal","isBackCheck","from","to","firstLayerId","panels","map","panel","find","shouldDisableTransitionMotion","animationEvent","supported","setTimeout","transitionEndHandler","ANDROID","VKCOM","scrollPosition","prevPanelScrolls","newPanelScrolls","pop","scrollTo","onTransition","onSwipeBackStart","waitTransitionFinish","swipingBackTransitionEndHandler","transitionMotionEnabled","splitCol","animate","elem","eventHandler","transitionEvent","name","removeEventListener","addEventListener","transitionFinishTimeout","activeElement","blur","panelNodes","panelId","canUseDOM","isPrev","isNext","prevPanelTranslate","nextPanelTranslate","prevPanelShadow","boxShadow","transform","WebkitTransform","_1","nav","restProps","hasPopout","hasModal","filter","sort","isPrevPanel","isNextPanel","disableAnimation","modifiers","classNames","getClassName","onMoveX","onEnd","compensateScroll","isTransitionTarget","scrollList","el","calcPanelSwipeStyles","marginTop","Component","ViewInfinite","withContext","withPlatform","withDOM","SplitColContext","ConfigProviderContext","ScrollContext"],"sources":["../../../../src/components/View/ViewInfinite.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { transitionEvent, animationEvent } from \"../../lib/supportEvents\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { IOS, ANDROID, VKCOM } from \"../../lib/platform\";\nimport { Touch, TouchEvent } from \"../Touch/Touch\";\nimport { HasPlatform } from \"../../types\";\nimport { withPlatform } from \"../../hoc/withPlatform\";\nimport { withContext } from \"../../hoc/withContext\";\nimport {\n  ConfigProviderContext,\n  ConfigProviderContextInterface,\n} from \"../ConfigProvider/ConfigProviderContext\";\nimport { SplitColContext, SplitColContextProps } from \"../SplitCol/SplitCol\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { canUseDOM, withDOM, DOMProps } from \"../../lib/dom\";\nimport {\n  ScrollContext,\n  ScrollContextInterface,\n} from \"../AppRoot/ScrollContext\";\nimport { NavTransitionProvider } from \"../NavTransitionContext/NavTransitionContext\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { swipeBackExcluded } from \"./utils\";\nimport \"./View.css\";\n\nconst warn = warnOnce(\"ViewInfinite\");\n\nenum SwipeBackResults {\n  fail = 1,\n  success,\n}\n\ninterface Scrolls {\n  [index: string]: Array<number | undefined>;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\ntype TransitionEventHandler = (e?: TransitionEvent) => void;\n\nlet scrollsCache: ViewsScrolls = {};\n\nexport type TransitionParams = { from: string | null; to: string | null };\n\nexport interface ViewInfiniteProps\n  extends React.HTMLAttributes<HTMLElement>,\n    HasPlatform,\n    NavIdProps {\n  activePanel: string;\n  popout?: React.ReactNode;\n  modal?: React.ReactNode;\n  onTransition?(params: TransitionParams & { isBack: boolean }): void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?(): void;\n  /**\n   * callback начала анимации свайпа назад.\n   */\n  onSwipeBackStart?(): void;\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?(): void;\n  history?: string[];\n  isBackCheck?(params: TransitionParams): boolean;\n  /**\n   * @ignore\n   */\n  splitCol?: SplitColContextProps;\n  /**\n   * @ignore\n   */\n  configProvider?: ConfigProviderContextInterface;\n  /**\n   * @ignore\n   */\n  scroll?: ScrollContextInterface;\n}\n\nexport interface ViewInfiniteState {\n  animated: boolean;\n\n  visiblePanels: Array<string | null>;\n  activePanel: string | null;\n  isBack?: boolean;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack: boolean;\n  swipebackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: SwipeBackResults | null;\n\n  browserSwipe: boolean;\n}\n\nclass ViewInfiniteComponent extends React.Component<\n  ViewInfiniteProps & DOMProps,\n  ViewInfiniteState\n> {\n  constructor(props: ViewInfiniteProps) {\n    super(props);\n\n    this.state = {\n      animated: false,\n\n      visiblePanels: [props.activePanel],\n      activePanel: props.activePanel,\n      isBack: undefined,\n      prevPanel: null,\n      nextPanel: null,\n\n      swipingBack: false,\n      swipebackStartX: 0,\n      swipeBackShift: 0,\n      swipeBackNextPanel: null,\n      swipeBackPrevPanel: null,\n      swipeBackResult: null,\n\n      browserSwipe: false,\n    };\n  }\n\n  static defaultProps: Partial<ViewInfiniteProps> = {\n    history: [],\n  };\n\n  private scrolls = scrollsCache[getNavId(this.props, warn) as string] || {};\n  private transitionFinishTimeout: number | undefined = undefined;\n  private animationFinishTimeout: number | undefined = undefined;\n\n  get document() {\n    return this.props.document;\n  }\n\n  get window() {\n    return this.props.window;\n  }\n\n  get panels() {\n    return React.Children.toArray(this.props.children) as React.ReactElement[];\n  }\n\n  panelNodes: { [id: string]: HTMLDivElement | null } = {};\n\n  componentWillUnmount() {\n    const id = getNavId(this.props);\n    if (id) {\n      scrollsCache[id] = this.scrolls;\n    }\n    if (this.animationFinishTimeout) {\n      clearTimeout(this.animationFinishTimeout);\n    }\n  }\n\n  componentDidUpdate(\n    prevProps: ViewInfiniteProps,\n    prevState: ViewInfiniteState\n  ) {\n    this.props.popout && !prevProps.popout && this.blurActiveElement();\n    this.props.modal && !prevProps.modal && this.blurActiveElement();\n\n    // Нужен переход\n    if (\n      prevProps.activePanel !== this.props.activePanel &&\n      !prevState.swipingBack &&\n      !prevState.browserSwipe\n    ) {\n      let isBack = false;\n\n      if (this.props.isBackCheck) {\n        isBack = this.props.isBackCheck({\n          from: prevProps.activePanel,\n          to: this.props.activePanel,\n        });\n      } else {\n        const firstLayerId = this.panels\n          .map((panel) => getNavId(panel.props, warn))\n          .find(\n            (id) =>\n              id === prevProps.activePanel || id === this.props.activePanel\n          );\n        isBack = firstLayerId === this.props.activePanel;\n      }\n\n      this.blurActiveElement();\n\n      const prevScrolls = this.scrolls[prevProps.activePanel] || [];\n      const scrolls = {\n        ...this.scrolls,\n        [prevProps.activePanel]: [\n          ...prevScrolls,\n          this.props.scroll?.getScroll().y,\n        ],\n      };\n      this.scrolls = scrolls;\n\n      if (this.shouldDisableTransitionMotion()) {\n        this.flushTransition(prevProps.activePanel, isBack);\n      } else {\n        this.setState({\n          visiblePanels: [prevProps.activePanel, this.props.activePanel],\n          prevPanel: prevProps.activePanel,\n          nextPanel: this.props.activePanel,\n          activePanel: null,\n          animated: true,\n          isBack,\n        });\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          if (this.animationFinishTimeout) {\n            clearTimeout(this.animationFinishTimeout);\n          }\n          this.animationFinishTimeout = setTimeout(\n            this.transitionEndHandler,\n            this.props.platform === ANDROID || this.props.platform === VKCOM\n              ? 300\n              : 600\n          );\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (\n      prevProps.activePanel !== this.props.activePanel &&\n      prevState.swipingBack\n    ) {\n      const nextPanel = this.state.swipeBackNextPanel;\n      const prevPanel = this.state.swipeBackPrevPanel;\n      let scrollPosition: undefined | number = undefined;\n\n      this.scrolls = {\n        ...this.scrolls,\n      };\n\n      if (prevPanel !== null) {\n        const prevPanelScrolls = [...(this.scrolls[prevPanel] || [])].slice(\n          0,\n          -1\n        );\n        this.scrolls[prevPanel] = prevPanelScrolls;\n      }\n      if (nextPanel !== null) {\n        const newPanelScrolls = [...(this.scrolls[nextPanel] || [])];\n        scrollPosition = newPanelScrolls.pop();\n        this.scrolls[nextPanel] = newPanelScrolls;\n      }\n\n      this.setState(\n        {\n          swipeBackPrevPanel: null,\n          swipeBackNextPanel: null,\n          swipingBack: false,\n          swipeBackResult: null,\n          swipebackStartX: 0,\n          swipeBackShift: 0,\n          activePanel: nextPanel,\n          visiblePanels: [nextPanel],\n        },\n        () => {\n          this.props.scroll?.scrollTo(0, scrollPosition);\n          prevProps.onTransition &&\n            prevProps.onTransition({\n              isBack: true,\n              from: prevPanel,\n              to: nextPanel,\n            });\n        }\n      );\n    }\n\n    // Начался свайп назад\n    if (!prevState.swipingBack && this.state.swipingBack) {\n      this.props.onSwipeBackStart && this.props.onSwipeBackStart();\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevState.swipeBackResult && this.state.swipeBackResult) {\n      this.waitTransitionFinish(\n        this.pickPanel(this.state.swipeBackNextPanel),\n        this.swipingBackTransitionEndHandler\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (\n      prevState.swipeBackResult === SwipeBackResults.fail &&\n      !this.state.swipeBackResult &&\n      this.state.activePanel !== null\n    ) {\n      const newPanelScrolls = [...(this.scrolls[this.state.activePanel] || [])];\n      const scrollPosition = newPanelScrolls.pop();\n      this.scrolls = {\n        ...this.scrolls,\n        [this.state.activePanel]: newPanelScrolls,\n      };\n\n      this.props.scroll?.scrollTo(0, scrollPosition);\n    }\n\n    // Закончился Safari свайп\n    if (\n      prevProps.activePanel !== this.props.activePanel &&\n      this.state.browserSwipe\n    ) {\n      this.setState({\n        browserSwipe: false,\n        nextPanel: null,\n        prevPanel: null,\n        animated: false,\n        visiblePanels: [this.props.activePanel],\n        activePanel: this.props.activePanel,\n      });\n    }\n  }\n\n  shouldDisableTransitionMotion(): boolean {\n    return (\n      this.props.configProvider?.transitionMotionEnabled === false ||\n      !this.props.splitCol?.animate\n    );\n  }\n\n  waitTransitionFinish(\n    elem: HTMLElement | null | undefined,\n    eventHandler: TransitionEventHandler\n  ): void {\n    if (transitionEvent.supported && transitionEvent.name && elem) {\n      elem.removeEventListener(\n        transitionEvent.name as keyof HTMLElementEventMap,\n        eventHandler as EventListener\n      );\n      elem.addEventListener(\n        transitionEvent.name as keyof HTMLElementEventMap,\n        eventHandler as EventListener\n      );\n    } else {\n      if (this.transitionFinishTimeout) {\n        clearTimeout(this.transitionFinishTimeout);\n      }\n\n      this.transitionFinishTimeout = setTimeout(\n        eventHandler,\n        this.props.platform === ANDROID || this.props.platform === VKCOM\n          ? 300\n          : 600\n      );\n    }\n  }\n\n  blurActiveElement(): void {\n    if (typeof this.window !== \"undefined\" && this.document?.activeElement) {\n      (this.document.activeElement as HTMLElement).blur();\n    }\n  }\n\n  pickPanel(id: string | null) {\n    if (id === null) {\n      return undefined;\n    }\n    return this.panelNodes[id];\n  }\n\n  flushTransition(prevPanel: string, isBack: boolean) {\n    const activePanel = this.props.activePanel;\n\n    const prevPanelScrolls = [...(this.scrolls[prevPanel] || [])].slice(0, -1);\n    const newPanelScrolls = [...(this.scrolls[activePanel] || [])];\n    const scrollPosition = isBack ? newPanelScrolls.pop() : 0;\n    if (isBack) {\n      this.scrolls = {\n        ...this.scrolls,\n        [prevPanel]: prevPanelScrolls,\n        [activePanel]: newPanelScrolls,\n      };\n    }\n\n    this.setState(\n      {\n        prevPanel: null,\n        nextPanel: null,\n        visiblePanels: [activePanel],\n        activePanel: activePanel,\n        animated: false,\n        isBack: undefined,\n      },\n      () => {\n        this.props.scroll?.scrollTo(0, isBack ? scrollPosition : 0);\n        this.props.onTransition &&\n          this.props.onTransition({ isBack, from: prevPanel, to: activePanel });\n      }\n    );\n  }\n\n  transitionEndHandler = (e?: React.AnimationEvent): void => {\n    if (\n      (!e ||\n        [\n          \"vkui-animation-ios-next-forward\",\n          \"vkui-animation-ios-prev-back\",\n          \"vkui-animation-view-next-forward\",\n          \"vkui-animation-view-prev-back\",\n        ].includes(e.animationName)) &&\n      this.state.prevPanel !== null\n    ) {\n      this.flushTransition(this.state.prevPanel, Boolean(this.state.isBack));\n    }\n  };\n\n  swipingBackTransitionEndHandler = (e?: TransitionEvent): void => {\n    // indexOf because of vendor prefixes in old browsers\n    if (\n      !e ||\n      (e.propertyName.includes(\"transform\") &&\n        e.target === this.pickPanel(this.state.swipeBackNextPanel))\n    ) {\n      switch (this.state.swipeBackResult) {\n        case SwipeBackResults.fail:\n          this.onSwipeBackCancel();\n          break;\n        case SwipeBackResults.success:\n          this.onSwipeBackSuccess();\n      }\n    }\n  };\n\n  onSwipeBackSuccess(): void {\n    this.props.onSwipeBack && this.props.onSwipeBack();\n  }\n\n  onSwipeBackCancel(): void {\n    this.props.onSwipeBackCancel && this.props.onSwipeBackCancel();\n    this.setState({\n      swipeBackPrevPanel: null,\n      swipeBackNextPanel: null,\n      swipingBack: false,\n      swipeBackResult: null,\n      swipebackStartX: 0,\n      swipeBackShift: 0,\n    });\n  }\n\n  onMoveX = (e: TouchEvent): void => {\n    if (swipeBackExcluded(e) || !this.window) {\n      return;\n    }\n\n    const { platform, configProvider } = this.props;\n\n    if (\n      platform === IOS &&\n      !configProvider?.isWebView &&\n      (e.startX <= 70 || e.startX >= this.window.innerWidth - 70) &&\n      !this.state.browserSwipe\n    ) {\n      this.setState({ browserSwipe: true });\n    }\n\n    if (\n      platform === IOS &&\n      configProvider?.isWebView &&\n      this.props.onSwipeBack\n    ) {\n      if (this.state.animated && e.startX <= 70) {\n        return;\n      }\n\n      if (\n        e.startX <= 70 &&\n        !this.state.swipingBack &&\n        (this.props.history?.length ?? 0) > 1\n      ) {\n        if (this.state.activePanel !== null) {\n          const prevScrolls = this.scrolls[this.state.activePanel] || [];\n          this.scrolls = {\n            ...this.scrolls,\n            [this.state.activePanel]: [\n              ...prevScrolls,\n              this.props.scroll?.getScroll().y,\n            ],\n          };\n        }\n\n        this.setState({\n          swipingBack: true,\n          swipebackStartX: e.startX,\n          swipeBackPrevPanel: this.state.activePanel,\n          swipeBackNextPanel: this.props.history!.slice(-2)[0],\n        });\n      }\n      if (this.state.swipingBack) {\n        let swipeBackShift;\n        if (e.shiftX < 0) {\n          swipeBackShift = 0;\n        } else if (\n          e.shiftX >\n          this.window.innerWidth - this.state.swipebackStartX\n        ) {\n          swipeBackShift = this.window.innerWidth;\n        } else {\n          swipeBackShift = e.shiftX;\n        }\n        this.setState({ swipeBackShift });\n      }\n    }\n  };\n\n  onEnd = (e: TouchEvent): void => {\n    if (this.state.swipingBack && this.window) {\n      const speed = (this.state.swipeBackShift / e.duration) * 1000;\n      if (this.state.swipeBackShift === 0) {\n        this.onSwipeBackCancel();\n      } else if (this.state.swipeBackShift >= this.window.innerWidth) {\n        this.onSwipeBackSuccess();\n      } else if (\n        speed > 250 ||\n        this.state.swipebackStartX + this.state.swipeBackShift >\n          this.window.innerWidth / 2\n      ) {\n        this.setState({ swipeBackResult: SwipeBackResults.success });\n      } else {\n        this.setState({ swipeBackResult: SwipeBackResults.fail });\n      }\n    }\n  };\n\n  calcPanelSwipeStyles(panelId: string | undefined): React.CSSProperties {\n    if (!canUseDOM || !this.window) {\n      return {};\n    }\n\n    const isPrev = panelId === this.state.swipeBackPrevPanel;\n    const isNext = panelId === this.state.swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || this.state.swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${this.state.swipeBackShift}px`;\n    let nextPanelTranslate = `${\n      -50 + (this.state.swipeBackShift * 100) / this.window.innerWidth / 2\n    }%`;\n    let prevPanelShadow =\n      (0.3 * (this.window.innerWidth - this.state.swipeBackShift)) /\n      this.window.innerWidth;\n\n    if (this.state.swipeBackResult) {\n      return isPrev\n        ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` }\n        : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  }\n\n  render() {\n    const {\n      popout,\n      modal,\n      platform,\n      activePanel: _1,\n      splitCol,\n      configProvider,\n      history,\n      id,\n      nav,\n      onTransition,\n      onSwipeBack,\n      onSwipeBackStart,\n      onSwipeBackCancel,\n      window,\n      document,\n      scroll,\n      isBackCheck,\n      ...restProps\n    } = this.props;\n    const {\n      prevPanel,\n      nextPanel,\n      activePanel,\n      isBack,\n      animated,\n      swipeBackPrevPanel,\n      swipeBackNextPanel,\n      swipeBackResult,\n      swipingBack,\n    } = this.state;\n\n    const hasPopout = !!popout;\n    const hasModal = !!modal;\n\n    const panels = this.panels\n      .filter((panel) => {\n        const panelId = getNavId(panel.props, warn);\n\n        return (\n          (panelId !== undefined &&\n            this.state.visiblePanels.includes(panelId)) ||\n          panelId === swipeBackPrevPanel ||\n          panelId === swipeBackNextPanel\n        );\n      })\n      .sort((panel) => {\n        const panelId = getNavId(panel.props, warn);\n        const isPrevPanel =\n          panelId === prevPanel || panelId === swipeBackPrevPanel;\n        const isNextPanel =\n          panelId === nextPanel || panelId === swipeBackNextPanel;\n\n        if (isNextPanel) {\n          return swipingBack || this.state.isBack ? -1 : 1;\n        }\n\n        if (isPrevPanel) {\n          return swipingBack || this.state.isBack ? 1 : -1;\n        }\n\n        return 0;\n      });\n\n    const disableAnimation = this.shouldDisableTransitionMotion();\n\n    const modifiers = {\n      \"View--animated\": !disableAnimation && this.state.animated,\n      \"View--swiping-back\": !disableAnimation && this.state.swipingBack,\n      \"View--no-motion\": disableAnimation,\n    };\n\n    return (\n      <Touch\n        Component=\"section\"\n        {...restProps}\n        vkuiClass={classNames(getClassName(\"View\", platform), modifiers)}\n        onMoveX={this.onMoveX}\n        onEnd={this.onEnd}\n      >\n        <div vkuiClass=\"View__panels\">\n          {panels.map((panel: React.ReactElement) => {\n            const panelId = getNavId(panel.props, warn);\n            const isPrev =\n              panelId === prevPanel || panelId === swipeBackPrevPanel;\n            const compensateScroll =\n              isPrev ||\n              panelId === swipeBackNextPanel ||\n              (panelId === nextPanel && isBack);\n            const isTransitionTarget =\n              animated && panelId === (isBack ? prevPanel : nextPanel);\n            const scrollList = (panelId && this.scrolls[panelId]) || [];\n            const scroll = scrollList[scrollList.length - 1] || 0;\n\n            return (\n              <div\n                vkuiClass={classNames(\n                  \"View__panel\",\n                  panelId === activePanel && \"View__panel--active\",\n                  panelId === prevPanel && \"View__panel--prev\",\n                  panelId === nextPanel && \"View__panel--next\",\n                  panelId === swipeBackPrevPanel &&\n                    \"View__panel--swipe-back-prev\",\n                  panelId === swipeBackNextPanel &&\n                    \"View__panel--swipe-back-next\",\n                  swipeBackResult === SwipeBackResults.success &&\n                    \"View__panel--swipe-back-success\",\n                  swipeBackResult === SwipeBackResults.fail &&\n                    \"View__panel--swipe-back-failed\"\n                )}\n                onAnimationEnd={\n                  isTransitionTarget ? this.transitionEndHandler : undefined\n                }\n                ref={(el) =>\n                  panelId !== undefined && (this.panelNodes[panelId] = el)\n                }\n                style={this.calcPanelSwipeStyles(panelId)}\n                key={panelId}\n              >\n                <div\n                  vkuiClass=\"View__panel-in\"\n                  style={{ marginTop: compensateScroll ? -scroll : undefined }}\n                >\n                  <NavTransitionProvider\n                    entering={\n                      panelId === nextPanel || panelId === swipeBackNextPanel\n                    }\n                  >\n                    {panel}\n                  </NavTransitionProvider>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        <AppRootPortal>\n          {hasPopout && <div vkuiClass=\"View__popout\">{popout}</div>}\n          {hasModal && <div vkuiClass=\"View__modal\">{modal}</div>}\n        </AppRootPortal>\n      </Touch>\n    );\n  }\n}\n\nexport const ViewInfinite = withContext(\n  withContext(\n    withContext(\n      withPlatform(withDOM<ViewInfiniteProps>(ViewInfiniteComponent)),\n      SplitColContext,\n      \"splitCol\"\n    ),\n    ConfigProviderContext,\n    \"configProvider\"\n  ),\n  ScrollContext,\n  \"scroll\"\n);\n"],"mappings":"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"}