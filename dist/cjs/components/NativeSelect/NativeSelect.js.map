{"version":3,"sources":["../../../../src/components/NativeSelect/NativeSelect.tsx"],"names":["NativeSelectComponent","style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","multiline","selectType","SelectType","default","status","restProps","platform","React","useState","title","setTitle","empty","setEmpty","value","onChange","selectRef","selectedOption","current","options","selectedIndex","text","NativeSelect","displayName"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity } from \"../../hoc/withAdaptivity\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { SelectType, SelectTypography } from \"../Select/Select\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"../Select/Select.css\";\n\nexport interface NativeSelectProps\n  extends React.SelectHTMLAttributes<HTMLSelectElement>,\n    HasRef<HTMLSelectElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasAlign,\n    AdaptivityProps,\n    Pick<FormFieldProps, \"status\"> {\n  placeholder?: string;\n  multiline?: boolean;\n  selectType?: keyof typeof SelectType;\n}\n\nexport interface SelectState {\n  value?: React.SelectHTMLAttributes<HTMLSelectElement>[\"value\"];\n  title?: string;\n  notSelected?: boolean;\n}\n\nconst NativeSelectComponent = ({\n  style,\n  defaultValue = \"\",\n  align,\n  placeholder,\n  children,\n  className,\n  getRef,\n  getRootRef,\n  disabled,\n  sizeX,\n  sizeY,\n  multiline,\n  selectType = SelectType.default,\n  status,\n  ...restProps\n}: NativeSelectProps & AdaptivityContextInterface) => {\n  const platform = usePlatform();\n  const [title, setTitle] = React.useState(\"\");\n  const [empty, setEmpty] = React.useState(false);\n  const [value, onChange] = useEnsuredControl(restProps, { defaultValue });\n  const selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(() => {\n    const selectedOption =\n      selectRef.current?.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setEmpty(selectedOption.value === \"\" && placeholder != null);\n    }\n  }, [value, children]);\n\n  return (\n    <FormField\n      Component=\"label\"\n      vkuiClass={classNames(\n        getClassName(\"Select\", platform),\n        `Select--${selectType}`,\n        empty && \"Select--empty\",\n        multiline && \"Select--multiline\",\n        align && `Select--align-${align}`,\n        `Select--sizeX-${sizeX}`,\n        `Select--sizeY-${sizeY}`\n      )}\n      className={className}\n      style={style}\n      getRootRef={getRootRef}\n      disabled={disabled}\n      after={<DropdownIcon />}\n      status={status}\n    >\n      <select\n        {...restProps}\n        disabled={disabled}\n        vkuiClass=\"Select__el\"\n        onChange={onChange}\n        value={value}\n        ref={selectRef}\n      >\n        {placeholder && <option value=\"\">{placeholder}</option>}\n        {children}\n      </select>\n      <div vkuiClass=\"Select__container\">\n        {/* TODO v5.0.0 поправить под новую адаптивность */}\n        <SelectTypography vkuiClass=\"Select__title\">{title}</SelectTypography>\n      </div>\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/NativeSelect\n */\nexport const NativeSelect = withAdaptivity(NativeSelectComponent, {\n  sizeX: true,\n  sizeY: true,\n});\n\nNativeSelect.displayName = \"NativeSelect\";\n"],"file":"NativeSelect.js"}