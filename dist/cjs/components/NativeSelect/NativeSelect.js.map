{"version":3,"file":"NativeSelect.js","names":["NativeSelectComponent","style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","multiline","selectType","SelectType","default","status","restProps","platform","usePlatform","React","useState","title","setTitle","empty","setEmpty","useEnsuredControl","value","onChange","selectRef","useExternRef","useIsomorphicLayoutEffect","selectedOption","current","options","selectedIndex","text","classNames","getClassName","NativeSelect","withAdaptivity","displayName"],"sources":["../../../../src/components/NativeSelect/NativeSelect.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity } from \"../../hoc/withAdaptivity\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { SelectType, SelectTypography } from \"../Select/Select\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"../Select/Select.css\";\n\nexport interface NativeSelectProps\n  extends React.SelectHTMLAttributes<HTMLSelectElement>,\n    HasRef<HTMLSelectElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasAlign,\n    AdaptivityProps,\n    Pick<FormFieldProps, \"status\"> {\n  placeholder?: string;\n  multiline?: boolean;\n  selectType?: keyof typeof SelectType;\n}\n\nexport interface SelectState {\n  value?: React.SelectHTMLAttributes<HTMLSelectElement>[\"value\"];\n  title?: string;\n  notSelected?: boolean;\n}\n\nconst NativeSelectComponent = ({\n  style,\n  defaultValue = \"\",\n  align,\n  placeholder,\n  children,\n  className,\n  getRef,\n  getRootRef,\n  disabled,\n  sizeX,\n  sizeY,\n  multiline,\n  selectType = SelectType.default,\n  status,\n  ...restProps\n}: NativeSelectProps & AdaptivityContextInterface) => {\n  const platform = usePlatform();\n  const [title, setTitle] = React.useState(\"\");\n  const [empty, setEmpty] = React.useState(false);\n  const [value, onChange] = useEnsuredControl(restProps, { defaultValue });\n  const selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(() => {\n    const selectedOption =\n      selectRef.current?.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setEmpty(selectedOption.value === \"\" && placeholder != null);\n    }\n  }, [value, children]);\n\n  return (\n    <FormField\n      Component=\"label\"\n      vkuiClass={classNames(\n        getClassName(\"Select\", platform),\n        `Select--${selectType}`,\n        empty && \"Select--empty\",\n        multiline && \"Select--multiline\",\n        align && `Select--align-${align}`,\n        `Select--sizeX-${sizeX}`,\n        `Select--sizeY-${sizeY}`\n      )}\n      className={className}\n      style={style}\n      getRootRef={getRootRef}\n      disabled={disabled}\n      after={<DropdownIcon />}\n      status={status}\n    >\n      <select\n        {...restProps}\n        disabled={disabled}\n        vkuiClass=\"Select__el\"\n        onChange={onChange}\n        value={value}\n        ref={selectRef}\n      >\n        {placeholder && <option value=\"\">{placeholder}</option>}\n        {children}\n      </select>\n      <div vkuiClass=\"Select__container\">\n        {/* TODO v5.0.0 поправить под новую адаптивность */}\n        <SelectTypography vkuiClass=\"Select__title\">{title}</SelectTypography>\n      </div>\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/NativeSelect\n */\nexport const NativeSelect = withAdaptivity(NativeSelectComponent, {\n  sizeX: true,\n  sizeY: true,\n});\n\nNativeSelect.displayName = \"NativeSelect\";\n"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAgE;AAyBhE,IAAMA,qBAAqB,GAAG,SAAxBA,qBAAqB,OAgB2B;EAAA,IAfpDC,KAAK,QAALA,KAAK;IAAA,yBACLC,YAAY;IAAZA,YAAY,kCAAG,EAAE;IACjBC,KAAK,QAALA,KAAK;IACLC,WAAW,QAAXA,WAAW;IACXC,QAAQ,QAARA,QAAQ;IACRC,SAAS,QAATA,SAAS;IACTC,MAAM,QAANA,MAAM;IACNC,UAAU,QAAVA,UAAU;IACVC,QAAQ,QAARA,QAAQ;IACRC,KAAK,QAALA,KAAK;IACLC,KAAK,QAALA,KAAK;IACLC,SAAS,QAATA,SAAS;IAAA,uBACTC,UAAU;IAAVA,UAAU,gCAAGC,kBAAU,CAACC,OAAO;IAC/BC,MAAM,QAANA,MAAM;IACHC,SAAS;EAEZ,IAAMC,QAAQ,GAAG,IAAAC,wBAAW,GAAE;EAC9B,sBAA0BC,KAAK,CAACC,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCC,KAAK;IAAEC,QAAQ;EACtB,uBAA0BH,KAAK,CAACC,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAxCG,KAAK;IAAEC,QAAQ;EACtB,yBAA0B,IAAAC,qCAAiB,EAACT,SAAS,EAAE;MAAEf,YAAY,EAAZA;IAAa,CAAC,CAAC;IAAA;IAAjEyB,KAAK;IAAEC,QAAQ;EACtB,IAAMC,SAAS,GAAG,IAAAC,0BAAY,EAACvB,MAAM,CAAC;EACtC,IAAAwB,oDAAyB,EAAC,YAAM;IAAA;IAC9B,IAAMC,cAAc,yBAClBH,SAAS,CAACI,OAAO,uDAAjB,mBAAmBC,OAAO,CAACL,SAAS,CAACI,OAAO,CAACE,aAAa,CAAC;IAC7D,IAAIH,cAAc,EAAE;MAClBT,QAAQ,CAACS,cAAc,CAACI,IAAI,CAAC;MAC7BX,QAAQ,CAACO,cAAc,CAACL,KAAK,KAAK,EAAE,IAAIvB,WAAW,IAAI,IAAI,CAAC;IAC9D;EACF,CAAC,EAAE,CAACuB,KAAK,EAAEtB,QAAQ,CAAC,CAAC;EAErB,OACE,qCAAC,oBAAS;IACR,SAAS,EAAC,OAAO;IACjB,SAAS,EAAE,IAAAgC,sBAAU,EACnB,IAAAC,0BAAY,EAAC,QAAQ,EAAEpB,QAAQ,CAAC,oBACrBL,UAAU,GACrBW,KAAK,IAAI,eAAe,EACxBZ,SAAS,IAAI,mBAAmB,EAChCT,KAAK,4BAAqBA,KAAK,CAAE,0BAChBO,KAAK,2BACLC,KAAK,EACtB;IACF,SAAS,EAAEL,SAAU;IACrB,KAAK,EAAEL,KAAM;IACb,UAAU,EAAEO,UAAW;IACvB,QAAQ,EAAEC,QAAS;IACnB,KAAK,EAAE,qCAAC,0BAAY,OAAI;IACxB,MAAM,EAAEO;EAAO,GAEf,0EACMC,SAAS;IACb,QAAQ,EAAER,QAAS;IACnB,SAAS,EAAC,YAAY;IACtB,QAAQ,EAAEmB,QAAS;IACnB,KAAK,EAAED,KAAM;IACb,GAAG,EAAEE;EAAU,IAEdzB,WAAW,IAAI;IAAQ,KAAK,EAAC;EAAE,GAAEA,WAAW,CAAU,EACtDC,QAAQ,CACF,EACT;IAAK,SAAS,EAAC;EAAmB,GAEhC,qCAAC,wBAAgB;IAAC,SAAS,EAAC;EAAe,GAAEiB,KAAK,CAAoB,CAClE,CACI;AAEhB,CAAC;;AAED;AACA;AACA;AACO,IAAMiB,YAAY,GAAG,IAAAC,8BAAc,EAACxC,qBAAqB,EAAE;EAChEU,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE;AACT,CAAC,CAAC;AAAC;AAEH4B,YAAY,CAACE,WAAW,GAAG,cAAc"}