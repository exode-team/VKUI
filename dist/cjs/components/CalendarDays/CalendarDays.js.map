{"version":3,"sources":["../../../../src/components/CalendarDays/CalendarDays.tsx"],"names":["CalendarDays","viewDate","value","weekStartsOn","onDayChange","isDaySelected","isDayActive","isDaySelectionEnd","isDaySelectionStart","onDayEnter","onDayLeave","isDayHinted","isHintedDaySelectionStart","isHintedDaySelectionEnd","isDayFocused","isDayDisabled","size","showNeighboringMonth","dayProps","listenDayChangesForUpdate","props","locale","React","useContext","LocaleProviderContext","ref","useRef","now","weeks","useMemo","daysNames","handleDayChange","useCallback","date","current","focus","map","dayName","week","i","day","sameMonth","toISOString"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { isSameDay, isSameMonth } from \"../../lib/date\";\nimport {\n  CalendarDay,\n  CalendarDayElementProps,\n} from \"../CalendarDay/CalendarDay\";\nimport { getDaysNames, getWeeks } from \"../../lib/calendar\";\nimport { LocaleProviderContext } from \"../LocaleProviderContext/LocaleProviderContext\";\nimport { classNames } from \"../../lib/classNames\";\nimport { useTodayDate } from \"../../hooks/useTodayDate\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport \"./CalendarDays.css\";\n\nexport interface CalendarDaysProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, \"onChange\"> {\n  value?: Date | Array<Date | null>;\n  viewDate: Date;\n  weekStartsOn: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n  showNeighboringMonth?: boolean;\n  size?: \"s\" | \"m\";\n  dayProps?: CalendarDayElementProps;\n  listenDayChangesForUpdate?: boolean;\n  onDayChange(value: Date): void;\n  isDayDisabled(value: Date): boolean;\n  isDaySelectionStart(value: Date, dayOfWeek: number): boolean;\n  isDaySelectionEnd(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionStart?(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionEnd?(value: Date, dayOfWeek: number): boolean;\n  isDayActive(value: Date): boolean;\n  isDayHinted?(value: Date): boolean;\n  isDaySelected?(value: Date): boolean;\n  isDayFocused(value: Date): boolean;\n  onDayEnter?(value: Date): void;\n  onDayLeave?(value: Date): void;\n}\n\nexport const CalendarDays = ({\n  viewDate,\n  value,\n  weekStartsOn,\n  onDayChange,\n  isDaySelected,\n  isDayActive,\n  isDaySelectionEnd,\n  isDaySelectionStart,\n  onDayEnter,\n  onDayLeave,\n  isDayHinted,\n  isHintedDaySelectionStart,\n  isHintedDaySelectionEnd,\n  isDayFocused,\n  isDayDisabled,\n  size,\n  showNeighboringMonth = false,\n  dayProps,\n  listenDayChangesForUpdate = false,\n  ...props\n}: CalendarDaysProps) => {\n  const locale = React.useContext(LocaleProviderContext);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const now = useTodayDate(listenDayChangesForUpdate);\n\n  const weeks = React.useMemo(\n    () => getWeeks(viewDate, weekStartsOn),\n    [weekStartsOn, viewDate]\n  );\n\n  const daysNames = React.useMemo(\n    () => getDaysNames(now, weekStartsOn, locale),\n    [locale, now, weekStartsOn]\n  );\n\n  const handleDayChange = React.useCallback(\n    (date: Date) => {\n      onDayChange(date);\n\n      ref.current?.focus();\n    },\n    [onDayChange]\n  );\n\n  return (\n    <div {...props} vkuiClass=\"CalendarDays\" ref={ref}>\n      <div\n        vkuiClass={classNames(\n          \"CalendarDays__row\",\n          `CalendarDays__row--size-${size}`\n        )}\n      >\n        {daysNames.map((dayName) => (\n          <Caption key={dayName} level=\"1\" vkuiClass=\"CalendarDays__weekday\">\n            {dayName}\n          </Caption>\n        ))}\n      </div>\n\n      {weeks.map((week, i) => (\n        <div\n          vkuiClass={classNames(\n            \"CalendarDays__row\",\n            `CalendarDays__row--size-${size}`\n          )}\n          key={i}\n        >\n          {week.map((day, i) => {\n            const sameMonth = isSameMonth(day, viewDate);\n            return (\n              <CalendarDay\n                key={day.toISOString()}\n                day={day}\n                today={isSameDay(day, now)}\n                active={isDayActive(day)}\n                onChange={handleDayChange}\n                hidden={!showNeighboringMonth && !sameMonth}\n                disabled={isDayDisabled(day)}\n                selectionStart={isDaySelectionStart(day, i)}\n                selectionEnd={isDaySelectionEnd(day, i)}\n                hintedSelectionStart={isHintedDaySelectionStart?.(day, i)}\n                hintedSelectionEnd={isHintedDaySelectionEnd?.(day, i)}\n                selected={isDaySelected?.(day)}\n                focused={isDayFocused(day)}\n                onEnter={onDayEnter}\n                onLeave={onDayLeave}\n                hinted={isDayHinted?.(day)}\n                sameMonth={sameMonth}\n                size={size}\n                {...dayProps}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n};\n"],"file":"CalendarDays.js"}