{"version":3,"sources":["../../../../src/components/Input/Input.tsx"],"names":["InputComponent","type","align","getRef","className","getRootRef","sizeY","style","before","after","onInput","value","restProps","cursor","setCursor","ref","input","current","setSelectionRange","handleChange","e","target","selectionStart","platform","disabled","Input"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAWA,IAAMA,cAAmD,GAAG,SAAtDA,cAAsD,OAa1C;AAAA,uBAZhBC,IAYgB;AAAA,MAZhBA,IAYgB,0BAZT,MAYS;AAAA,MAXhBC,KAWgB,QAXhBA,KAWgB;AAAA,MAVhBC,MAUgB,QAVhBA,MAUgB;AAAA,MAThBC,SASgB,QAThBA,SASgB;AAAA,MARhBC,UAQgB,QARhBA,UAQgB;AAAA,MAPhBC,KAOgB,QAPhBA,KAOgB;AAAA,MANhBC,KAMgB,QANhBA,KAMgB;AAAA,MALhBC,MAKgB,QALhBA,MAKgB;AAAA,MAJhBC,KAIgB,QAJhBA,KAIgB;AAAA,MAHhBC,OAGgB,QAHhBA,OAGgB;AAAA,MAFhBC,KAEgB,QAFhBA,KAEgB;AAAA,MADbC,SACa;;AAEhB,kBAA4B,qBAAiB,CAAjB,CAA5B;AAAA;AAAA,MAAOC,MAAP;AAAA,MAAeC,SAAf;;AACA,MAAMC,GAAG,GAAG,mBAAyB,IAAzB,CAAZ;AAEA,wBAAU,YAAM;AACd,QAAMC,KAAK,GAAGD,GAAG,CAACE,OAAlB;AACA,QAAID,KAAJ,EAAWA,KAAK,CAACE,iBAAN,CAAwBL,MAAxB,EAAgCA,MAAhC;AACZ,GAHD,EAGG,CAACE,GAAD,EAAMF,MAAN,EAAcF,KAAd,CAHH;;AAKA,MAAMQ,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAA2C;AAC9DA,IAAAA,CAAC,CAACC,MAAF,CAASC,cAAT,IAA2BR,SAAS,CAACM,CAAC,CAACC,MAAF,CAASC,cAAV,CAApC;AACAZ,IAAAA,OAAO,IAAIA,OAAO,CAACU,CAAD,CAAlB;AACD,GAHD;;AAKA,MAAMG,QAAQ,GAAG,+BAAjB;AACA,SACE,qCAAC,oBAAD;AACE,IAAA,SAAS,EAAE,4BACT,gCAAa,OAAb,EAAsBA,QAAtB,CADS,EAET,CAAC,CAACrB,KAAF,qBAAqBA,KAArB,CAFS,yBAGOI,KAHP,EADb;AAME,IAAA,KAAK,EAAEC,KANT;AAOE,IAAA,SAAS,EAAEH,SAPb;AAQE,IAAA,UAAU,EAAEC,UARd;AASE,IAAA,MAAM,EAAEG,MATV;AAUE,IAAA,KAAK,EAAEC,KAVT;AAWE,IAAA,QAAQ,EAAEG,SAAS,CAACY;AAXtB,KAaE,yEAAWZ,SAAX;AAAsB,IAAA,IAAI,EAAEX,IAA5B;AAAkC,IAAA,OAAO,EAAEkB,YAA3C;AAAyD,IAAA,KAAK,EAAER,KAAhE;AAAuE,IAAA,SAAS,EAAC,WAAjF;AAA6F,IAAA,GAAG,EAAEI,GAAG,IAAIZ;AAAzG,KAbF,CADF;AAiBD,CA9CD;AAgDA;AACA;AACA;;;AACO,IAAMsB,KAAK,GAAG,oCAAezB,cAAf,EAA+B;AAClDM,EAAAA,KAAK,EAAE;AAD2C,CAA/B,CAAd","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport \"./Input.css\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRef<HTMLInputElement>,\n    HasRootRef<HTMLDivElement>,\n    HasAlign,\n    AdaptivityProps,\n    FormFieldProps {}\n\nconst InputComponent: React.FunctionComponent<InputProps> = ({\n  type = \"text\",\n  align,\n  getRef,\n  className,\n  getRootRef,\n  sizeY,\n  style,\n  before,\n  after,\n  onInput,\n  value,\n  ...restProps\n}: InputProps) => {\n\n  const [cursor, setCursor] = useState<number>(0);\n  const ref = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    const input = ref.current;\n    if (input) input.setSelectionRange(cursor, cursor);\n  }, [ref, cursor, value])\n\n  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n    e.target.selectionStart && setCursor(e.target.selectionStart);\n    onInput && onInput(e);\n  };\n\n  const platform = usePlatform();\n  return (\n    <FormField\n      vkuiClass={classNames(\n        getClassName(\"Input\", platform),\n        !!align && `Input--${align}`,\n        `Input--sizeY-${sizeY}`\n      )}\n      style={style}\n      className={className}\n      getRootRef={getRootRef}\n      before={before}\n      after={after}\n      disabled={restProps.disabled}\n    >\n      <input {...restProps} type={type} onInput={handleChange} value={value} vkuiClass=\"Input__el\" ref={ref || getRef} />\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Input\n */\nexport const Input = withAdaptivity(InputComponent, {\n  sizeY: true,\n});\n"],"file":"Input.js"}