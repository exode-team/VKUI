{"version":3,"sources":["../../../../src/components/Input/Input.tsx"],"names":["Input","align","getRef","className","getRootRef","sizeY","style","after","onInput","value","restProps","cursor","setCursor","ref","input","current","setSelectionRange","handleChange","e","target","selectionStart","platform","disabled","defaultProps","type"],"mappings":";;;;;;;;;;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAWA,IAAMA,KAA0C,GAAG,SAA7CA,KAA6C,OAWjC;AAAA,MAVhBC,KAUgB,QAVhBA,KAUgB;AAAA,MAThBC,MASgB,QAThBA,MASgB;AAAA,MARhBC,SAQgB,QARhBA,SAQgB;AAAA,MAPhBC,UAOgB,QAPhBA,UAOgB;AAAA,MANhBC,KAMgB,QANhBA,KAMgB;AAAA,MALhBC,KAKgB,QALhBA,KAKgB;AAAA,MAJhBC,KAIgB,QAJhBA,KAIgB;AAAA,MAHhBC,OAGgB,QAHhBA,OAGgB;AAAA,MAFhBC,KAEgB,QAFhBA,KAEgB;AAAA,MADbC,SACa;;AAEhB,kBAA4B,qBAAiB,CAAjB,CAA5B;AAAA;AAAA,MAAOC,MAAP;AAAA,MAAeC,SAAf;;AACA,MAAMC,GAAG,GAAG,mBAAyB,IAAzB,CAAZ;AAEA,wBAAU,YAAM;AACd,QAAMC,KAAK,GAAGD,GAAG,CAACE,OAAlB;AACA,QAAID,KAAJ,EAAWA,KAAK,CAACE,iBAAN,CAAwBL,MAAxB,EAAgCA,MAAhC;AACZ,GAHD,EAGG,CAACE,GAAD,EAAMF,MAAN,EAAcF,KAAd,CAHH;;AAKA,MAAMQ,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAA2C;AAC9DA,IAAAA,CAAC,CAACC,MAAF,CAASC,cAAT,IAA2BR,SAAS,CAACM,CAAC,CAACC,MAAF,CAASC,cAAV,CAApC;AACAZ,IAAAA,OAAO,IAAIA,OAAO,CAACU,CAAD,CAAlB;AACD,GAHD;;AAKA,MAAMG,QAAQ,GAAG,+BAAjB;AACA,SACE,qCAAC,oBAAD;AACE,IAAA,SAAS,EAAE,6BACT,gCAAa,OAAb,EAAsBA,QAAtB,CADS,qDAEIpB,KAFJ,GAEc,CAAC,CAACA,KAFhB,0BAGOI,KAHP,EADb;AAME,IAAA,KAAK,EAAEC,KANT;AAOE,IAAA,SAAS,EAAEH,SAPb;AAQE,IAAA,UAAU,EAAEC,UARd;AASE,IAAA,KAAK,EAAEG,KATT;AAUE,IAAA,QAAQ,EAAEG,SAAS,CAACY;AAVtB,KAYE,yEAAWZ,SAAX;AAAsB,IAAA,OAAO,EAAEO,YAA/B;AAA6C,IAAA,KAAK,EAAER,KAApD;AAA2D,IAAA,SAAS,EAAC,WAArE;AAAiF,IAAA,GAAG,EAAEI,GAAG,IAAIX;AAA7F,KAZF,CADF;AAgBD,CA3CD;;AA6CAF,KAAK,CAACuB,YAAN,GAAqB;AACnBC,EAAAA,IAAI,EAAE;AADa,CAArB,C,CAIA;;eACe,oCAAexB,KAAf,EAAsB;AACnCK,EAAAA,KAAK,EAAE;AAD4B,CAAtB,C","sourcesContent":["import * as React from \"react\";\nimport { useEffect, useRef, useState } from 'react';\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport \"./Input.css\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRef<HTMLInputElement>,\n    HasRootRef<HTMLDivElement>,\n    HasAlign,\n    AdaptivityProps,\n    FormFieldProps {}\n\nconst Input: React.FunctionComponent<InputProps> = ({\n  align,\n  getRef,\n  className,\n  getRootRef,\n  sizeY,\n  style,\n  after,\n  onInput,\n  value,\n  ...restProps\n}: InputProps) => {\n\n  const [cursor, setCursor] = useState<number>(0);\n  const ref = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    const input = ref.current;\n    if (input) input.setSelectionRange(cursor, cursor);\n  }, [ref, cursor, value])\n\n  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n    e.target.selectionStart && setCursor(e.target.selectionStart);\n    onInput && onInput(e);\n  };\n\n  const platform = usePlatform();\n  return (\n    <FormField\n      vkuiClass={classNames(\n        getClassName(\"Input\", platform),\n        { [`Input--${align}`]: !!align },\n        `Input--sizeY-${sizeY}`\n      )}\n      style={style}\n      className={className}\n      getRootRef={getRootRef}\n      after={after}\n      disabled={restProps.disabled}\n    >\n      <input {...restProps} onInput={handleChange} value={value} vkuiClass=\"Input__el\" ref={ref || getRef} />\n    </FormField>\n  );\n};\n\nInput.defaultProps = {\n  type: \"text\",\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(Input, {\n  sizeY: true,\n});\n"],"file":"Input.js"}