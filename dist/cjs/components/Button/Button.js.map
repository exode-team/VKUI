{"version":3,"file":"Button.js","names":["ButtonTypography","size","sizeY","platform","restProps","isCompact","SizeType","COMPACT","ANDROID","VKCOM","IOS","resolveButtonAppearance","appearance","mode","resolvedAppearance","resolvedMode","undefined","ButtonComponent","stretched","align","children","before","after","getRootRef","Component","loading","onClick","stopPropagation","usePlatform","hasIcons","Boolean","hasIconOnly","hasNewTokens","React","useContext","ConfigProviderContext","href","classNames","Button","withAdaptivity","displayName"],"sources":["../../../../src/components/Button/Button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { ConfigProviderContext } from \"../ConfigProvider/ConfigProviderContext\";\nimport { TappableProps, Tappable } from \"../Tappable/Tappable\";\nimport { Title } from \"../Typography/Title/Title\";\nimport { Text } from \"../Typography/Text/Text\";\nimport { Subhead } from \"../Typography/Subhead/Subhead\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport { HasAlign, HasComponent } from \"../../types\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport {\n  AdaptivityProps,\n  SizeType,\n  withAdaptivity,\n} from \"../../hoc/withAdaptivity\";\nimport { PlatformType, IOS, VKCOM, ANDROID } from \"../../lib/platform\";\nimport { Spinner } from \"../Spinner/Spinner\";\nimport { Headline } from \"../Typography/Headline/Headline\";\nimport \"./Button.css\";\n\nexport interface VKUIButtonProps extends HasAlign {\n  /**\n   Значения `commerce`, `destructive`, `overlay_...` будут упразднены в 5.0.0\n   */\n  mode?:\n    | \"primary\"\n    | \"secondary\"\n    | \"tertiary\"\n    | \"outline\"\n    | \"commerce\"\n    | \"destructive\"\n    | \"overlay_primary\"\n    | \"overlay_secondary\"\n    | \"overlay_outline\";\n  appearance?: \"accent\" | \"positive\" | \"negative\" | \"neutral\" | \"overlay\";\n  size?: \"s\" | \"m\" | \"l\";\n  stretched?: boolean;\n  before?: React.ReactNode;\n  after?: React.ReactNode;\n  loading?: boolean;\n}\n\nexport interface ButtonProps\n  extends Omit<TappableProps, \"size\">,\n    VKUIButtonProps {}\n\ninterface ButtonTypographyProps extends HasComponent {\n  size: ButtonProps[\"size\"];\n  platform: PlatformType | undefined;\n  sizeY: AdaptivityProps[\"sizeY\"];\n  children?: ButtonProps[\"children\"];\n}\n\nconst ButtonTypography = ({\n  size,\n  sizeY,\n  platform,\n  ...restProps\n}: ButtonTypographyProps) => {\n  const isCompact = sizeY === SizeType.COMPACT;\n\n  switch (size) {\n    case \"l\":\n      if (isCompact) {\n        return <Text weight=\"2\" {...restProps} />;\n      }\n      if (platform === ANDROID) {\n        return <Headline weight=\"2\" {...restProps} />;\n      }\n      return <Title level=\"3\" weight=\"2\" {...restProps} />;\n    case \"m\":\n      if (isCompact) {\n        return (\n          <Subhead weight={platform === VKCOM ? \"3\" : \"2\"} {...restProps} />\n        );\n      }\n\n      return <Text weight=\"2\" {...restProps} />;\n    case \"s\":\n    default:\n      if (platform === IOS) {\n        return <Subhead weight=\"2\" {...restProps} />;\n      }\n\n      if (platform === VKCOM) {\n        return <Caption {...restProps} />;\n      }\n\n      if (isCompact) {\n        return <Caption weight=\"2\" {...restProps} />;\n      }\n\n      return <Subhead weight=\"2\" {...restProps} />;\n  }\n};\n\ninterface ResolvedButtonAppearance {\n  resolvedAppearance: ButtonProps[\"appearance\"];\n  resolvedMode: ButtonProps[\"mode\"];\n}\n\nfunction resolveButtonAppearance(\n  appearance: ButtonProps[\"appearance\"],\n  mode: ButtonProps[\"mode\"]\n): ResolvedButtonAppearance {\n  let resolvedAppearance: ButtonProps[\"appearance\"] = appearance;\n  let resolvedMode: ButtonProps[\"mode\"] = mode;\n\n  if (appearance === undefined) {\n    switch (mode) {\n      case \"tertiary\":\n      case \"secondary\":\n      case \"primary\":\n      case \"outline\":\n        resolvedAppearance = \"accent\";\n        break;\n      case \"commerce\":\n        resolvedMode = \"primary\";\n        resolvedAppearance = \"positive\";\n        break;\n      case \"destructive\":\n        resolvedMode = \"primary\";\n        resolvedAppearance = \"negative\";\n        break;\n      case \"overlay_primary\":\n        resolvedMode = \"primary\";\n        resolvedAppearance = \"overlay\";\n        break;\n      case \"overlay_secondary\":\n        resolvedMode = \"secondary\";\n        resolvedAppearance = \"overlay\";\n        break;\n      case \"overlay_outline\":\n        resolvedMode = \"outline\";\n        resolvedAppearance = \"overlay\";\n        break;\n    }\n  }\n\n  return {\n    resolvedAppearance,\n    resolvedMode,\n  };\n}\n\nconst ButtonComponent = ({\n  size = \"s\",\n  mode = \"primary\",\n  appearance,\n  stretched = false,\n  align = \"center\",\n  children,\n  before,\n  after,\n  getRootRef,\n  sizeY,\n  Component = \"button\",\n  loading,\n  onClick,\n  stopPropagation = true,\n  ...restProps\n}: ButtonProps) => {\n  const platform = usePlatform();\n  const hasIcons = Boolean(before || after);\n  const hasIconOnly = !children && Boolean(after) !== Boolean(before);\n  const { resolvedMode, resolvedAppearance } = resolveButtonAppearance(\n    appearance,\n    mode\n  );\n  const hasNewTokens = React.useContext(ConfigProviderContext).hasNewTokens;\n\n  return (\n    <Tappable\n      hoverMode={hasNewTokens ? \"Button--hover\" : \"background\"}\n      activeMode={hasNewTokens ? \"Button--active\" : \"opacity\"}\n      {...restProps}\n      Component={restProps.href ? \"a\" : Component}\n      onClick={loading ? undefined : onClick}\n      focusVisibleMode=\"outside\"\n      stopPropagation={stopPropagation}\n      vkuiClass={classNames(\n        \"Button\",\n        `Button--sz-${size}`,\n        `Button--lvl-${resolvedMode}`,\n        `Button--clr-${resolvedAppearance}`,\n        `Button--aln-${align}`,\n        `Button--sizeY-${sizeY}`,\n        stretched && \"Button--stretched\",\n        hasIcons && \"Button--with-icon\",\n        hasIconOnly && \"Button--singleIcon\",\n        loading && \"Button--loading\"\n      )}\n      getRootRef={getRootRef}\n    >\n      {loading && <Spinner size=\"small\" vkuiClass=\"Button__spinner\" />}\n      <span vkuiClass=\"Button__in\">\n        {before && (\n          <span vkuiClass=\"Button__before\" role=\"presentation\">\n            {before}\n          </span>\n        )}\n        {children && (\n          <ButtonTypography\n            size={size}\n            sizeY={sizeY}\n            platform={platform}\n            vkuiClass=\"Button__content\"\n            Component=\"span\"\n          >\n            {children}\n          </ButtonTypography>\n        )}\n        {after && (\n          <span vkuiClass=\"Button__after\" role=\"presentation\">\n            {after}\n          </span>\n        )}\n      </span>\n    </Tappable>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Button\n */\nexport const Button = withAdaptivity(ButtonComponent, {\n  sizeY: true,\n});\n\nButton.displayName = \"Button\";\n"],"mappings":"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"}