{"version":3,"file":"PanelHeader.js","names":["PanelHeaderIn","before","after","separator","children","React","useContext","ConfigProviderContext","webviewType","ModalRootContext","isInsideModal","platform","usePlatform","VKCOM","WebviewType","INTERNAL","warn","warnOnce","PanelHeaderComponent","propsBefore","left","propsAfter","right","visor","transparent","shadow","getRef","getRootRef","sizeX","sizeY","fixed","restProps","needShadow","SizeType","REGULAR","isFixed","undefined","Platform","process","env","NODE_ENV","innerProps","classNames","getClassName","VKAPPS","PanelHeader","withAdaptivity","displayName"],"sources":["../../../../src/components/PanelHeader/PanelHeader.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { FixedLayout } from \"../FixedLayout/FixedLayout\";\nimport { Separator } from \"../Separator/Separator\";\nimport { Platform, VKCOM } from \"../../lib/platform\";\nimport { HasRef, HasRootRef } from \"../../types\";\nimport {\n  ConfigProviderContext,\n  WebviewType,\n} from \"../ConfigProvider/ConfigProviderContext\";\nimport {\n  AdaptivityProps,\n  SizeType,\n  withAdaptivity,\n} from \"../../hoc/withAdaptivity\";\nimport { Text } from \"../Typography/Text/Text\";\nimport { TooltipContainer } from \"../Tooltip/TooltipContainer\";\nimport { ModalRootContext } from \"../ModalRoot/ModalRootContext\";\nimport { Spacing } from \"../Spacing/Spacing\";\nimport \"./PanelHeader.css\";\n\nexport interface PanelHeaderProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    HasRef<HTMLDivElement>,\n    HasRootRef<HTMLDivElement>,\n    AdaptivityProps {\n  before?: React.ReactNode;\n  /**\n   * @deprecated Будет удалено в 5.0.0. Используйте `before`\n   */\n  left?: React.ReactNode;\n  after?: React.ReactNode;\n  /**\n   * @deprecated Будет удалено в 5.0.0. Используйте `after`\n   */\n  right?: React.ReactNode;\n  separator?: boolean;\n  transparent?: boolean;\n  shadow?: boolean;\n  /**\n   * Если `false`, то шапка будет нулевой высоты и контент панели \"залезет\" под неё\n   */\n  visor?: boolean;\n  /**\n   * Если `false`, то шапка будет в потоке. По умолчанию `true`, но если платформа vkcom, то по умолчанию `false`.\n   */\n  fixed?: boolean;\n}\n\nconst PanelHeaderIn = ({\n  before,\n  after,\n  separator,\n  children,\n}: PanelHeaderProps) => {\n  const { webviewType } = React.useContext(ConfigProviderContext);\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const platform = usePlatform();\n\n  return (\n    <React.Fragment>\n      <TooltipContainer fixed vkuiClass=\"PanelHeader__in\">\n        <div vkuiClass=\"PanelHeader__before\">{before}</div>\n        <div vkuiClass=\"PanelHeader__content\">\n          {platform === VKCOM ? (\n            <Text weight=\"2\">{children}</Text>\n          ) : (\n            <span vkuiClass=\"PanelHeader__content-in\">{children}</span>\n          )}\n        </div>\n        <div vkuiClass=\"PanelHeader__after\">\n          {(webviewType === WebviewType.INTERNAL || isInsideModal) && after}\n        </div>\n      </TooltipContainer>\n      {separator && platform === VKCOM && <Separator wide />}\n    </React.Fragment>\n  );\n};\n\nconst warn = warnOnce(\"PanelHeader\");\nconst PanelHeaderComponent = ({\n  // TODO: поправить перед 5.0.0\n  before: propsBefore,\n  left,\n  after: propsAfter,\n  right,\n  // /end TODO\n  children,\n  separator = true,\n  visor = true,\n  transparent = false,\n  shadow,\n  getRef,\n  getRootRef,\n  sizeX,\n  sizeY,\n  fixed,\n  ...restProps\n}: PanelHeaderProps) => {\n  const platform = usePlatform();\n  const { webviewType } = React.useContext(ConfigProviderContext);\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const needShadow = shadow && sizeX === SizeType.REGULAR;\n  let isFixed = fixed !== undefined ? fixed : platform !== Platform.VKCOM;\n\n  // TODO: удалить перед 5.0.0\n  const before = propsBefore ?? left;\n  const after = propsAfter ?? right;\n\n  if (process.env.NODE_ENV === \"development\") {\n    right &&\n      warn(\n        \"Свойство right устарелo и будет удалено в 5.0.0. Используйте after.\"\n      );\n    left &&\n      warn(\n        \"Свойство left устарелo и будет удалено в 5.0.0. Используйте before.\"\n      );\n  }\n  // /end TODO\n\n  const innerProps = { before, after, separator, children };\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(\n        getClassName(\"PanelHeader\", platform),\n        transparent && \"PanelHeader--trnsp\",\n        needShadow && \"PanelHeader--shadow\",\n        visor && \"PanelHeader--vis\",\n        separator && visor && \"PanelHeader--sep\",\n        webviewType === WebviewType.VKAPPS &&\n          !isInsideModal &&\n          \"PanelHeader--vkapps\",\n        !before && \"PanelHeader--no-before\",\n        !after && \"PanelHeader--no-after\",\n        isFixed && \"PanelHeader--fixed\",\n        // TODO v5.0.0 поправить под новую адаптивность\n        `PanelHeader--sizeX-${sizeX}`\n      )}\n      ref={isFixed ? getRootRef : getRef}\n    >\n      {isFixed ? (\n        <FixedLayout\n          vkuiClass=\"PanelHeader__fixed\"\n          vertical=\"top\"\n          getRootRef={getRef}\n        >\n          <PanelHeaderIn {...innerProps} />\n        </FixedLayout>\n      ) : (\n        <PanelHeaderIn {...innerProps} />\n      )}\n      {separator &&\n        visor &&\n        platform !== VKCOM &&\n        (sizeX === SizeType.REGULAR ? <Spacing size={16} /> : <Separator />)}\n    </div>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeader\n */\nexport const PanelHeader = withAdaptivity(PanelHeaderComponent, {\n  sizeX: true,\n  sizeY: true,\n});\n\nPanelHeader.displayName = \"PanelHeader\";\n"],"mappings":"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"}