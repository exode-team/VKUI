{"version":3,"sources":["../../../../src/components/AppearanceProvider/AppearanceProvider.tsx"],"names":["generateVKUITokensClassName","platform","appearance","tokensPlatform","Platform","ANDROID","IOS","VKCOM","AppearanceProvider","children","appearanceContext","React","useMemo","scheme","Children","map","child","isValidElement","cloneElement","className","props"],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAMO,IAAMA,2BAA2B,GAAG,SAA9BA,2BAA8B,CACzCC,QADyC,EAEzCC,UAFyC,EAG9B;AACX,MAAIC,cAAJ;;AACA,UAAQF,QAAR;AACE,SAAKG,mBAASC,OAAd;AACEF,MAAAA,cAAc,GAAG,QAAjB;AACA;;AACF,SAAKC,mBAASE,GAAd;AACEH,MAAAA,cAAc,GAAG,OAAjB;AACA;;AACF,SAAKC,mBAASG,KAAd;AACEJ,MAAAA,cAAc,GAAG,OAAjB;AACA;;AACF;AACEA,MAAAA,cAAc,GAAGF,QAAjB;AAXJ;;AAcA,yBAAgBE,cAAhB,eAAmCD,UAAnC;AACD,CApBM;;;;AAsBA,IAAMM,kBAAqD,GAAG,SAAxDA,kBAAwD,OAG/D;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,6BADJP,UACI;AAAA,MADJA,UACI,gCADS,OACT;AACJ,MAAMD,QAAQ,GAAG,+BAAjB;AAEA,MAAMS,iBAAiB,GAAGC,KAAK,CAACC,OAAN,CACxB;AAAA,WAAO;AACLC,MAAAA,MAAM,EAAE,0BAAU;AAChBZ,QAAAA,QAAQ,EAARA,QADgB;AAEhBC,QAAAA,UAAU,EAAVA;AAFgB,OAAV,CADH;AAKLA,MAAAA,UAAU,EAAVA;AALK,KAAP;AAAA,GADwB,EAQxB,CAACA,UAAD,EAAaD,QAAb,CARwB,CAA1B;AAWA,SACE,qCAAC,oDAAD,CAA2B,QAA3B;AAAoC,IAAA,KAAK,EAAES;AAA3C,KACGC,KAAK,CAACG,QAAN,CAAeC,GAAf,CAAmBN,QAAnB,EAA6B,UAACO,KAAD,EAAW;AACvC,sBAAIL,KAAK,CAACM,cAAN,CAAqBD,KAArB,CAAJ,EAAiC;AAC/B,0BAAOL,KAAK,CAACO,YAAN,CAAmBF,KAAnB,EAA0B;AAC/BG,QAAAA,SAAS,EAAE,kCACTH,KAAK,CAACI,KAAN,CAAYD,SADH,gBAEFT,iBAAiB,CAACG,MAFhB,GAGTb,2BAA2B,CAACC,QAAD,EAAWC,UAAX,CAHlB;AADoB,OAA1B,CAAP;AAOD;;AACD,WAAOc,KAAP;AACD,GAXA,CADH,CADF;AAgBD,CAjCM","sourcesContent":["import * as React from \"react\";\nimport { AppearanceType } from \"@vkontakte/vk-bridge\";\nimport { AppearanceProviderContext } from \"./AppearanceProviderContext\";\nimport { getScheme } from \"../../helpers/getScheme\";\nimport { classNamesString } from \"../../lib/classNames\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { Platform } from \"../../lib/platform\";\n\nexport interface AppearanceProviderProps {\n  appearance?: AppearanceType;\n}\n\nexport const generateVKUITokensClassName = (\n  platform: string,\n  appearance: string\n): string => {\n  let tokensPlatform;\n  switch (platform) {\n    case Platform.ANDROID:\n      tokensPlatform = \"vkBase\";\n      break;\n    case Platform.IOS:\n      tokensPlatform = \"vkIOS\";\n      break;\n    case Platform.VKCOM:\n      tokensPlatform = \"vkCom\";\n      break;\n    default:\n      tokensPlatform = platform;\n  }\n\n  return `vkui--${tokensPlatform}--${appearance}`;\n};\n\nexport const AppearanceProvider: React.FC<AppearanceProviderProps> = ({\n  children,\n  appearance = \"light\",\n}) => {\n  const platform = usePlatform();\n\n  const appearanceContext = React.useMemo(\n    () => ({\n      scheme: getScheme({\n        platform,\n        appearance,\n      }),\n      appearance,\n    }),\n    [appearance, platform]\n  );\n\n  return (\n    <AppearanceProviderContext.Provider value={appearanceContext}>\n      {React.Children.map(children, (child) => {\n        if (React.isValidElement(child)) {\n          return React.cloneElement(child, {\n            className: classNamesString(\n              child.props.className,\n              `vkui${appearanceContext.scheme}`,\n              generateVKUITokensClassName(platform, appearance)\n            ),\n          });\n        }\n        return child;\n      })}\n    </AppearanceProviderContext.Provider>\n  );\n};\n"],"file":"AppearanceProvider.js"}