{"version":3,"sources":["../../../../src/components/CustomSelectDropdown/CustomSelectDropdown.tsx"],"names":["calcIsTop","placement","includes","CustomSelectDropdown","children","targetRef","scrollBoxRef","fetching","parentOnPlacementChange","onPlacementChange","restProps","React","useState","isTop","setIsTop","useCallback"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAcA,IAAMA,SAAS,GAAG,SAAZA,SAAY,CAACC,SAAD;AAAA,SAA2BA,SAA3B,aAA2BA,SAA3B,uBAA2BA,SAAS,CAAEC,QAAX,CAAoB,KAApB,CAA3B;AAAA,CAAlB;;AAEO,IAAMC,oBAAyD,GAAG,SAA5DA,oBAA4D,OAQnE;AAAA,MAPJC,QAOI,QAPJA,QAOI;AAAA,MANJC,SAMI,QANJA,SAMI;AAAA,MALJC,YAKI,QALJA,YAKI;AAAA,MAJJL,SAII,QAJJA,SAII;AAAA,MAHJM,QAGI,QAHJA,QAGI;AAAA,MAFeC,uBAEf,QAFJC,iBAEI;AAAA,MADDC,SACC;;AACJ,wBAA0BC,KAAK,CAACC,QAAN,CAAe;AAAA,WAAMZ,SAAS,CAACC,SAAD,CAAf;AAAA,GAAf,CAA1B;AAAA;AAAA,MAAOY,KAAP;AAAA,MAAcC,QAAd;;AAEA,MAAML,iBAAiB,GAAGE,KAAK,CAACI,WAAN,CACxB,iBAA8C;AAAA,QAA3Cd,SAA2C,SAA3CA,SAA2C;AAC5Ca,IAAAA,QAAQ,CAACd,SAAS,CAACC,SAAD,CAAV,CAAR;AACAO,IAAAA,uBAAuB,SAAvB,IAAAA,uBAAuB,WAAvB,YAAAA,uBAAuB,CAAGP,SAAH,CAAvB;AACD,GAJuB,EAKxB,CAACO,uBAAD,EAA0BM,QAA1B,CALwB,CAA1B;AAQA,SACE,qCAAC,cAAD;AACE,IAAA,SAAS,EAAET,SADb;AAEE,IAAA,cAAc,EAAE,CAFlB;AAGE,IAAA,SAAS,MAHX;AAIE,IAAA,iBAAiB,EAAEI,iBAJrB;AAKE,IAAA,SAAS,EAAER,SALb;AAME,IAAA,SAAS,EAAE,4BAAW,+BAAX,EAA4C;AACrD,0DAAoDY;AADC,KAA5C;AANb,KASMH,SATN,GAWE,qCAAC,yBAAD;AACE,IAAA,MAAM,EAAEJ,YADV;AAEE,IAAA,SAAS,EAAC;AAFZ,KAIGC,QAAQ,GACP;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,qCAAC,gBAAD;AAAS,IAAA,IAAI,EAAC;AAAd,IADF,CADO,GAKPH,QATJ,CAXF,CADF;AA0BD,CA7CM","sourcesContent":["import * as React from \"react\";\nimport CustomScrollView from \"../CustomScrollView/CustomScrollView\";\nimport { classNames } from \"../../lib/classNames\";\nimport { Popper, Placement } from \"../Popper/Popper\";\nimport Spinner from \"../Spinner/Spinner\";\nimport { HasRef } from \"../../types\";\nimport \"./CustomSelectDropdown.css\";\n\nexport interface CustomSelectDropdownProps\n  extends React.HTMLAttributes<HTMLElement>,\n    HasRef<HTMLDivElement> {\n  targetRef: React.RefObject<HTMLElement>;\n  placement?: Placement;\n  scrollBoxRef: React.Ref<HTMLDivElement>;\n  fetching?: boolean;\n  onPlacementChange?: (placement?: Placement) => void;\n}\n\nconst calcIsTop = (placement?: Placement) => placement?.includes(\"top\");\n\nexport const CustomSelectDropdown: React.FC<CustomSelectDropdownProps> = ({\n  children,\n  targetRef,\n  scrollBoxRef,\n  placement,\n  fetching,\n  onPlacementChange: parentOnPlacementChange,\n  ...restProps\n}) => {\n  const [isTop, setIsTop] = React.useState(() => calcIsTop(placement));\n\n  const onPlacementChange = React.useCallback(\n    ({ placement }: { placement?: Placement }) => {\n      setIsTop(calcIsTop(placement));\n      parentOnPlacementChange?.(placement);\n    },\n    [parentOnPlacementChange, setIsTop]\n  );\n\n  return (\n    <Popper\n      targetRef={targetRef}\n      offsetDistance={0}\n      sameWidth\n      onPlacementChange={onPlacementChange}\n      placement={placement}\n      vkuiClass={classNames(\"CustomSelectDropdown__options\", {\n        \"CustomSelectDropdown__options--popupDirectionTop\": isTop,\n      })}\n      {...restProps}\n    >\n      <CustomScrollView\n        boxRef={scrollBoxRef}\n        vkuiClass=\"CustomSelectDropdown__CustomScrollView\"\n      >\n        {fetching ? (\n          <div vkuiClass=\"CustomSelectDropdown__fetching\">\n            <Spinner size=\"small\" />\n          </div>\n        ) : (\n          children\n        )}\n      </CustomScrollView>\n    </Popper>\n  );\n};\n"],"file":"CustomSelectDropdown.js"}