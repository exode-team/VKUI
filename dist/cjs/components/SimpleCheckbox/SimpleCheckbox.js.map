{"version":3,"file":"SimpleCheckbox.js","names":["warn","warnOnce","IS_DEV","process","env","NODE_ENV","SimpleCheckbox","className","style","getRootRef","getRef","indeterminate","defaultIndeterminate","onChange","restProps","useAdaptivity","sizeY","platform","usePlatform","inputRef","useExternRef","React","useEffect","indeterminateValue","undefined","current","Boolean","handleChange","useCallback","event","checked","defaultChecked","classNames","getClassName","disabled","VKCOM","IOS","ACTIVE_EFFECT_DELAY","SizeType","COMPACT"],"sources":["../../../../src/components/SimpleCheckbox/SimpleCheckbox.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { ACTIVE_EFFECT_DELAY, Tappable } from \"../Tappable/Tappable\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS, VKCOM } from \"../../lib/platform\";\n\nimport {\n  Icon20CheckBoxOn,\n  Icon20CheckBoxOff,\n  Icon24CheckBoxOn,\n  Icon24CheckBoxOff,\n  Icon20CheckBoxIndetermanate,\n} from \"@vkontakte/icons\";\n\nimport { HasRef, HasRootRef } from \"../../types\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useAdaptivity } from \"../../hooks/useAdaptivity\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { SizeType } from \"../../hoc/withAdaptivity\";\nimport { warnOnce } from \"../../lib/warnOnce\";\n\nimport \"./SimpleCheckbox.css\";\n\nconst warn = warnOnce(\"SimpleCheckbox\");\nconst IS_DEV = process.env.NODE_ENV === \"development\";\n\nexport interface SimpleCheckboxProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasRef<HTMLInputElement> {\n  indeterminate?: boolean;\n  defaultIndeterminate?: boolean;\n}\n\n/**\n * @deprecated Этот компонент устарел и будет удален в 5.0.0. Используйте [`Checkbox`](https://vkcom.github.io/VKUI/#/Checkbox).\n * @see https://vkcom.github.io/VKUI/#/SimpleCheckbox\n */\nexport const SimpleCheckbox = ({\n  className,\n  style,\n  getRootRef,\n  getRef,\n  indeterminate,\n  defaultIndeterminate,\n  onChange,\n  ...restProps\n}: SimpleCheckboxProps) => {\n  const { sizeY } = useAdaptivity();\n  const platform = usePlatform();\n  const inputRef = useExternRef(getRef);\n\n  React.useEffect(() => {\n    const indeterminateValue =\n      indeterminate === undefined ? defaultIndeterminate : indeterminate;\n\n    if (inputRef.current) {\n      inputRef.current.indeterminate = Boolean(indeterminateValue);\n    }\n  }, [defaultIndeterminate, indeterminate, inputRef]);\n\n  const handleChange: SimpleCheckboxProps[\"onChange\"] = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (\n        defaultIndeterminate !== undefined &&\n        indeterminate === undefined &&\n        restProps.checked === undefined &&\n        inputRef.current\n      ) {\n        inputRef.current.indeterminate = false;\n      }\n      if (indeterminate !== undefined && inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n      onChange && onChange(event);\n    },\n    [defaultIndeterminate, indeterminate, restProps.checked, onChange, inputRef]\n  );\n\n  if (IS_DEV) {\n    if (defaultIndeterminate && restProps.defaultChecked) {\n      warn(\n        \"defaultIndeterminate и defaultChecked не могут быть true одновременно\",\n        \"error\"\n      );\n    }\n\n    if (indeterminate && restProps.checked) {\n      warn(\"indeterminate и checked не могут быть true одновременно\", \"error\");\n    }\n\n    if (restProps.defaultChecked && restProps.checked) {\n      warn(\"defaultChecked и checked не могут быть true одновременно\", \"error\");\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"label\"\n      vkuiClass={classNames(\n        getClassName(\"SimpleCheckbox\", platform),\n        `SimpleCheckbox--sizeY-${sizeY}`\n      )}\n      className={className}\n      style={style}\n      disabled={restProps.disabled}\n      activeMode={platform === VKCOM ? \"SimpleCheckbox--active\" : \"background\"}\n      hoverMode={platform === VKCOM ? \"SimpleCheckbox--hover\" : \"background\"}\n      activeEffectDelay={platform === IOS ? 100 : ACTIVE_EFFECT_DELAY}\n      getRootRef={getRootRef}\n    >\n      <input\n        {...restProps}\n        onChange={handleChange}\n        type=\"checkbox\"\n        vkuiClass=\"SimpleCheckbox__input\"\n        ref={inputRef}\n      />\n      <div vkuiClass=\"SimpleCheckbox__container\">\n        <div vkuiClass=\"SimpleCheckbox__icon SimpleCheckbox__icon--on\">\n          {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n            <Icon20CheckBoxOn />\n          ) : (\n            <Icon24CheckBoxOn />\n          )}\n        </div>\n        <div vkuiClass=\"SimpleCheckbox__icon SimpleCheckbox__icon--off\">\n          {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n            <Icon20CheckBoxOff />\n          ) : (\n            <Icon24CheckBoxOff />\n          )}\n        </div>\n        <div vkuiClass=\"SimpleCheckbox__icon SimpleCheckbox__icon--indeterminate\">\n          <Icon20CheckBoxIndetermanate\n            width={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n            height={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n          />\n        </div>\n      </div>\n      {platform === VKCOM && (\n        <div aria-hidden={true} vkuiClass=\"SimpleCheckbox__activeShadow\" />\n      )}\n      {platform === VKCOM && (\n        <div aria-hidden={true} vkuiClass=\"SimpleCheckbox__hoverShadow\" />\n      )}\n    </Tappable>\n  );\n};\n"],"mappings":"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"}