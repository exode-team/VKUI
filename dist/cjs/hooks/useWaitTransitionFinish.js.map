{"version":3,"sources":["../../../src/hooks/useWaitTransitionFinish.ts"],"names":["useWaitTransitionFinish","timeoutRef","React","useRef","document","waitTransitionFinish","useCallback","element","eventHandler","durationFallback","hidden","transitionEvent","supported","name","removeEventListener","addEventListener","current","clearTimeout","setTimeout"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEO,IAAMA,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAC3C,MAAMC,UAAU,GAAGC,KAAK,CAACC,MAAN,CAAmD,IAAnD,CAAnB;;AACA,gBAAqB,kBAArB;AAAA,MAAQC,QAAR,WAAQA,QAAR;;AAEA,MAAMC,oBAAoB,GAAGH,KAAK,CAACI,WAAN,CAC3B,UACEC,OADF,EAEEC,YAFF,EAGEC,gBAHF,EAIK;AACH,QAAIF,OAAJ,EAAa;AACX,UACE,EAACH,QAAD,aAACA,QAAD,eAACA,QAAQ,CAAEM,MAAX,KACAC,+BAAgBC,SADhB,IAEAD,+BAAgBE,IAHlB,EAIE;AACAN,QAAAA,OAAO,CAACO,mBAAR,CAA4BH,+BAAgBE,IAA5C,EAAkDL,YAAlD;AACAD,QAAAA,OAAO,CAACQ,gBAAR,CAAyBJ,+BAAgBE,IAAzC,EAA+CL,YAA/C;AACD,OAPD,MAOO;AACL,YAAIP,UAAJ,aAAIA,UAAJ,eAAIA,UAAU,CAAEe,OAAhB,EAAyB;AACvBC,UAAAA,YAAY,CAAChB,UAAU,CAACe,OAAZ,CAAZ;AACD;;AACDf,QAAAA,UAAU,CAACe,OAAX,GAAqBE,UAAU,CAACV,YAAD,EAAeC,gBAAf,CAA/B;AACD;AACF;AACF,GArB0B,EAsB3B,CAACL,QAAD,EAAWH,UAAX,CAtB2B,CAA7B;AAyBA,SAAO;AACLI,IAAAA,oBAAoB,EAApBA;AADK,GAAP;AAGD,CAhCM","sourcesContent":["import * as React from \"react\";\nimport { useDOM } from \"../lib/dom\";\nimport { transitionEvent } from \"../lib/supportEvents\";\n\nexport const useWaitTransitionFinish = () => {\n  const timeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n  const { document } = useDOM();\n\n  const waitTransitionFinish = React.useCallback(\n    (\n      element: HTMLElement | null,\n      eventHandler: VoidFunction,\n      durationFallback: number\n    ) => {\n      if (element) {\n        if (\n          !document?.hidden &&\n          transitionEvent.supported &&\n          transitionEvent.name\n        ) {\n          element.removeEventListener(transitionEvent.name, eventHandler);\n          element.addEventListener(transitionEvent.name, eventHandler);\n        } else {\n          if (timeoutRef?.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(eventHandler, durationFallback);\n        }\n      }\n    },\n    [document, timeoutRef]\n  );\n\n  return {\n    waitTransitionFinish,\n  };\n};\n"],"file":"useWaitTransitionFinish.js"}