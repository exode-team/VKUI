{"version":3,"file":"scheme.js","names":["Scheme","Appearance","warn","warnOnce","normalizeScheme","platform","scheme","appearance","undefined","getScheme","VKCOM","process","env","NODE_ENV","VKCOM_LIGHT","BRIGHT_LIGHT","SPACE_GRAY","VKCOM_DARK","DEPRECATED_CLIENT_LIGHT","DEPRECATED_CLIENT_DARK"],"sources":["../../../src/helpers/scheme.ts"],"sourcesContent":["import { AppearanceSchemeType, AppearanceType } from \"@vkontakte/vk-bridge\";\nimport { PlatformType, VKCOM } from \"../lib/platform\";\nimport { warnOnce } from \"../lib/warnOnce\";\nimport { getScheme } from \"./getScheme\";\n\nexport enum Scheme {\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости со старыми версиями клиентов\n   */\n  DEPRECATED_CLIENT_LIGHT = \"client_light\",\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости со старыми версиями клиентов\n   */\n  DEPRECATED_CLIENT_DARK = \"client_dark\",\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости с vkcom, когда там была только одна схема\n   */\n  VKCOM = \"vkcom\",\n\n  BRIGHT_LIGHT = \"bright_light\",\n  SPACE_GRAY = \"space_gray\",\n  VKCOM_LIGHT = \"vkcom_light\",\n  VKCOM_DARK = \"vkcom_dark\",\n}\n\nexport type AppearanceScheme =\n  | AppearanceSchemeType\n  | Scheme.DEPRECATED_CLIENT_LIGHT\n  | Scheme.DEPRECATED_CLIENT_DARK\n  | Scheme.VKCOM\n  | Scheme.VKCOM_DARK\n  | Scheme.VKCOM_LIGHT\n  | \"inherit\";\n\nexport enum Appearance {\n  DARK = \"dark\",\n  LIGHT = \"light\",\n}\n\nconst warn = warnOnce(\"scheme\");\n\nexport interface NormalizeSchemeProps {\n  platform: PlatformType;\n  scheme?: AppearanceScheme;\n  appearance?: AppearanceType;\n}\n\nexport function normalizeScheme({\n  platform,\n  scheme,\n  appearance,\n}: NormalizeSchemeProps): Scheme | \"inherit\" {\n  if (scheme === \"inherit\") {\n    return scheme;\n  }\n\n  if (appearance || scheme === undefined) {\n    return getScheme({ platform, appearance });\n  }\n\n  if (scheme === Scheme.VKCOM) {\n    process.env.NODE_ENV === \"development\" &&\n      warn(\n        `Схема \"${Scheme.VKCOM}\" устарела и будет удалена в v5.0.0. Вместо неё используйте \"${Scheme.VKCOM_LIGHT}\"`\n      );\n    return Scheme.VKCOM_LIGHT;\n  }\n  if (\n    platform === VKCOM &&\n    (scheme === Scheme.BRIGHT_LIGHT || scheme === Scheme.SPACE_GRAY)\n  ) {\n    process.env.NODE_ENV === \"development\" &&\n      warn(\n        `Платформа \"vkcom\" и схема \"${scheme}\" несовместимы. С этой платформой можно использовать схемы \"${Scheme.VKCOM_LIGHT}\" или \"${Scheme.VKCOM_DARK}\"`,\n        \"error\"\n      );\n    return Scheme.VKCOM_LIGHT;\n  }\n  switch (scheme) {\n    case Scheme.DEPRECATED_CLIENT_LIGHT:\n      return Scheme.BRIGHT_LIGHT;\n    case Scheme.DEPRECATED_CLIENT_DARK:\n      return Scheme.SPACE_GRAY;\n    default:\n      return scheme as Scheme;\n  }\n}\n"],"mappings":";;;;;;;AACA;AACA;AACA;AAAwC,IAE5BA,MAAM;AAAA;AAAA,WAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;AAAA,GAANA,MAAM,sBAANA,MAAM;AAAA,IAgCNC,UAAU;AAAA;AAAA,WAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;AAAA,GAAVA,UAAU,0BAAVA,UAAU;AAKtB,IAAMC,IAAI,GAAG,IAAAC,kBAAQ,EAAC,QAAQ,CAAC;AAQxB,SAASC,eAAe,OAIc;EAAA,IAH3CC,QAAQ,QAARA,QAAQ;IACRC,MAAM,QAANA,MAAM;IACNC,UAAU,QAAVA,UAAU;EAEV,IAAID,MAAM,KAAK,SAAS,EAAE;IACxB,OAAOA,MAAM;EACf;EAEA,IAAIC,UAAU,IAAID,MAAM,KAAKE,SAAS,EAAE;IACtC,OAAO,IAAAC,oBAAS,EAAC;MAAEJ,QAAQ,EAARA,QAAQ;MAAEE,UAAU,EAAVA;IAAW,CAAC,CAAC;EAC5C;EAEA,IAAID,MAAM,KAAKN,MAAM,CAACU,KAAK,EAAE;IAC3BC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IACpCX,IAAI,4CACQF,MAAM,CAACU,KAAK,8RAAgEV,MAAM,CAACc,WAAW,QACzG;IACH,OAAOd,MAAM,CAACc,WAAW;EAC3B;EACA,IACET,QAAQ,KAAKK,eAAK,KACjBJ,MAAM,KAAKN,MAAM,CAACe,YAAY,IAAIT,MAAM,KAAKN,MAAM,CAACgB,UAAU,CAAC,EAChE;IACAL,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IACpCX,IAAI,oHAC4BI,MAAM,gUAA+DN,MAAM,CAACc,WAAW,qCAAUd,MAAM,CAACiB,UAAU,SAChJ,OAAO,CACR;IACH,OAAOjB,MAAM,CAACc,WAAW;EAC3B;EACA,QAAQR,MAAM;IACZ,KAAKN,MAAM,CAACkB,uBAAuB;MACjC,OAAOlB,MAAM,CAACe,YAAY;IAC5B,KAAKf,MAAM,CAACmB,sBAAsB;MAChC,OAAOnB,MAAM,CAACgB,UAAU;IAC1B;MACE,OAAOV,MAAM;EAAW;AAE9B"}