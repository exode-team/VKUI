{"version":3,"sources":["../../../src/helpers/scheme.ts"],"names":["Scheme","Appearance","warn","normalizeScheme","platform","scheme","appearance","undefined","VKCOM","process","env","NODE_ENV","VKCOM_LIGHT","BRIGHT_LIGHT","SPACE_GRAY","VKCOM_DARK","DEPRECATED_CLIENT_LIGHT","DEPRECATED_CLIENT_DARK"],"mappings":";;;;;;;;AACA;;AACA;;AACA;;IAEYA,M;;;WAAAA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;AAAAA,EAAAA,M;GAAAA,M,sBAAAA,M;;IA8BAC,U;;;WAAAA,U;AAAAA,EAAAA,U;AAAAA,EAAAA,U;GAAAA,U,0BAAAA,U;;AAKZ,IAAMC,IAAI,GAAG,wBAAS,QAAT,CAAb;;AAQO,SAASC,eAAT,OAIsC;AAAA,MAH3CC,QAG2C,QAH3CA,QAG2C;AAAA,MAF3CC,MAE2C,QAF3CA,MAE2C;AAAA,MAD3CC,UAC2C,QAD3CA,UAC2C;;AAC3C,MAAID,MAAM,KAAK,SAAf,EAA0B;AACxB,WAAOA,MAAP;AACD;;AAED,MAAIC,UAAU,IAAID,MAAM,KAAKE,SAA7B,EAAwC;AACtC,WAAO,0BAAU;AAAEH,MAAAA,QAAQ,EAARA,QAAF;AAAYE,MAAAA,UAAU,EAAVA;AAAZ,KAAV,CAAP;AACD;;AAED,MAAID,MAAM,KAAKL,MAAM,CAACQ,KAAtB,EAA6B;AAC3BC,IAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IACET,IAAI,4CACQF,MAAM,CAACQ,KADf,8RACoFR,MAAM,CAACY,WAD3F,QADN;AAIA,WAAOZ,MAAM,CAACY,WAAd;AACD;;AACD,MACER,QAAQ,KAAKI,eAAb,KACCH,MAAM,KAAKL,MAAM,CAACa,YAAlB,IAAkCR,MAAM,KAAKL,MAAM,CAACc,UADrD,CADF,EAGE;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IACET,IAAI,oHAC4BG,MAD5B,gUACiGL,MAAM,CAACY,WADxG,qCAC6HZ,MAAM,CAACe,UADpI,SAEF,OAFE,CADN;AAKA,WAAOf,MAAM,CAACY,WAAd;AACD;;AACD,UAAQP,MAAR;AACE,SAAKL,MAAM,CAACgB,uBAAZ;AACE,aAAOhB,MAAM,CAACa,YAAd;;AACF,SAAKb,MAAM,CAACiB,sBAAZ;AACE,aAAOjB,MAAM,CAACc,UAAd;;AACF;AACE,aAAOT,MAAP;AANJ;AAQD","sourcesContent":["import { AppearanceSchemeType, AppearanceType } from \"@vkontakte/vk-bridge\";\nimport { PlatformType, VKCOM } from \"../lib/platform\";\nimport { warnOnce } from \"../lib/warnOnce\";\nimport { getScheme } from \"./getScheme\";\n\nexport enum Scheme {\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости со старыми версиями клиентов\n   */\n  DEPRECATED_CLIENT_LIGHT = \"client_light\",\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости со старыми версиями клиентов\n   */\n  DEPRECATED_CLIENT_DARK = \"client_dark\",\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости с vkcom, когда там была только одна схема\n   */\n  VKCOM = \"vkcom\",\n\n  BRIGHT_LIGHT = \"bright_light\",\n  SPACE_GRAY = \"space_gray\",\n  VKCOM_LIGHT = \"vkcom_light\",\n  VKCOM_DARK = \"vkcom_dark\",\n}\n\nexport type AppearanceScheme =\n  | AppearanceSchemeType\n  | Scheme.VKCOM\n  | Scheme.VKCOM_DARK\n  | Scheme.VKCOM_LIGHT\n  | \"inherit\";\n\nexport enum Appearance {\n  DARK = \"dark\",\n  LIGHT = \"light\",\n}\n\nconst warn = warnOnce(\"scheme\");\n\nexport interface NormalizeSchemeProps {\n  platform: PlatformType;\n  scheme?: AppearanceScheme;\n  appearance?: AppearanceType;\n}\n\nexport function normalizeScheme({\n  platform,\n  scheme,\n  appearance,\n}: NormalizeSchemeProps): Scheme | \"inherit\" {\n  if (scheme === \"inherit\") {\n    return scheme;\n  }\n\n  if (appearance || scheme === undefined) {\n    return getScheme({ platform, appearance });\n  }\n\n  if (scheme === Scheme.VKCOM) {\n    process.env.NODE_ENV === \"development\" &&\n      warn(\n        `Схема \"${Scheme.VKCOM}\" устарела и будет удалена в v5.0.0. Вместо неё используйте \"${Scheme.VKCOM_LIGHT}\"`\n      );\n    return Scheme.VKCOM_LIGHT;\n  }\n  if (\n    platform === VKCOM &&\n    (scheme === Scheme.BRIGHT_LIGHT || scheme === Scheme.SPACE_GRAY)\n  ) {\n    process.env.NODE_ENV === \"development\" &&\n      warn(\n        `Платформа \"vkcom\" и схема \"${scheme}\" несовместимы. С этой платформой можно использовать схемы \"${Scheme.VKCOM_LIGHT}\" или \"${Scheme.VKCOM_DARK}\"`,\n        \"error\"\n      );\n    return Scheme.VKCOM_LIGHT;\n  }\n  switch (scheme) {\n    case Scheme.DEPRECATED_CLIENT_LIGHT:\n      return Scheme.BRIGHT_LIGHT;\n    case Scheme.DEPRECATED_CLIENT_DARK:\n      return Scheme.SPACE_GRAY;\n    default:\n      return scheme as Scheme;\n  }\n}\n"],"file":"scheme.js"}