{"version":3,"file":"PanelHeaderButton.js","names":["Tappable","getClassName","classNames","warnOnce","usePlatform","getTitleFromChildren","isPrimitiveReactNode","IOS","VKCOM","ANDROID","Text","Title","ButtonTypography","primary","children","platform","undefined","warn","PanelHeaderButton","label","restProps","isPrimitive","isPrimitiveLabel","hoverMode","activeMode","process","env","NODE_ENV","hasAccessibleName","Boolean","href"],"sources":["../../../src/components/PanelHeaderButton/PanelHeaderButton.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { TappableProps, Tappable } from \"../Tappable/Tappable\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { getTitleFromChildren, isPrimitiveReactNode } from \"../../lib/utils\";\nimport { IOS, VKCOM, ANDROID } from \"../../lib/platform\";\nimport { Text } from \"../Typography/Text/Text\";\nimport { Title } from \"../Typography/Title/Title\";\nimport \"./PanelHeaderButton.css\";\n\nexport interface PanelHeaderButtonProps extends Omit<TappableProps, \"label\"> {\n  primary?: boolean;\n  label?: React.ReactNode;\n}\n\ninterface ButtonTypographyProps extends React.AllHTMLAttributes<HTMLElement> {\n  primary?: PanelHeaderButtonProps[\"primary\"];\n}\n\nconst ButtonTypography = ({ primary, children }: ButtonTypographyProps) => {\n  const platform = usePlatform();\n\n  if (platform === IOS) {\n    return (\n      <Title Component=\"span\" level=\"3\" weight={primary ? \"1\" : \"3\"}>\n        {children}\n      </Title>\n    );\n  }\n\n  return <Text weight={platform === VKCOM ? undefined : \"2\"}>{children}</Text>;\n};\n\nconst warn = warnOnce(\"PanelHeaderButton\");\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeaderButton\n */\nexport const PanelHeaderButton = ({\n  children,\n  primary = false,\n  label,\n  ...restProps\n}: PanelHeaderButtonProps) => {\n  const isPrimitive = isPrimitiveReactNode(children);\n  const isPrimitiveLabel = isPrimitiveReactNode(label);\n  const platform = usePlatform();\n\n  let hoverMode;\n  let activeMode;\n\n  switch (platform) {\n    case ANDROID:\n      hoverMode = \"background\";\n      activeMode = \"background\";\n      break;\n    case IOS:\n      hoverMode = \"background\";\n      activeMode = \"opacity\";\n      break;\n    case VKCOM:\n      hoverMode = \"PanelHeaderButton--hover\";\n      activeMode = \"PanelHeaderButton--active\";\n  }\n\n  if (process.env.NODE_ENV === \"development\") {\n    const hasAccessibleName = Boolean(\n      getTitleFromChildren(children) ||\n        getTitleFromChildren(label) ||\n        restProps[\"aria-label\"] ||\n        restProps[\"aria-labelledby\"]\n    );\n\n    if (!hasAccessibleName) {\n      warn(\n        \"a11y: У кнопки нет названия, которое может прочитать скринридер, и она недоступна для части пользователей. Замените содержимое на текст или добавьте описание действия с помощью пропа aria-label.\",\n        \"error\"\n      );\n    }\n  }\n\n  return (\n    <Tappable\n      {...restProps}\n      hoverMode={hoverMode}\n      Component={restProps.href ? \"a\" : \"button\"}\n      activeEffectDelay={200}\n      activeMode={activeMode}\n      vkuiClass={classNames(\n        getClassName(\"PanelHeaderButton\", platform),\n        primary && \"PanelHeaderButton--primary\",\n        isPrimitive && \"PanelHeaderButton--primitive\",\n        !isPrimitive && !isPrimitiveLabel && \"PanelHeaderButton--notPrimitive\"\n      )}\n    >\n      {isPrimitive ? (\n        <ButtonTypography primary={primary}>{children}</ButtonTypography>\n      ) : (\n        children\n      )}\n      {isPrimitiveLabel ? (\n        <ButtonTypography primary={primary}>{label}</ButtonTypography>\n      ) : (\n        label\n      )}\n    </Tappable>\n  );\n};\n"],"mappings":";;;;AACA,SAAwBA,QAAQ;AAChC,SAASC,YAAY;AACrB,SAASC,UAAU;AACnB,SAASC,QAAQ;AACjB,SAASC,WAAW;AACpB,SAASC,oBAAoB,EAAEC,oBAAoB;AACnD,SAASC,GAAG,EAAEC,KAAK,EAAEC,OAAO;AAC5B,SAASC,IAAI;AACb,SAASC,KAAK;AAYd,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,OAAqD;EAAA,IAA/CC,OAAO,QAAPA,OAAO;IAAEC,QAAQ,QAARA,QAAQ;EAC3C,IAAMC,QAAQ,GAAGX,WAAW,EAAE;EAE9B,IAAIW,QAAQ,KAAKR,GAAG,EAAE;IACpB,OACE,oBAAC,KAAK;MAAC,SAAS,EAAC,MAAM;MAAC,KAAK,EAAC,GAAG;MAAC,MAAM,EAAEM,OAAO,GAAG,GAAG,GAAG;IAAI,GAC3DC,QAAQ,CACH;EAEZ;EAEA,OAAO,oBAAC,IAAI;IAAC,MAAM,EAAEC,QAAQ,KAAKP,KAAK,GAAGQ,SAAS,GAAG;EAAI,GAAEF,QAAQ,CAAQ;AAC9E,CAAC;AAED,IAAMG,IAAI,GAAGd,QAAQ,CAAC,mBAAmB,CAAC;;AAE1C;AACA;AACA;AACA,OAAO,IAAMe,iBAAiB,GAAG,SAApBA,iBAAiB,QAKA;EAAA,IAJ5BJ,QAAQ,SAARA,QAAQ;IAAA,sBACRD,OAAO;IAAPA,OAAO,8BAAG,KAAK;IACfM,KAAK,SAALA,KAAK;IACFC,SAAS;EAEZ,IAAMC,WAAW,GAAGf,oBAAoB,CAACQ,QAAQ,CAAC;EAClD,IAAMQ,gBAAgB,GAAGhB,oBAAoB,CAACa,KAAK,CAAC;EACpD,IAAMJ,QAAQ,GAAGX,WAAW,EAAE;EAE9B,IAAImB,SAAS;EACb,IAAIC,UAAU;EAEd,QAAQT,QAAQ;IACd,KAAKN,OAAO;MACVc,SAAS,GAAG,YAAY;MACxBC,UAAU,GAAG,YAAY;MACzB;IACF,KAAKjB,GAAG;MACNgB,SAAS,GAAG,YAAY;MACxBC,UAAU,GAAG,SAAS;MACtB;IACF,KAAKhB,KAAK;MACRe,SAAS,GAAG,0BAA0B;MACtCC,UAAU,GAAG,2BAA2B;EAAC;EAG7C,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IAC1C,IAAMC,iBAAiB,GAAGC,OAAO,CAC/BxB,oBAAoB,CAACS,QAAQ,CAAC,IAC5BT,oBAAoB,CAACc,KAAK,CAAC,IAC3BC,SAAS,CAAC,YAAY,CAAC,IACvBA,SAAS,CAAC,iBAAiB,CAAC,CAC/B;IAED,IAAI,CAACQ,iBAAiB,EAAE;MACtBX,IAAI,CACF,oMAAoM,EACpM,OAAO,CACR;IACH;EACF;EAEA,OACE,oBAAC,QAAQ,eACHG,SAAS;IACb,SAAS,EAAEG,SAAU;IACrB,SAAS,EAAEH,SAAS,CAACU,IAAI,GAAG,GAAG,GAAG,QAAS;IAC3C,iBAAiB,EAAE,GAAI;IACvB,UAAU,EAAEN,UAAW;IACvB,SAAS,EAAEtB,UAAU,CACnBD,YAAY,CAAC,mBAAmB,EAAEc,QAAQ,CAAC,EAC3CF,OAAO,IAAI,4BAA4B,EACvCQ,WAAW,IAAI,8BAA8B,EAC7C,CAACA,WAAW,IAAI,CAACC,gBAAgB,IAAI,iCAAiC;EACtE,IAEDD,WAAW,GACV,oBAAC,gBAAgB;IAAC,OAAO,EAAER;EAAQ,GAAEC,QAAQ,CAAoB,GAEjEA,QACD,EACAQ,gBAAgB,GACf,oBAAC,gBAAgB;IAAC,OAAO,EAAET;EAAQ,GAAEM,KAAK,CAAoB,GAE9DA,KACD,CACQ;AAEf,CAAC"}