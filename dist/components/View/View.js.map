{"version":3,"file":"View.js","names":["React","classNames","animationEvent","IOS","Touch","useConfigProvider","useSplitCol","AppRootPortal","canUseDOM","useDOM","blurActiveElement","useScroll","NavTransitionProvider","getNavId","warnOnce","usePlatform","swipeBackExcluded","useWaitTransitionFinish","useTimeout","usePrevious","useIsomorphicLayoutEffect","noop","SwipeBackResults","scrollsCache","warn","View","popout","modal","activePanelProp","activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancelProp","onSwipeBackCancel","children","restProps","process","env","NODE_ENV","scrolls","useRef","id","afterTransition","useEffect","current","panelNodes","window","document","scroll","configProvider","splitCol","platform","useState","animated","setAnimated","visiblePanels","setVisiblePanels","setActivePanel","undefined","isBack","setIsBack","prevPanel","setPrevPanel","nextPanel","setNextPanel","swipingBack","setSwipingBack","swipeBackStartX","setSwipeBackStartX","swipeBackShift","setSwipeBackShift","swipeBackNextPanel","setSwipeBackNextPanel","swipeBackPrevPanel","setSwipeBackPrevPanel","swipeBackResult","setSwipeBackResult","browserSwipe","setBrowserSwipe","prevActivePanel","prevSwipingBack","prevBrowserSwipe","prevSwipeBackResult","prevSwipeBackPrevPanel","prevOnTransition","panels","Children","toArray","filter","panel","panelId","props","includes","disableAnimation","transitionMotionEnabled","animate","pickPanel","flushTransition","useCallback","isBackTransition","scrollTo","from","to","transitionEndHandler","e","animationName","Boolean","waitTransitionFinish","animationFinishTimeout","onSwipeBackSuccess","swipingBackTransitionEndHandler","propertyName","target","fail","success","onMoveX","isWebView","startX","innerWidth","length","getScroll","y","slice","shiftX","onEnd","speed","duration","calcPanelSwipeStyles","isPrev","isNext","prevPanelTranslate","nextPanelTranslate","prevPanelShadow","boxShadow","transform","WebkitTransform","firstLayerId","map","find","supported","set","isTransitionTarget","compensateScroll","el","marginTop"],"sources":["../../../src/components/View/View.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { animationEvent } from \"../../lib/supportEvents\";\nimport { IOS } from \"../../lib/platform\";\nimport { Touch, TouchEvent } from \"../Touch/Touch\";\nimport { useConfigProvider } from \"../ConfigProvider/ConfigProviderContext\";\nimport { useSplitCol } from \"../SplitCol/SplitCol\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { canUseDOM, useDOM, blurActiveElement } from \"../../lib/dom\";\nimport { useScroll } from \"../AppRoot/ScrollContext\";\nimport { NavTransitionProvider } from \"../NavTransitionContext/NavTransitionContext\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { swipeBackExcluded } from \"./utils\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePrevious } from \"../../hooks/usePrevious\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { noop } from \"../../lib/utils\";\nimport \"./View.css\";\n\nenum SwipeBackResults {\n  fail = 1,\n  success,\n}\n\ninterface Scrolls {\n  [index: string]: number | undefined;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\nexport let scrollsCache: ViewsScrolls = {};\n\nexport interface ViewProps\n  extends React.HTMLAttributes<HTMLElement>,\n    NavIdProps {\n  activePanel: string;\n  /**\n   * @deprecated будет удалено в 5.0.0. Используйте одноименное свойство у `SplitLayout`.\n   *\n   * Свойство для отрисовки `Alert`, `ActionSheet` и `ScreenSpinner`.\n   */\n  popout?: React.ReactNode;\n  /**\n   * @deprecated будет удалено в 5.0.0. Используйте одноименное свойство у `SplitLayout`.\n   *\n   * Свойство для отрисовки `ModalRoot`.\n   */\n  modal?: React.ReactNode;\n  onTransition?(params: { isBack: boolean; from: string; to: string }): void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?(): void;\n  /**\n   * callback начала анимации свайпа назад.\n   */\n  onSwipeBackStart?(): void;\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?(): void;\n  history?: string[];\n}\n\nexport interface ViewState {\n  animated: boolean;\n\n  visiblePanels: string[];\n  activePanel: string | null;\n  isBack: boolean | undefined;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack: boolean;\n  swipeBackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: SwipeBackResults | null;\n\n  browserSwipe: boolean;\n}\n\nconst warn = warnOnce(\"View\");\n\n/**\n * @see https://vkcom.github.io/VKUI/#/View\n */\nexport const View = ({\n  popout,\n  modal,\n  activePanel: activePanelProp,\n  history,\n  nav,\n  onTransition,\n  onSwipeBack,\n  onSwipeBackStart,\n  onSwipeBackCancel: onSwipeBackCancelProp,\n  children,\n\n  ...restProps\n}: ViewProps) => {\n  if (process.env.NODE_ENV === \"development\") {\n    popout &&\n      warn(\n        \"Свойство popout устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\"\n      );\n    modal &&\n      warn(\n        \"Свойство modal устарело и будет удалено в 5.0.0. Используйте одноименное свойство у SplitLayout.\"\n      );\n  }\n\n  const scrolls = React.useRef(\n    scrollsCache[getNavId({ nav, id: restProps.id }) as string] || {}\n  );\n  const afterTransition = React.useRef(noop);\n\n  React.useEffect(() => () => {\n    const id = getNavId({ nav, id: restProps.id });\n    if (id) {\n      scrollsCache[id] = scrolls.current;\n    }\n  });\n\n  const panelNodes = React.useRef<{ [id: string]: HTMLDivElement | null }>({});\n\n  const { window, document } = useDOM();\n  const scroll = useScroll();\n  const configProvider = useConfigProvider();\n  const splitCol = useSplitCol();\n  const platform = usePlatform();\n\n  const [animated, setAnimated] = React.useState(false);\n\n  const [visiblePanels, setVisiblePanels] = React.useState([activePanelProp]);\n  const [activePanel, setActivePanel] = React.useState<string | null>(\n    activePanelProp\n  );\n  const [isBack, setIsBack] = React.useState<boolean | undefined>(undefined);\n  const [prevPanel, setPrevPanel] = React.useState<string | null>(null);\n  const [nextPanel, setNextPanel] = React.useState<string | null>(null);\n\n  const [swipingBack, setSwipingBack] = React.useState<boolean>(false);\n  const [swipeBackStartX, setSwipeBackStartX] = React.useState<number>(0);\n  const [swipeBackShift, setSwipeBackShift] = React.useState<number>(0);\n  const [swipeBackNextPanel, setSwipeBackNextPanel] = React.useState<\n    string | null\n  >(null);\n  const [swipeBackPrevPanel, setSwipeBackPrevPanel] = React.useState<\n    string | null\n  >(null);\n  const [swipeBackResult, setSwipeBackResult] =\n    React.useState<SwipeBackResults | null>(null);\n\n  const [browserSwipe, setBrowserSwipe] = React.useState(false);\n\n  const prevActivePanel = usePrevious(activePanelProp);\n  const prevSwipingBack = usePrevious(swipingBack);\n  const prevBrowserSwipe = usePrevious(browserSwipe);\n  const prevSwipeBackResult = usePrevious(swipeBackResult);\n  const prevSwipeBackPrevPanel = usePrevious(swipeBackPrevPanel);\n  const prevOnTransition = usePrevious(onTransition);\n\n  const panels = (\n    React.Children.toArray(children) as React.ReactElement[]\n  ).filter((panel: React.ReactElement) => {\n    const panelId = getNavId(panel.props, warn);\n\n    return (\n      (panelId !== undefined && visiblePanels.includes(panelId)) ||\n      panelId === swipeBackPrevPanel ||\n      panelId === swipeBackNextPanel\n    );\n  });\n\n  const disableAnimation =\n    configProvider?.transitionMotionEnabled === false || !splitCol?.animate;\n\n  const pickPanel = (id: string | null) => {\n    if (id === null) {\n      return null;\n    }\n    return panelNodes.current[id];\n  };\n\n  const flushTransition = React.useCallback(\n    (prevPanel: string, isBackTransition: boolean) => {\n      if (isBackTransition) {\n        scrolls.current[prevPanel] = 0;\n      }\n      setPrevPanel(null);\n      setNextPanel(null);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n      setAnimated(false);\n      setIsBack(undefined);\n\n      afterTransition.current = () => {\n        scroll?.scrollTo(\n          0,\n          isBackTransition ? scrolls.current[activePanelProp] : 0\n        );\n        onTransition &&\n          onTransition({\n            isBack: isBackTransition,\n            from: prevPanel,\n            to: activePanelProp,\n          });\n      };\n    },\n    [activePanelProp, onTransition, scroll]\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    afterTransition.current();\n    afterTransition.current = noop;\n  }, [afterTransition.current]);\n\n  const transitionEndHandler = React.useCallback(\n    (e?: React.AnimationEvent): void => {\n      if (\n        (!e ||\n          [\n            \"vkui-animation-ios-next-forward\",\n            \"vkui-animation-ios-prev-back\",\n            \"vkui-animation-view-next-forward\",\n            \"vkui-animation-view-prev-back\",\n          ].includes(e.animationName)) &&\n        prevPanel !== null\n      ) {\n        flushTransition(prevPanel, Boolean(isBack));\n      }\n    },\n    [flushTransition, isBack, prevPanel]\n  );\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n  const animationFinishTimeout = useTimeout(\n    transitionEndHandler,\n    platform === IOS ? 600 : 300\n  );\n\n  const onSwipeBackSuccess = React.useCallback(() => {\n    onSwipeBack && onSwipeBack();\n  }, [onSwipeBack]);\n\n  const onSwipeBackCancel = React.useCallback(() => {\n    onSwipeBackCancelProp && onSwipeBackCancelProp();\n    setSwipeBackPrevPanel(null);\n    setSwipeBackNextPanel(null);\n    setSwipingBack(false);\n    setSwipeBackResult(null);\n    setSwipeBackStartX(0);\n    setSwipeBackShift(0);\n  }, [onSwipeBackCancelProp]);\n\n  const swipingBackTransitionEndHandler = React.useCallback(\n    (e?: TransitionEvent): void => {\n      // indexOf because of vendor prefixes in old browsers\n      if (\n        !e ||\n        (e?.propertyName.includes(\"transform\") &&\n          e?.target === pickPanel(swipeBackNextPanel))\n      ) {\n        switch (swipeBackResult) {\n          case SwipeBackResults.fail:\n            onSwipeBackCancel();\n            break;\n          case SwipeBackResults.success:\n            onSwipeBackSuccess();\n        }\n      }\n    },\n    [onSwipeBackCancel, onSwipeBackSuccess, swipeBackNextPanel, swipeBackResult]\n  );\n\n  const onMoveX = (e: TouchEvent): void => {\n    if (swipeBackExcluded(e)) {\n      return;\n    }\n\n    if (\n      platform === IOS &&\n      !configProvider?.isWebView &&\n      (e.startX <= 70 || e.startX >= window!.innerWidth - 70) &&\n      !browserSwipe\n    ) {\n      setBrowserSwipe(true);\n    }\n\n    if (platform === IOS && configProvider?.isWebView && onSwipeBack) {\n      if ((animated && e.startX <= 70) || !window) {\n        return;\n      }\n\n      if (e.startX <= 70 && !swipingBack && history && history.length > 1) {\n        if (activePanel !== null) {\n          // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n          blurActiveElement(document);\n          scrolls.current[activePanel] = scroll?.getScroll().y;\n        }\n\n        setSwipingBack(true);\n        setSwipeBackStartX(e.startX);\n        setSwipeBackPrevPanel(activePanel);\n        setSwipeBackNextPanel(history.slice(-2)[0]);\n      }\n      if (swipingBack) {\n        let swipeBackShift = 0;\n        if (e.shiftX < 0) {\n          swipeBackShift = 0;\n        } else if (e.shiftX > window.innerWidth - swipeBackStartX) {\n          swipeBackShift = window?.innerWidth;\n        } else {\n          swipeBackShift = e.shiftX;\n        }\n        setSwipeBackShift(swipeBackShift);\n      }\n    }\n  };\n\n  const onEnd = React.useCallback(\n    (e: TouchEvent): void => {\n      if (swipingBack && window) {\n        const speed = (swipeBackShift / e.duration) * 1000;\n        if (swipeBackShift === 0) {\n          onSwipeBackCancel();\n        } else if (swipeBackShift >= (window?.innerWidth ?? 0)) {\n          onSwipeBackSuccess();\n        } else if (\n          speed > 250 ||\n          swipeBackStartX + swipeBackShift > window.innerWidth / 2\n        ) {\n          setSwipeBackResult(SwipeBackResults.success);\n        } else {\n          setSwipeBackResult(SwipeBackResults.fail);\n        }\n      }\n    },\n    [\n      onSwipeBackCancel,\n      onSwipeBackSuccess,\n      swipeBackShift,\n      swipeBackStartX,\n      swipingBack,\n      window,\n    ]\n  );\n\n  const calcPanelSwipeStyles = (\n    panelId: string | undefined\n  ): React.CSSProperties => {\n    if (!canUseDOM || !window) {\n      return {};\n    }\n\n    const isPrev = panelId === swipeBackPrevPanel;\n    const isNext = panelId === swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${swipeBackShift}px`;\n    let nextPanelTranslate = `${\n      -50 + (swipeBackShift * 100) / window.innerWidth / 2\n    }%`;\n    let prevPanelShadow =\n      (0.3 * (window.innerWidth - swipeBackShift)) / window.innerWidth;\n\n    if (swipeBackResult) {\n      return isPrev\n        ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` }\n        : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  };\n\n  React.useEffect(() => {\n    popout && blurActiveElement(document);\n  }, [document, popout]);\n\n  React.useEffect(() => {\n    // Нужен переход\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      !prevSwipingBack &&\n      !prevBrowserSwipe\n    ) {\n      const firstLayerId = (\n        React.Children.toArray(children) as React.ReactElement[]\n      )\n        .map((panel) => getNavId(panel.props, warn))\n        .find((id) => id === prevActivePanel || id === activePanelProp);\n\n      const isBackTransition = firstLayerId === activePanelProp;\n      scrolls.current[prevActivePanel] = scroll?.getScroll().y;\n\n      if (disableAnimation) {\n        flushTransition(prevActivePanel, isBackTransition);\n      } else {\n        blurActiveElement(document);\n\n        setVisiblePanels([prevActivePanel, activePanelProp]);\n        setPrevPanel(prevActivePanel);\n        setNextPanel(activePanelProp);\n        setActivePanel(null);\n        setAnimated(true);\n        setIsBack(isBackTransition);\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          animationFinishTimeout.set();\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      prevSwipingBack\n    ) {\n      const nextPanel = activePanelProp;\n      const prevPanel = prevActivePanel;\n      if (prevSwipeBackPrevPanel) {\n        scrolls.current[prevSwipeBackPrevPanel] = 0;\n      }\n\n      setSwipeBackPrevPanel(null);\n      setSwipeBackNextPanel(null);\n      setSwipingBack(false);\n      setSwipeBackResult(null);\n      setSwipeBackStartX(0);\n      setSwipeBackShift(0);\n      setActivePanel(nextPanel);\n      setVisiblePanels([nextPanel]);\n\n      afterTransition.current = () => {\n        if (nextPanel !== null) {\n          scroll?.scrollTo(0, scrolls.current[nextPanel]);\n        }\n        prevOnTransition &&\n          prevOnTransition({\n            isBack: true,\n            from: prevPanel,\n            to: nextPanel,\n          });\n      };\n    }\n\n    // Начался свайп назад\n    if (!prevSwipingBack && swipingBack) {\n      onSwipeBackStart && onSwipeBackStart();\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevSwipeBackResult && swipeBackResult) {\n      waitTransitionFinish(\n        pickPanel(swipeBackNextPanel),\n        swipingBackTransitionEndHandler,\n        platform === IOS ? 600 : 300\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (\n      prevSwipeBackResult === SwipeBackResults.fail &&\n      !swipeBackResult &&\n      activePanel !== null\n    ) {\n      scroll?.scrollTo(0, scrolls.current[activePanel]);\n    }\n\n    // Закончился Safari свайп\n    if (prevActivePanel !== activePanelProp && browserSwipe) {\n      setBrowserSwipe(false);\n      setNextPanel(null);\n      setPrevPanel(null);\n      setAnimated(false);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n    }\n  }, [\n    activePanelProp,\n    activePanel,\n    animationFinishTimeout,\n    browserSwipe,\n    children,\n    disableAnimation,\n    document,\n    flushTransition,\n    onSwipeBackStart,\n    panels,\n    platform,\n    prevActivePanel,\n    prevBrowserSwipe,\n    prevOnTransition,\n    prevSwipeBackPrevPanel,\n    prevSwipeBackResult,\n    prevSwipingBack,\n    scroll,\n    swipeBackNextPanel,\n    swipeBackResult,\n    swipingBack,\n    swipingBackTransitionEndHandler,\n    waitTransitionFinish,\n  ]);\n\n  return (\n    <Touch\n      Component=\"section\"\n      {...restProps}\n      vkuiClass={classNames(\n        \"View\",\n        platform === IOS && \"View--ios\",\n        !disableAnimation && animated && \"View--animated\",\n        !disableAnimation && swipingBack && \"View--swiping-back\",\n        disableAnimation && \"View--no-motion\"\n      )}\n      onMoveX={onMoveX}\n      onEnd={onEnd}\n    >\n      <div vkuiClass=\"View__panels\">\n        {panels.map((panel: React.ReactElement) => {\n          const panelId = getNavId(panel.props, warn);\n          const isPrev =\n            panelId === prevPanel || panelId === swipeBackPrevPanel;\n          const isTransitionTarget =\n            animated && panelId === (isBack ? prevPanel : nextPanel);\n          const compensateScroll =\n            isPrev ||\n            panelId === swipeBackNextPanel ||\n            (panelId === nextPanel && isBack);\n\n          return (\n            <div\n              vkuiClass={classNames(\n                \"View__panel\",\n                panelId === activePanel && \"View__panel--active\",\n                panelId === prevPanel && \"View__panel--prev\",\n                panelId === nextPanel && \"View__panel--next\",\n                panelId === swipeBackPrevPanel &&\n                  \"View__panel--swipe-back-prev\",\n                panelId === swipeBackNextPanel &&\n                  \"View__panel--swipe-back-next\",\n                swipeBackResult === SwipeBackResults.success &&\n                  \"View__panel--swipe-back-success\",\n                swipeBackResult === SwipeBackResults.fail &&\n                  \"View__panel--swipe-back-failed\"\n              )}\n              onAnimationEnd={\n                isTransitionTarget ? transitionEndHandler : undefined\n              }\n              ref={(el) =>\n                panelId !== undefined && (panelNodes.current[panelId] = el)\n              }\n              style={calcPanelSwipeStyles(panelId)}\n              key={panelId}\n            >\n              <div\n                vkuiClass=\"View__panel-in\"\n                style={{\n                  marginTop: compensateScroll\n                    ? -(scrolls.current[panelId as string] ?? 0)\n                    : undefined,\n                }}\n              >\n                <NavTransitionProvider\n                  entering={\n                    panelId === nextPanel || panelId === swipeBackNextPanel\n                  }\n                >\n                  {panel}\n                </NavTransitionProvider>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <AppRootPortal>\n        {!!popout && <div vkuiClass=\"View__popout\">{popout}</div>}\n        {!!modal && <div vkuiClass=\"View__modal\">{modal}</div>}\n      </AppRootPortal>\n    </Touch>\n  );\n};\n"],"mappings":"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"}