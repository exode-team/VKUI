{"version":3,"sources":["../../../src/components/NativeSelect/NativeSelect.tsx"],"names":["React","classNames","DropdownIcon","FormField","withAdaptivity","getClassName","useIsomorphicLayoutEffect","useEnsuredControl","useExternRef","usePlatform","SelectType","SelectTypography","NativeSelectComponent","style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY","multiline","selectType","default","status","restProps","platform","useState","title","setTitle","empty","setEmpty","value","onChange","selectRef","selectedOption","current","options","selectedIndex","text","NativeSelect","displayName"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { DropdownIcon } from \"../DropdownIcon/DropdownIcon\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity } from \"../../hoc/withAdaptivity\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { useEnsuredControl } from \"../../hooks/useEnsuredControl\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { SelectType, SelectTypography } from \"../Select/Select\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"../Select/Select.css\";\n\nexport interface NativeSelectProps\n  extends React.SelectHTMLAttributes<HTMLSelectElement>,\n    HasRef<HTMLSelectElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasAlign,\n    AdaptivityProps,\n    Pick<FormFieldProps, \"status\"> {\n  placeholder?: string;\n  multiline?: boolean;\n  selectType?: keyof typeof SelectType;\n}\n\nexport interface SelectState {\n  value?: React.SelectHTMLAttributes<HTMLSelectElement>[\"value\"];\n  title?: string;\n  notSelected?: boolean;\n}\n\nconst NativeSelectComponent = ({\n  style,\n  defaultValue = \"\",\n  align,\n  placeholder,\n  children,\n  className,\n  getRef,\n  getRootRef,\n  disabled,\n  sizeX,\n  sizeY,\n  multiline,\n  selectType = SelectType.default,\n  status,\n  ...restProps\n}: NativeSelectProps & AdaptivityContextInterface) => {\n  const platform = usePlatform();\n  const [title, setTitle] = React.useState(\"\");\n  const [empty, setEmpty] = React.useState(false);\n  const [value, onChange] = useEnsuredControl(restProps, { defaultValue });\n  const selectRef = useExternRef(getRef);\n  useIsomorphicLayoutEffect(() => {\n    const selectedOption =\n      selectRef.current?.options[selectRef.current.selectedIndex];\n    if (selectedOption) {\n      setTitle(selectedOption.text);\n      setEmpty(selectedOption.value === \"\" && placeholder != null);\n    }\n  }, [value, children]);\n\n  return (\n    <FormField\n      Component=\"label\"\n      vkuiClass={classNames(\n        getClassName(\"Select\", platform),\n        `Select--${selectType}`,\n        empty && \"Select--empty\",\n        multiline && \"Select--multiline\",\n        align && `Select--align-${align}`,\n        `Select--sizeX-${sizeX}`,\n        `Select--sizeY-${sizeY}`\n      )}\n      className={className}\n      style={style}\n      getRootRef={getRootRef}\n      disabled={disabled}\n      after={<DropdownIcon />}\n      status={status}\n    >\n      <select\n        {...restProps}\n        disabled={disabled}\n        vkuiClass=\"Select__el\"\n        onChange={onChange}\n        value={value}\n        ref={selectRef}\n      >\n        {placeholder && <option value=\"\">{placeholder}</option>}\n        {children}\n      </select>\n      <div vkuiClass=\"Select__container\">\n        {/* TODO v5.0.0 поправить под новую адаптивность */}\n        <SelectTypography vkuiClass=\"Select__title\">{title}</SelectTypography>\n      </div>\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/NativeSelect\n */\nexport const NativeSelect = withAdaptivity(NativeSelectComponent, {\n  sizeX: true,\n  sizeY: true,\n});\n\nNativeSelect.displayName = \"NativeSelect\";\n"],"file":"NativeSelect.js"}