{"version":3,"sources":["../../../src/components/UsersStack/UsersStack.tsx"],"names":["React","getClassName","usePlatform","hasReactNode","classNames","useIsomorphicLayoutEffect","Caption","Subhead","createMasks","useDOM","UsersStack","props","platform","photos","visibleCount","size","layout","children","restProps","document","othersCount","Math","max","length","canShowOthers","photosShown","slice","map","item","i","backgroundImage","defaultProps","memo"],"mappings":";;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,WAAT;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AACA,SAASC,yBAAT;AACA,SAASC,OAAT;AACA,SAASC,OAAT;AACA,SAASC,WAAT;AACA,SAASC,MAAT;;AAuBA;AACA;AACA;AACA,IAAMC,UAAqC,GAAG,SAAxCA,UAAwC,CAACC,KAAD,EAA4B;AACxE,MAAMC,QAAQ,GAAGV,WAAW,EAA5B;;AACA,sBAOIS,KAPJ,CACEE,MADF;AAAA,MACEA,MADF,8BACW,EADX;AAAA,4BAOIF,KAPJ,CAEEG,YAFF;AAAA,MAEEA,YAFF,oCAEiB,CAFjB;AAAA,MAGEC,IAHF,GAOIJ,KAPJ,CAGEI,IAHF;AAAA,MAIEC,MAJF,GAOIL,KAPJ,CAIEK,MAJF;AAAA,MAKEC,QALF,GAOIN,KAPJ,CAKEM,QALF;AAAA,MAMKC,SANL,4BAOIP,KAPJ;;AAQA,gBAAmBF,MAAM,EAAzB;AAAA,MAAOU,QAAP,WAAOA,QAAP;;AAEAd,EAAAA,yBAAyB,CAAC,YAAM;AAC9BG,IAAAA,WAAW,CAACW,QAAD,CAAX;AACD,GAFwB,EAEtB,CAACA,QAAD,CAFsB,CAAzB;AAIA,MAAMC,WAAW,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYT,MAAM,CAACU,MAAP,GAAgBT,YAA5B,CAApB;AACA,MAAMU,aAAa,GAAGJ,WAAW,GAAG,CAAd,IAAmBL,IAAI,KAAK,GAAlD;AAEA,MAAMU,WAAW,GAAGZ,MAAM,CAACa,KAAP,CAAa,CAAb,EAAgBZ,YAAhB,CAApB;AAEA,SACE,wCACMI,SADN;AAEE;AACA,IAAA,SAAS,EAAEd,UAAU,CACnBH,YAAY,CAAC,YAAD,EAAeW,QAAf,CADO,6BAECG,IAFD,2BAGFC,MAHE,GAInB;AACE,4BAAsBQ;AADxB,KAJmB;AAHvB,MAYE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAoC,IAAA,IAAI,EAAC;AAAzC,KACGC,WAAW,CAACE,GAAZ,CAAgB,UAACC,IAAD,EAAOC,CAAP,EAAa;AAC5B,WAAO,OAAOD,IAAP,KAAgB,QAAhB,GACF;AACD,MAAA,GAAG,EAAEC,CADJ;AAED,MAAA,SAAS,EAAC,mBAFT;AAGD,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,gBAASF,IAAT;AAAjB;AAHN,MADE,GAMF;AACC,MAAA,GAAG,EAAEC,CADN;AAEC,MAAA,SAAS,EAAC;AAFX,OAIED,IAJF,CANL;AAYI,GAbL,CADH,EAgBGJ,aAAa,IACZ,oBAAC,OAAD;AACE,IAAA,MAAM,EAAC,GADT;AAEE,IAAA,SAAS,EAAC,6CAFZ;AAGE,mBAAY;AAHd,KAKE,uCAAQJ,WAAR,CALF,CAjBJ,CAZF,EAsCGjB,YAAY,CAACc,QAAD,CAAZ,IACC,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAC,MAAnB;AAA0B,IAAA,SAAS,EAAC;AAApC,KACGA,QADH,CAvCJ,CADF;AA8CD,CAnED;;AAqEAP,UAAU,CAACqB,YAAX,GAA0B;AACxBlB,EAAAA,MAAM,EAAE,EADgB;AAExBE,EAAAA,IAAI,EAAE,GAFkB;AAGxBD,EAAAA,YAAY,EAAE,CAHU;AAIxBE,EAAAA,MAAM,EAAE;AAJgB,CAA1B,C,CAOA;;AACA,4BAAehB,KAAK,CAACgC,IAAN,CAAWtB,UAAX,CAAf","sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport { classNames } from \"../../lib/classNames\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport { Subhead } from \"../Typography/Subhead/Subhead\";\nimport { createMasks } from \"./masks\";\nimport { useDOM } from \"../../lib/dom\";\nimport \"./UsersStack.css\";\n\nexport interface UsersStackProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Массив ссылок на фотографии\n   */\n  photos?: React.ReactNode[];\n  /**\n   * Размер аватарок\n   */\n  size?: \"xs\" | \"s\" | \"m\";\n  /**\n   * Вертикальный режим рекомендуется использовать с размером `m`\n   */\n  layout?: \"vertical\" | \"horizontal\";\n  /**\n   * Количество аватарок, которые будут показаны.\n   * Если в массиве `photos` больше элементов и используется размер `m`, то будет показано количество остальных элементов\n   */\n  visibleCount?: number;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/UsersStack\n */\nconst UsersStack: React.FC<UsersStackProps> = (props: UsersStackProps) => {\n  const platform = usePlatform();\n  const {\n    photos = [],\n    visibleCount = 0,\n    size,\n    layout,\n    children,\n    ...restProps\n  } = props;\n  const {document} = useDOM();\n\n  useIsomorphicLayoutEffect(() => {\n    createMasks(document);\n  }, [document]);\n\n  const othersCount = Math.max(0, photos.length - visibleCount);\n  const canShowOthers = othersCount > 0 && size === \"m\";\n\n  const photosShown = photos.slice(0, visibleCount);\n\n  return (\n    <div\n      {...restProps}\n      // eslint-disable-next-line vkui/no-object-expression-in-arguments\n      vkuiClass={classNames(\n        getClassName(\"UsersStack\", platform),\n        `UsersStack--size-${size}`,\n        `UsersStack--l-${layout}`,\n        {\n          \"UsersStack--others\": canShowOthers,\n        }\n      )}\n    >\n      <div vkuiClass=\"UsersStack__photos\" role=\"presentation\">\n        {photosShown.map((item, i) => {\n          return typeof item === 'string'\n            ? (<div\n              key={i}\n              vkuiClass=\"UsersStack__photo\"\n              style={{ backgroundImage: `url(${item})` }}\n            />)\n            : (<div\n                key={i}\n                vkuiClass=\"UsersStack__photo\"\n              >\n                {item}\n              </div>\n            )})}\n\n        {canShowOthers && (\n          <Caption\n            weight=\"1\"\n            vkuiClass=\"UsersStack__photo UsersStack__photo--others\"\n            aria-hidden=\"true\"\n          >\n            <span>+{othersCount}</span>\n          </Caption>\n        )}\n      </div>\n      {hasReactNode(children) && (\n        <Subhead Component=\"span\" vkuiClass=\"UsersStack__text\">\n          {children}\n        </Subhead>\n      )}\n    </div>\n  );\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: \"s\",\n  visibleCount: 3,\n  layout: \"horizontal\",\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default React.memo(UsersStack);\n"],"file":"UsersStack.js"}