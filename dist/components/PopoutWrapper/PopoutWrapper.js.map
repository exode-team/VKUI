{"version":3,"file":"PopoutWrapper.js","names":["React","classNames","IOS","useTimeout","usePlatform","useGlobalEventListener","useDOM","PopoutWrapper","alignY","alignX","closing","hasMask","fixed","children","onClick","restProps","platform","useState","opened","setOpened","elRef","useRef","onFadeInEnd","e","animationName","animationFinishFallback","useEffect","set","window","preventDefault","passive","undefined"],"sources":["../../../src/components/PopoutWrapper/PopoutWrapper.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS } from \"../../lib/platform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { useDOM } from \"../../lib/dom\";\nimport \"./PopoutWrapper.css\";\n\nexport interface PopoutWrapperProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: \"top\" | \"center\" | \"bottom\";\n  alignX?: \"left\" | \"center\" | \"right\";\n  closing?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PopoutWrapper\n */\nexport const PopoutWrapper = ({\n  alignY = \"center\",\n  alignX = \"center\",\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n  const elRef = React.useRef<HTMLDivElement>(null);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === \"vkui-animation-full-fade-in\") {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(\n    onFadeInEnd,\n    platform === IOS ? 300 : 200\n  );\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, \"touchmove\", (e) => e.preventDefault(), {\n    passive: false,\n  });\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(\n        \"PopoutWrapper\",\n        `PopoutWrapper--v-${alignY}`,\n        `PopoutWrapper--h-${alignX}`,\n        closing && \"PopoutWrapper--closing\",\n        opened && \"PopoutWrapper--opened\",\n        fixed && \"PopoutWrapper--fixed\",\n        hasMask && \"PopoutWrapper--masked\"\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n      ref={elRef}\n    >\n      <div vkuiClass=\"PopoutWrapper__container\">\n        <div vkuiClass=\"PopoutWrapper__overlay\" onClick={onClick} />\n        <div vkuiClass=\"PopoutWrapper__content\">{children}</div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,UAAU;AACnB,SAASC,GAAG;AACZ,SAASC,UAAU;AACnB,SAASC,WAAW;AACpB,SAASC,sBAAsB;AAC/B,SAASC,MAAM;AAYf;AACA;AACA;AACA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAa,OASA;EAAA,uBARxBC,MAAM;IAANA,MAAM,4BAAG,QAAQ;IAAA,mBACjBC,MAAM;IAANA,MAAM,4BAAG,QAAQ;IAAA,oBACjBC,OAAO;IAAPA,OAAO,6BAAG,KAAK;IAAA,oBACfC,OAAO;IAAPA,OAAO,6BAAG,IAAI;IAAA,kBACdC,KAAK;IAALA,KAAK,2BAAG,IAAI;IACZC,QAAQ,QAARA,QAAQ;IACRC,OAAO,QAAPA,OAAO;IACJC,SAAS;EAEZ,IAAMC,QAAQ,GAAGZ,WAAW,EAAE;EAC9B,sBAA4BJ,KAAK,CAACiB,QAAQ,CAAC,CAACN,OAAO,CAAC;IAAA;IAA7CO,MAAM;IAAEC,SAAS;EACxB,IAAMC,KAAK,GAAGpB,KAAK,CAACqB,MAAM,CAAiB,IAAI,CAAC;EAEhD,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAIC,CAAwB,EAAK;IAChD,IAAI,CAACA,CAAC,IAAIA,CAAC,CAACC,aAAa,KAAK,6BAA6B,EAAE;MAC3DL,SAAS,CAAC,IAAI,CAAC;IACjB;EACF,CAAC;EACD,IAAMM,uBAAuB,GAAGtB,UAAU,CACxCmB,WAAW,EACXN,QAAQ,KAAKd,GAAG,GAAG,GAAG,GAAG,GAAG,CAC7B;EACDF,KAAK,CAAC0B,SAAS,CAAC,YAAM;IACpB,CAACR,MAAM,IAAIO,uBAAuB,CAACE,GAAG,EAAE;EAC1C,CAAC,EAAE,CAACF,uBAAuB,EAAEP,MAAM,CAAC,CAAC;EAErC,cAAmBZ,MAAM,EAAE;IAAnBsB,MAAM,WAANA,MAAM;EACdvB,sBAAsB,CAACuB,MAAM,EAAE,WAAW,EAAE,UAACL,CAAC;IAAA,OAAKA,CAAC,CAACM,cAAc,EAAE;EAAA,GAAE;IACrEC,OAAO,EAAE;EACX,CAAC,CAAC;EAEF,OACE,wCACMf,SAAS;IACb,SAAS,EAAEd,UAAU,CACnB,eAAe,6BACKO,MAAM,8BACNC,MAAM,GAC1BC,OAAO,IAAI,wBAAwB,EACnCQ,MAAM,IAAI,uBAAuB,EACjCN,KAAK,IAAI,sBAAsB,EAC/BD,OAAO,IAAI,uBAAuB,CAClC;IACF,cAAc,EAAEO,MAAM,GAAGa,SAAS,GAAGT,WAAY;IACjD,GAAG,EAAEF;EAAM,IAEX;IAAK,SAAS,EAAC;EAA0B,GACvC;IAAK,SAAS,EAAC,wBAAwB;IAAC,OAAO,EAAEN;EAAQ,EAAG,EAC5D;IAAK,SAAS,EAAC;EAAwB,GAAED,QAAQ,CAAO,CACpD,CACF;AAEV,CAAC"}