{"version":3,"sources":["../../../src/components/Checkbox/Checkbox.tsx"],"names":["React","ACTIVE_EFFECT_DELAY","Tappable","classNames","IOS","VKCOM","Icon20CheckBoxOn","Icon20CheckBoxOff","Icon24CheckBoxOn","Icon24CheckBoxOff","Icon20CheckBoxIndetermanate","usePlatform","withAdaptivity","SizeType","Text","hasReactNode","Caption","useExternRef","VisuallyHiddenInput","warnOnce","warn","Checkbox","children","className","style","getRootRef","getRef","description","indeterminate","defaultIndeterminate","sizeY","hoverMode","activeMode","hasHover","hasActive","focusVisibleMode","onChange","restProps","inputRef","platform","useEffect","indeterminateValue","undefined","current","Boolean","handleChange","useCallback","event","checked","process","env","NODE_ENV","defaultChecked","disabled","COMPACT"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  ACTIVE_EFFECT_DELAY,\n  TappableProps,\n  Tappable,\n} from \"../Tappable/Tappable\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS, VKCOM } from \"../../lib/platform\";\n\nimport {\n  Icon20CheckBoxOn,\n  Icon20CheckBoxOff,\n  Icon24CheckBoxOn,\n  Icon24CheckBoxOff,\n  Icon20CheckBoxIndetermanate,\n} from \"@vkontakte/icons\";\n\nimport { HasRef, HasRootRef } from \"../../types\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport {\n  withAdaptivity,\n  AdaptivityProps,\n  SizeType,\n} from \"../../hoc/withAdaptivity\";\nimport { Text } from \"../Typography/Text/Text\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { VisuallyHiddenInput } from \"../VisuallyHiddenInput/VisuallyHiddenInput\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport \"./Checkbox.css\";\n\nexport interface CheckboxProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasRef<HTMLInputElement>,\n    AdaptivityProps,\n    Pick<\n      TappableProps,\n      \"hoverMode\" | \"activeMode\" | \"hasHover\" | \"hasActive\" | \"focusVisibleMode\"\n    > {\n  description?: React.ReactNode;\n  indeterminate?: boolean;\n  defaultIndeterminate?: boolean;\n}\n\nconst warn = warnOnce(\"Checkbox\");\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Checkbox\n */\nexport const Checkbox = ({\n  children,\n  className,\n  style,\n  getRootRef,\n  getRef,\n  description,\n  indeterminate,\n  defaultIndeterminate,\n  sizeY,\n  hoverMode,\n  activeMode,\n  hasHover,\n  hasActive,\n  focusVisibleMode,\n  onChange,\n  ...restProps\n}: CheckboxProps) => {\n  const inputRef = useExternRef(getRef);\n  const platform = usePlatform();\n\n  React.useEffect(() => {\n    const indeterminateValue =\n      indeterminate === undefined ? defaultIndeterminate : indeterminate;\n\n    if (inputRef.current) {\n      inputRef.current.indeterminate = Boolean(indeterminateValue);\n    }\n  }, [defaultIndeterminate, indeterminate, inputRef]);\n\n  const handleChange: CheckboxProps[\"onChange\"] = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (\n        defaultIndeterminate !== undefined &&\n        indeterminate === undefined &&\n        restProps.checked === undefined &&\n        inputRef.current\n      ) {\n        inputRef.current.indeterminate = false;\n      }\n      if (indeterminate !== undefined && inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n      onChange && onChange(event);\n    },\n    [defaultIndeterminate, indeterminate, restProps.checked, onChange, inputRef]\n  );\n\n  if (process.env.NODE_ENV === \"development\") {\n    if (defaultIndeterminate && restProps.defaultChecked) {\n      warn(\n        \"defaultIndeterminate и defaultChecked не могут быть true одновременно\",\n        \"error\"\n      );\n    }\n\n    if (indeterminate && restProps.checked) {\n      warn(\"indeterminate и checked не могут быть true одновременно\", \"error\");\n    }\n\n    if (restProps.defaultChecked && restProps.checked) {\n      warn(\"defaultChecked и checked не могут быть true одновременно\", \"error\");\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"label\"\n      vkuiClass={classNames(\n        \"Checkbox\",\n        `Checkbox--sizeY-${sizeY}`,\n        !(hasReactNode(children) || hasReactNode(description)) &&\n          `Checkbox--simple`\n      )}\n      className={className}\n      style={style}\n      disabled={restProps.disabled}\n      activeEffectDelay={platform === IOS ? 100 : ACTIVE_EFFECT_DELAY}\n      getRootRef={getRootRef}\n      hoverMode={hoverMode}\n      activeMode={activeMode}\n      hasHover={hasHover}\n      hasActive={hasActive}\n      focusVisibleMode={focusVisibleMode}\n    >\n      <VisuallyHiddenInput\n        {...restProps}\n        onChange={handleChange}\n        type=\"checkbox\"\n        vkuiClass=\"Checkbox__input\"\n        getRef={inputRef}\n      />\n      <div vkuiClass=\"Checkbox__icon Checkbox__icon--on\">\n        {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n          <Icon20CheckBoxOn aria-hidden />\n        ) : (\n          <Icon24CheckBoxOn aria-hidden />\n        )}\n      </div>\n      <div vkuiClass=\"Checkbox__icon Checkbox__icon--off\">\n        {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n          <Icon20CheckBoxOff aria-hidden />\n        ) : (\n          <Icon24CheckBoxOff aria-hidden />\n        )}\n      </div>\n      <div vkuiClass=\"Checkbox__icon Checkbox__icon--indeterminate\">\n        <Icon20CheckBoxIndetermanate\n          aria-hidden\n          width={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n          height={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n        />\n      </div>\n      <Text vkuiClass=\"Checkbox__content\" Component=\"div\">\n        <div vkuiClass=\"Checkbox__children\">{children}</div>\n        {hasReactNode(description) && (\n          <Caption vkuiClass=\"Checkbox__description\">{description}</Caption>\n        )}\n      </Text>\n    </Tappable>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(Checkbox, {\n  sizeY: true,\n});\n"],"file":"Checkbox.js"}