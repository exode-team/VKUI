{"version":3,"file":"Checkbox.js","names":["React","ACTIVE_EFFECT_DELAY","Tappable","classNames","IOS","VKCOM","Icon20CheckBoxOn","Icon20CheckBoxOff","Icon24CheckBoxOn","Icon24CheckBoxOff","Icon20CheckBoxIndetermanate","usePlatform","withAdaptivity","SizeType","Text","hasReactNode","Caption","useExternRef","VisuallyHiddenInput","warnOnce","warn","Checkbox","children","className","style","getRootRef","getRef","description","indeterminate","defaultIndeterminate","sizeY","hoverMode","activeMode","hasHover","hasActive","focusVisibleMode","onChange","onIcon","offIcon","restProps","inputRef","platform","useEffect","indeterminateValue","undefined","current","Boolean","handleChange","useCallback","event","checked","process","env","NODE_ENV","defaultChecked","disabled","COMPACT"],"sources":["../../../src/components/Checkbox/Checkbox.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {\n  ACTIVE_EFFECT_DELAY,\n  TappableProps,\n  Tappable,\n} from \"../Tappable/Tappable\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS, VKCOM } from \"../../lib/platform\";\n\nimport {\n  Icon20CheckBoxOn,\n  Icon20CheckBoxOff,\n  Icon24CheckBoxOn,\n  Icon24CheckBoxOff,\n  Icon20CheckBoxIndetermanate,\n} from \"@vkontakte/icons\";\n\nimport { HasRef, HasRootRef } from \"../../types\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport {\n  withAdaptivity,\n  AdaptivityProps,\n  SizeType,\n} from \"../../hoc/withAdaptivity\";\nimport { Text } from \"../Typography/Text/Text\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { VisuallyHiddenInput } from \"../VisuallyHiddenInput/VisuallyHiddenInput\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport \"./Checkbox.css\";\n\nexport interface CheckboxProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasRef<HTMLInputElement>,\n    AdaptivityProps,\n    Pick<\n      TappableProps,\n      \"hoverMode\" | \"activeMode\" | \"hasHover\" | \"hasActive\" | \"focusVisibleMode\"\n    > {\n  description?: React.ReactNode;\n  indeterminate?: boolean;\n  defaultIndeterminate?: boolean;\n  onIcon?: React.ReactNode;\n  offIcon?: React.ReactNode;\n}\n\nconst warn = warnOnce(\"Checkbox\");\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Checkbox\n */\nexport const Checkbox = ({\n  children,\n  className,\n  style,\n  getRootRef,\n  getRef,\n  description,\n  indeterminate,\n  defaultIndeterminate,\n  sizeY,\n  hoverMode,\n  activeMode,\n  hasHover,\n  hasActive,\n  focusVisibleMode,\n  onChange,\n  onIcon,\n  offIcon,\n  ...restProps\n}: CheckboxProps) => {\n  const inputRef = useExternRef(getRef);\n  const platform = usePlatform();\n\n  React.useEffect(() => {\n    const indeterminateValue =\n      indeterminate === undefined ? defaultIndeterminate : indeterminate;\n\n    if (inputRef.current) {\n      inputRef.current.indeterminate = Boolean(indeterminateValue);\n    }\n  }, [defaultIndeterminate, indeterminate, inputRef]);\n\n  const handleChange: CheckboxProps[\"onChange\"] = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (\n        defaultIndeterminate !== undefined &&\n        indeterminate === undefined &&\n        restProps.checked === undefined &&\n        inputRef.current\n      ) {\n        inputRef.current.indeterminate = false;\n      }\n      if (indeterminate !== undefined && inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n      onChange && onChange(event);\n    },\n    [defaultIndeterminate, indeterminate, restProps.checked, onChange, inputRef]\n  );\n\n  if (process.env.NODE_ENV === \"development\") {\n    if (defaultIndeterminate && restProps.defaultChecked) {\n      warn(\n        \"defaultIndeterminate и defaultChecked не могут быть true одновременно\",\n        \"error\"\n      );\n    }\n\n    if (indeterminate && restProps.checked) {\n      warn(\"indeterminate и checked не могут быть true одновременно\", \"error\");\n    }\n\n    if (restProps.defaultChecked && restProps.checked) {\n      warn(\"defaultChecked и checked не могут быть true одновременно\", \"error\");\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"label\"\n      vkuiClass={classNames(\n        \"Checkbox\",\n        `Checkbox--sizeY-${sizeY}`,\n        !(hasReactNode(children) || hasReactNode(description)) &&\n          `Checkbox--simple`\n      )}\n      className={className}\n      style={style}\n      disabled={restProps.disabled}\n      activeEffectDelay={platform === IOS ? 100 : ACTIVE_EFFECT_DELAY}\n      getRootRef={getRootRef}\n      hoverMode={hoverMode}\n      activeMode={activeMode}\n      hasHover={hasHover}\n      hasActive={hasActive}\n      focusVisibleMode={focusVisibleMode}\n    >\n      <VisuallyHiddenInput\n        {...restProps}\n        onChange={handleChange}\n        type=\"checkbox\"\n        vkuiClass=\"Checkbox__input\"\n        getRef={inputRef}\n      />\n      <div vkuiClass=\"Checkbox__icon Checkbox__icon--on\">\n        {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n          (onIcon || <Icon20CheckBoxOn aria-hidden />)\n        ) : (\n            (onIcon || <Icon24CheckBoxOn aria-hidden />)\n        )}\n      </div>\n      <div vkuiClass=\"Checkbox__icon Checkbox__icon--off\">\n        {sizeY === SizeType.COMPACT || platform === VKCOM ? (\n            (offIcon || <Icon20CheckBoxOff aria-hidden />)\n        ) : (\n            (offIcon || <Icon24CheckBoxOff aria-hidden />)\n        )}\n      </div>\n      <div vkuiClass=\"Checkbox__icon Checkbox__icon--indeterminate\">\n        <Icon20CheckBoxIndetermanate\n          aria-hidden\n          width={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n          height={sizeY === SizeType.COMPACT || platform === VKCOM ? 20 : 24}\n        />\n      </div>\n      <Text vkuiClass=\"Checkbox__content\" Component=\"div\">\n        <div vkuiClass=\"Checkbox__children\">{children}</div>\n        {hasReactNode(description) && (\n          <Caption vkuiClass=\"Checkbox__description\">{description}</Caption>\n        )}\n      </Text>\n    </Tappable>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(Checkbox, {\n  sizeY: true,\n});\n"],"mappings":"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"}