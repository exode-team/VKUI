{"version":3,"file":"Input.js","names":["useRef","useEffect","classNames","FormField","withAdaptivity","InputComponent","type","align","getRef","className","getRootRef","sizeY","style","before","after","onInput","value","caretPosition","alwaysInFocus","isFocus","status","restProps","ref","handleChange","e","caret","target","selectionStart","element","window","requestAnimationFrame","selectionEnd","current","focus","setSelectionRange","disabled","Input","displayName"],"sources":["../../../src/components/Input/Input.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { classNames } from \"../../lib/classNames\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport \"./Input.css\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRef<HTMLInputElement>,\n    HasRootRef<HTMLDivElement>,\n    HasAlign,\n    AdaptivityProps,\n    FormFieldProps {\n  isFocus?: boolean;\n  alwaysInFocus?: boolean;\n  caretPosition?: number;\n}\n\nconst InputComponent = ({\n  type = \"text\",\n  align,\n  getRef,\n  className,\n  getRootRef,\n  sizeY,\n  style,\n  before,\n  after,\n  onInput,\n  value,\n  caretPosition,\n  alwaysInFocus,\n  isFocus = false,\n  status,\n  ...restProps\n}: InputProps) => {\n\n  const ref = useRef<HTMLInputElement>(null);\n\n  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n      const caret = e.target.selectionStart\n      const element = e.target\n\n    window.requestAnimationFrame(() => {\n        element.selectionStart = caret\n        element.selectionEnd = caret\n      })\n\n    onInput && onInput(e);\n  };\n   //to enable always in focus uncomment\n  // const handleBlur = () => ref.current?.focus();\n\n  useEffect(() => {\n    isFocus && ref.current?.focus()\n    caretPosition && ref.current?.setSelectionRange(caretPosition, caretPosition)\n  }, [])\n\n  return (\n    <FormField\n      vkuiClass={classNames(\n        \"Input\",\n        !!align && `Input--${align}`,\n        `Input--sizeY-${sizeY}`, // TODO v5.0.0 поправить под новую адаптивность\n        before && \"Input--hasBefore\",\n        after && \"Input--hasAfter\"\n      )}\n      style={style}\n      className={className}\n      getRootRef={getRootRef}\n      before={before}\n      after={after}\n      disabled={restProps.disabled}\n      status={status}\n    >\n      <input {...restProps} type={type} onInput={handleChange} value={value} vkuiClass=\"Input__el\" ref={ref || getRef} />\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Input\n */\nexport const Input = withAdaptivity(InputComponent, {\n  sizeY: true,\n});\n\nInput.displayName = \"Input\";\n"],"mappings":";;;;AAAA,SAAgBA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAChD,SAASC,UAAU;AACnB,SAASC,SAAS;AAElB,SAASC,cAAc;AAevB,IAAMC,cAAc,GAAG,SAAjBA,cAAc,OAiBF;EAAA,qBAhBhBC,IAAI;IAAJA,IAAI,0BAAG,MAAM;IACbC,KAAK,QAALA,KAAK;IACLC,MAAM,QAANA,MAAM;IACNC,SAAS,QAATA,SAAS;IACTC,UAAU,QAAVA,UAAU;IACVC,KAAK,QAALA,KAAK;IACLC,KAAK,QAALA,KAAK;IACLC,MAAM,QAANA,MAAM;IACNC,KAAK,QAALA,KAAK;IACLC,OAAO,QAAPA,OAAO;IACPC,KAAK,QAALA,KAAK;IACLC,aAAa,QAAbA,aAAa;IACbC,aAAa,QAAbA,aAAa;IAAA,oBACbC,OAAO;IAAPA,OAAO,6BAAG,KAAK;IACfC,MAAM,QAANA,MAAM;IACHC,SAAS;EAGZ,IAAMC,GAAG,GAAGtB,MAAM,CAAmB,IAAI,CAAC;EAE1C,IAAMuB,YAAY,GAAG,SAAfA,YAAY,CAAIC,CAAqC,EAAK;IAC5D,IAAMC,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACC,cAAc;IACrC,IAAMC,OAAO,GAAGJ,CAAC,CAACE,MAAM;IAE1BG,MAAM,CAACC,qBAAqB,CAAC,YAAM;MAC/BF,OAAO,CAACD,cAAc,GAAGF,KAAK;MAC9BG,OAAO,CAACG,YAAY,GAAGN,KAAK;IAC9B,CAAC,CAAC;IAEJV,OAAO,IAAIA,OAAO,CAACS,CAAC,CAAC;EACvB,CAAC;EACA;EACD;;EAEAvB,SAAS,CAAC,YAAM;IAAA;IACdkB,OAAO,qBAAIG,GAAG,CAACU,OAAO,iDAAX,aAAaC,KAAK,EAAE;IAC/BhB,aAAa,sBAAIK,GAAG,CAACU,OAAO,kDAAX,cAAaE,iBAAiB,CAACjB,aAAa,EAAEA,aAAa,CAAC;EAC/E,CAAC,EAAE,EAAE,CAAC;EAEN,OACE,oBAAC,SAAS;IACR,SAAS,EAAEf,UAAU,CACnB,OAAO,EACP,CAAC,CAACK,KAAK,qBAAcA,KAAK,CAAE,yBACZI,KAAK;IAAI;IACzBE,MAAM,IAAI,kBAAkB,EAC5BC,KAAK,IAAI,iBAAiB,CAC1B;IACF,KAAK,EAAEF,KAAM;IACb,SAAS,EAAEH,SAAU;IACrB,UAAU,EAAEC,UAAW;IACvB,MAAM,EAAEG,MAAO;IACf,KAAK,EAAEC,KAAM;IACb,QAAQ,EAAEO,SAAS,CAACc,QAAS;IAC7B,MAAM,EAAEf;EAAO,GAEf,0CAAWC,SAAS;IAAE,IAAI,EAAEf,IAAK;IAAC,OAAO,EAAEiB,YAAa;IAAC,KAAK,EAAEP,KAAM;IAAC,SAAS,EAAC,WAAW;IAAC,GAAG,EAAEM,GAAG,IAAId;EAAO,GAAG,CACzG;AAEhB,CAAC;;AAED;AACA;AACA;AACA,OAAO,IAAM4B,KAAK,GAAGhC,cAAc,CAACC,cAAc,EAAE;EAClDM,KAAK,EAAE;AACT,CAAC,CAAC;AAEFyB,KAAK,CAACC,WAAW,GAAG,OAAO"}