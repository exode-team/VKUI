{"version":3,"sources":["../../../src/components/Input/Input.tsx"],"names":["useRef","useEffect","classNames","FormField","withAdaptivity","InputComponent","type","align","getRef","className","getRootRef","sizeY","style","before","after","onInput","value","caretPosition","alwaysInFocus","isFocus","restProps","ref","handleChange","e","caret","target","selectionStart","element","window","requestAnimationFrame","selectionEnd","current","focus","setSelectionRange","disabled","Input","displayName"],"mappings":";;;;AAAA,SAAgBA,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,SAASC,UAAT;AACA,SAASC,SAAT;AAEA,SAASC,cAAT;;AAeA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,OAgBL;AAAA,uBAfhBC,IAegB;AAAA,MAfhBA,IAegB,0BAfT,MAeS;AAAA,MAdhBC,KAcgB,QAdhBA,KAcgB;AAAA,MAbhBC,MAagB,QAbhBA,MAagB;AAAA,MAZhBC,SAYgB,QAZhBA,SAYgB;AAAA,MAXhBC,UAWgB,QAXhBA,UAWgB;AAAA,MAVhBC,KAUgB,QAVhBA,KAUgB;AAAA,MAThBC,KASgB,QAThBA,KASgB;AAAA,MARhBC,MAQgB,QARhBA,MAQgB;AAAA,MAPhBC,KAOgB,QAPhBA,KAOgB;AAAA,MANhBC,OAMgB,QANhBA,OAMgB;AAAA,MALhBC,KAKgB,QALhBA,KAKgB;AAAA,MAJhBC,aAIgB,QAJhBA,aAIgB;AAAA,MAHhBC,aAGgB,QAHhBA,aAGgB;AAAA,0BAFhBC,OAEgB;AAAA,MAFhBA,OAEgB,6BAFN,KAEM;AAAA,MADbC,SACa;;AAEhB,MAAMC,GAAG,GAAGrB,MAAM,CAAmB,IAAnB,CAAlB;;AAEA,MAAMsB,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAA2C;AAC5D,QAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,cAAvB;AACA,QAAMC,OAAO,GAAGJ,CAAC,CAACE,MAAlB;AAEFG,IAAAA,MAAM,CAACC,qBAAP,CAA6B,YAAM;AAC/BF,MAAAA,OAAO,CAACD,cAAR,GAAyBF,KAAzB;AACAG,MAAAA,OAAO,CAACG,YAAR,GAAuBN,KAAvB;AACD,KAHH;AAKAT,IAAAA,OAAO,IAAIA,OAAO,CAACQ,CAAD,CAAlB;AACD,GAVD,CAJgB,CAef;AACD;;;AAEAtB,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACdkB,IAAAA,OAAO,qBAAIE,GAAG,CAACU,OAAR,iDAAI,aAAaC,KAAb,EAAJ,CAAP;AACAf,IAAAA,aAAa,sBAAII,GAAG,CAACU,OAAR,kDAAI,cAAaE,iBAAb,CAA+BhB,aAA/B,EAA8CA,aAA9C,CAAJ,CAAb;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SACE,oBAAC,SAAD;AACE,IAAA,SAAS,EAAEf,UAAU,CACnB,OADmB,EAEnB,CAAC,CAACK,KAAF,qBAAqBA,KAArB,CAFmB,yBAGHI,KAHG,GAGM;AACzBE,IAAAA,MAAM,IAAI,kBAJS,EAKnBC,KAAK,IAAI,iBALU,CADvB;AAQE,IAAA,KAAK,EAAEF,KART;AASE,IAAA,SAAS,EAAEH,SATb;AAUE,IAAA,UAAU,EAAEC,UAVd;AAWE,IAAA,MAAM,EAAEG,MAXV;AAYE,IAAA,KAAK,EAAEC,KAZT;AAaE,IAAA,QAAQ,EAAEM,SAAS,CAACc;AAbtB,KAeE,0CAAWd,SAAX;AAAsB,IAAA,IAAI,EAAEd,IAA5B;AAAkC,IAAA,OAAO,EAAEgB,YAA3C;AAAyD,IAAA,KAAK,EAAEN,KAAhE;AAAuE,IAAA,SAAS,EAAC,WAAjF;AAA6F,IAAA,GAAG,EAAEK,GAAG,IAAIb;AAAzG,KAfF,CADF;AAmBD,CA1DD;AA4DA;AACA;AACA;;;AACA,OAAO,IAAM2B,KAAK,GAAG/B,cAAc,CAACC,cAAD,EAAiB;AAClDM,EAAAA,KAAK,EAAE;AAD2C,CAAjB,CAA5B;AAIPwB,KAAK,CAACC,WAAN,GAAoB,OAApB","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { classNames } from \"../../lib/classNames\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport \"./Input.css\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRef<HTMLInputElement>,\n    HasRootRef<HTMLDivElement>,\n    HasAlign,\n    AdaptivityProps,\n    FormFieldProps {\n  isFocus?: boolean;\n  alwaysInFocus?: boolean;\n  caretPosition?: number;\n}\n\nconst InputComponent = ({\n  type = \"text\",\n  align,\n  getRef,\n  className,\n  getRootRef,\n  sizeY,\n  style,\n  before,\n  after,\n  onInput,\n  value,\n  caretPosition,\n  alwaysInFocus,\n  isFocus = false,\n  ...restProps\n}: InputProps) => {\n\n  const ref = useRef<HTMLInputElement>(null);\n\n  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n      const caret = e.target.selectionStart\n      const element = e.target\n\n    window.requestAnimationFrame(() => {\n        element.selectionStart = caret\n        element.selectionEnd = caret\n      })\n\n    onInput && onInput(e);\n  };\n   //to enable always in focus uncomment\n  // const handleBlur = () => ref.current?.focus();\n\n  useEffect(() => {\n    isFocus && ref.current?.focus()\n    caretPosition && ref.current?.setSelectionRange(caretPosition, caretPosition)\n  }, [])\n\n  return (\n    <FormField\n      vkuiClass={classNames(\n        \"Input\",\n        !!align && `Input--${align}`,\n        `Input--sizeY-${sizeY}`, // TODO v5.0.0 поправить под новую адаптивность\n        before && \"Input--hasBefore\",\n        after && \"Input--hasAfter\"\n      )}\n      style={style}\n      className={className}\n      getRootRef={getRootRef}\n      before={before}\n      after={after}\n      disabled={restProps.disabled}\n    >\n      <input {...restProps} type={type} onInput={handleChange} value={value} vkuiClass=\"Input__el\" ref={ref || getRef} />\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Input\n */\nexport const Input = withAdaptivity(InputComponent, {\n  sizeY: true,\n});\n\nInput.displayName = \"Input\";\n"],"file":"Input.js"}