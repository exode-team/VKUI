{"version":3,"sources":["../../../src/components/Input/Input.tsx"],"names":["useRef","useEffect","classNames","FormField","withAdaptivity","InputComponent","type","align","getRef","className","getRootRef","sizeY","style","before","after","onInput","value","caretPosition","alwaysInFocus","isFocus","status","restProps","ref","handleChange","e","caret","target","selectionStart","element","window","requestAnimationFrame","selectionEnd","current","focus","setSelectionRange","disabled","Input","displayName"],"mappings":";;;;AAAA,SAAgBA,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,SAASC,UAAT;AACA,SAASC,SAAT;AAEA,SAASC,cAAT;;AAeA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,OAiBL;AAAA,uBAhBhBC,IAgBgB;AAAA,MAhBhBA,IAgBgB,0BAhBT,MAgBS;AAAA,MAfhBC,KAegB,QAfhBA,KAegB;AAAA,MAdhBC,MAcgB,QAdhBA,MAcgB;AAAA,MAbhBC,SAagB,QAbhBA,SAagB;AAAA,MAZhBC,UAYgB,QAZhBA,UAYgB;AAAA,MAXhBC,KAWgB,QAXhBA,KAWgB;AAAA,MAVhBC,KAUgB,QAVhBA,KAUgB;AAAA,MAThBC,MASgB,QAThBA,MASgB;AAAA,MARhBC,KAQgB,QARhBA,KAQgB;AAAA,MAPhBC,OAOgB,QAPhBA,OAOgB;AAAA,MANhBC,KAMgB,QANhBA,KAMgB;AAAA,MALhBC,aAKgB,QALhBA,aAKgB;AAAA,MAJhBC,aAIgB,QAJhBA,aAIgB;AAAA,0BAHhBC,OAGgB;AAAA,MAHhBA,OAGgB,6BAHN,KAGM;AAAA,MAFhBC,MAEgB,QAFhBA,MAEgB;AAAA,MADbC,SACa;;AAEhB,MAAMC,GAAG,GAAGtB,MAAM,CAAmB,IAAnB,CAAlB;;AAEA,MAAMuB,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAA2C;AAC5D,QAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,cAAvB;AACA,QAAMC,OAAO,GAAGJ,CAAC,CAACE,MAAlB;AAEFG,IAAAA,MAAM,CAACC,qBAAP,CAA6B,YAAM;AAC/BF,MAAAA,OAAO,CAACD,cAAR,GAAyBF,KAAzB;AACAG,MAAAA,OAAO,CAACG,YAAR,GAAuBN,KAAvB;AACD,KAHH;AAKAV,IAAAA,OAAO,IAAIA,OAAO,CAACS,CAAD,CAAlB;AACD,GAVD,CAJgB,CAef;AACD;;;AAEAvB,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACdkB,IAAAA,OAAO,qBAAIG,GAAG,CAACU,OAAR,iDAAI,aAAaC,KAAb,EAAJ,CAAP;AACAhB,IAAAA,aAAa,sBAAIK,GAAG,CAACU,OAAR,kDAAI,cAAaE,iBAAb,CAA+BjB,aAA/B,EAA8CA,aAA9C,CAAJ,CAAb;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SACE,oBAAC,SAAD;AACE,IAAA,SAAS,EAAEf,UAAU,CACnB,OADmB,EAEnB,CAAC,CAACK,KAAF,qBAAqBA,KAArB,CAFmB,yBAGHI,KAHG,GAGM;AACzBE,IAAAA,MAAM,IAAI,kBAJS,EAKnBC,KAAK,IAAI,iBALU,CADvB;AAQE,IAAA,KAAK,EAAEF,KART;AASE,IAAA,SAAS,EAAEH,SATb;AAUE,IAAA,UAAU,EAAEC,UAVd;AAWE,IAAA,MAAM,EAAEG,MAXV;AAYE,IAAA,KAAK,EAAEC,KAZT;AAaE,IAAA,QAAQ,EAAEO,SAAS,CAACc,QAbtB;AAcE,IAAA,MAAM,EAAEf;AAdV,KAgBE,0CAAWC,SAAX;AAAsB,IAAA,IAAI,EAAEf,IAA5B;AAAkC,IAAA,OAAO,EAAEiB,YAA3C;AAAyD,IAAA,KAAK,EAAEP,KAAhE;AAAuE,IAAA,SAAS,EAAC,WAAjF;AAA6F,IAAA,GAAG,EAAEM,GAAG,IAAId;AAAzG,KAhBF,CADF;AAoBD,CA5DD;AA8DA;AACA;AACA;;;AACA,OAAO,IAAM4B,KAAK,GAAGhC,cAAc,CAACC,cAAD,EAAiB;AAClDM,EAAAA,KAAK,EAAE;AAD2C,CAAjB,CAA5B;AAIPyB,KAAK,CAACC,WAAN,GAAoB,OAApB","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { classNames } from \"../../lib/classNames\";\nimport { FormField, FormFieldProps } from \"../FormField/FormField\";\nimport { HasAlign, HasRef, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport \"./Input.css\";\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRef<HTMLInputElement>,\n    HasRootRef<HTMLDivElement>,\n    HasAlign,\n    AdaptivityProps,\n    FormFieldProps {\n  isFocus?: boolean;\n  alwaysInFocus?: boolean;\n  caretPosition?: number;\n}\n\nconst InputComponent = ({\n  type = \"text\",\n  align,\n  getRef,\n  className,\n  getRootRef,\n  sizeY,\n  style,\n  before,\n  after,\n  onInput,\n  value,\n  caretPosition,\n  alwaysInFocus,\n  isFocus = false,\n  status,\n  ...restProps\n}: InputProps) => {\n\n  const ref = useRef<HTMLInputElement>(null);\n\n  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n      const caret = e.target.selectionStart\n      const element = e.target\n\n    window.requestAnimationFrame(() => {\n        element.selectionStart = caret\n        element.selectionEnd = caret\n      })\n\n    onInput && onInput(e);\n  };\n   //to enable always in focus uncomment\n  // const handleBlur = () => ref.current?.focus();\n\n  useEffect(() => {\n    isFocus && ref.current?.focus()\n    caretPosition && ref.current?.setSelectionRange(caretPosition, caretPosition)\n  }, [])\n\n  return (\n    <FormField\n      vkuiClass={classNames(\n        \"Input\",\n        !!align && `Input--${align}`,\n        `Input--sizeY-${sizeY}`, // TODO v5.0.0 поправить под новую адаптивность\n        before && \"Input--hasBefore\",\n        after && \"Input--hasAfter\"\n      )}\n      style={style}\n      className={className}\n      getRootRef={getRootRef}\n      before={before}\n      after={after}\n      disabled={restProps.disabled}\n      status={status}\n    >\n      <input {...restProps} type={type} onInput={handleChange} value={value} vkuiClass=\"Input__el\" ref={ref || getRef} />\n    </FormField>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Input\n */\nexport const Input = withAdaptivity(InputComponent, {\n  sizeY: true,\n});\n\nInput.displayName = \"Input\";\n"],"file":"Input.js"}