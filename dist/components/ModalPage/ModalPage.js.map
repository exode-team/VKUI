{"version":3,"sources":["../../../src/components/ModalPage/ModalPage.tsx"],"names":["React","getClassName","classNames","ModalRootContext","useModalRegistry","usePlatform","useOrientationChange","withAdaptivity","ViewWidth","ModalDismissButton","multiRef","ModalType","getNavId","warnOnce","Platform","useAdaptivityIsDesktop","warn","ModalPageComponent","children","header","viewWidth","viewHeight","sizeX","hasMouse","onOpen","onOpened","onClose","onClosed","settlingHeight","dynamicContentHeight","getModalContentRef","nav","id","restProps","useContext","updateModalHeight","platform","orientation","useEffect","isDesktop","canShowCloseBtn","SMALL_TABLET","VKCOM","modalContext","PAGE","refs","innerElement","headerElement","contentElement","ModalPage","displayName"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport {\n  ModalRootContext,\n  useModalRegistry,\n} from \"../ModalRoot/ModalRootContext\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useOrientationChange } from \"../../hooks/useOrientationChange\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport { ModalDismissButton } from \"../ModalDismissButton/ModalDismissButton\";\nimport { multiRef } from \"../../lib/utils\";\nimport { ModalType } from \"../ModalRoot/types\";\nimport { getNavId, NavIdProps } from \"../../lib/getNavId\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { Platform } from \"../../lib/platform\";\nimport { useAdaptivityIsDesktop } from \"../../hooks/useAdaptivity\";\nimport \"./ModalPage.css\";\n\nexport interface ModalPageProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    AdaptivityProps,\n    NavIdProps {\n  /**\n   * Шапка модальной страницы, `<ModalPageHeader />`\n   */\n  header?: React.ReactNode;\n  /**\n   * Будет вызвано при начале открытия модалки.\n   */\n  onOpen?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном открытии модалки.\n   */\n  onOpened?: VoidFunction;\n  /**\n   * Будет вызвано при начале закрытия модалки.\n   */\n  onClose?: VoidFunction;\n  /**\n   * Будет вызвано при окончательном закрытии модалки.\n   */\n  onClosed?: VoidFunction;\n  /**\n   * Процент, на который изначально будет открыта модальная страница. При `settlingHeight={100}` модальная страница раскрывается на всю высоту.\n   */\n  settlingHeight?: number;\n  /**\n   * Если высота контента в модальной странице может поменяться, нужно установить это свойство\n   */\n  dynamicContentHeight?: boolean;\n  getModalContentRef?: React.Ref<HTMLDivElement>;\n}\n\nconst warn = warnOnce(\"ModalPage\");\n\nconst ModalPageComponent: React.FC<\n  ModalPageProps & AdaptivityContextInterface\n> = ({\n  children,\n  header,\n  viewWidth,\n  viewHeight,\n  sizeX,\n  hasMouse,\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n  settlingHeight, // 75\n  dynamicContentHeight,\n  getModalContentRef,\n  nav,\n  id,\n  ...restProps\n}) => {\n  const { updateModalHeight } = React.useContext(ModalRootContext);\n\n  const platform = usePlatform();\n  const orientation = useOrientationChange();\n\n  React.useEffect(updateModalHeight, [\n    children,\n    orientation,\n    updateModalHeight,\n  ]);\n\n  const isDesktop = useAdaptivityIsDesktop();\n  const canShowCloseBtn =\n    viewWidth >= ViewWidth.SMALL_TABLET || platform === Platform.VKCOM;\n\n  const modalContext = React.useContext(ModalRootContext);\n  const { refs } = useModalRegistry(\n    getNavId({ nav, id }, warn),\n    ModalType.PAGE\n  );\n\n  return (\n    <div\n      {...restProps}\n      id={id}\n      // eslint-disable-next-line vkui/no-object-expression-in-arguments\n      vkuiClass={classNames(\n        getClassName(\"ModalPage\", platform),\n        `ModalPage--sizeX-${sizeX}`,\n        {\n          \"ModalPage--desktop\": isDesktop,\n        }\n      )}\n    >\n      <div vkuiClass=\"ModalPage__in-wrap\" ref={refs.innerElement}>\n        <div vkuiClass=\"ModalPage__in\">\n          <div vkuiClass=\"ModalPage__header\" ref={refs.headerElement}>\n            {header}\n          </div>\n\n          <div vkuiClass=\"ModalPage__content-wrap\">\n            <div\n              vkuiClass=\"ModalPage__content\"\n              ref={multiRef<HTMLDivElement>(\n                refs.contentElement,\n                getModalContentRef\n              )}\n            >\n              <div vkuiClass=\"ModalPage__content-in\">{children}</div>\n            </div>\n          </div>\n          {canShowCloseBtn && (\n            <ModalDismissButton onClick={onClose || modalContext.onClose} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalPage\n */\nexport const ModalPage = withAdaptivity(ModalPageComponent, {\n  viewWidth: true,\n  viewHeight: true,\n  sizeX: true,\n  hasMouse: true,\n});\n\nModalPage.displayName = \"ModalPage\";\n"],"file":"ModalPage.js"}