{"version":3,"file":"CalendarDay.js","names":["React","classNames","Tappable","ENABLE_KEYBOARD_INPUT_EVENT_NAME","LocaleProviderContext","CalendarDay","memo","day","today","selected","onChange","hidden","disabled","active","selectionStart","selectionEnd","focused","onEnter","onLeave","hinted","hintedSelectionStart","hintedSelectionEnd","sameMonth","size","props","locale","useContext","ref","useRef","onClick","useCallback","handleEnter","handleLeave","useEffect","current","dispatchEvent","Event","bubbles","focus","Intl","DateTimeFormat","weekday","year","month","format","getDate","displayName"],"sources":["../../../src/components/CalendarDay/CalendarDay.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { classNames } from \"../../lib/classNames\";\nimport { Tappable, TappableElementProps } from \"../Tappable/Tappable\";\nimport { ENABLE_KEYBOARD_INPUT_EVENT_NAME } from \"../../hooks/useKeyboardInputTracker\";\nimport { LocaleProviderContext } from \"../LocaleProviderContext/LocaleProviderContext\";\nimport \"./CalendarDay.css\";\n\nexport type CalendarDayElementProps = Omit<\n  TappableElementProps,\n  \"onChange\" | \"size\" | \"disabled\" | \"selected\"\n>;\n\nexport interface CalendarDayProps extends CalendarDayElementProps {\n  day: Date;\n  today?: boolean;\n  selected?: boolean;\n  selectionStart?: boolean;\n  selectionEnd?: boolean;\n  hintedSelectionStart?: boolean;\n  hintedSelectionEnd?: boolean;\n  active?: boolean;\n  hidden?: boolean;\n  disabled?: boolean;\n  focused?: boolean;\n  hinted?: boolean;\n  sameMonth?: boolean;\n  size?: \"s\" | \"m\";\n  onChange(value: Date): void;\n  onEnter?(value: Date): void;\n  onLeave?(value: Date): void;\n}\n\nexport const CalendarDay = React.memo(\n  ({\n    day,\n    today,\n    selected,\n    onChange,\n    hidden,\n    disabled,\n    active,\n    selectionStart,\n    selectionEnd,\n    focused,\n    onEnter,\n    onLeave,\n    hinted,\n    hintedSelectionStart,\n    hintedSelectionEnd,\n    sameMonth,\n    size,\n    ...props\n  }: CalendarDayProps) => {\n    const locale = React.useContext(LocaleProviderContext);\n    const ref = React.useRef<HTMLElement>(null);\n    const onClick = React.useCallback(() => onChange(day), [day, onChange]);\n    const handleEnter = React.useCallback(() => onEnter?.(day), [day, onEnter]);\n    const handleLeave = React.useCallback(() => onLeave?.(day), [day, onLeave]);\n\n    React.useEffect(() => {\n      if (focused && ref.current) {\n        ref.current.dispatchEvent(\n          new Event(ENABLE_KEYBOARD_INPUT_EVENT_NAME, { bubbles: true })\n        );\n        ref.current.focus();\n      }\n    }, [focused]);\n\n    if (hidden) {\n      return <div vkuiClass=\"CalendarDay__hidden\"></div>;\n    }\n\n    return (\n      <Tappable\n        vkuiClass={classNames(\n          \"CalendarDay\",\n          `CalendarDay--size-${size}`,\n          today && \"CalendarDay--today\",\n          selected && !disabled && \"CalendarDay--selected\",\n          active && !disabled && \"CalendarDay--active\",\n          selectionStart && \"CalendarDay--selection-start\",\n          selectionEnd && \"CalendarDay--selection-end\",\n          disabled && \"CalendarDay--disabled\",\n          !sameMonth && \"CalendarDay--not-same-month\"\n        )}\n        hoverMode={active ? \"CalendarDay--active-hover\" : \"CalendarDay--hover\"}\n        hasActive={false}\n        onClick={onClick}\n        disabled={disabled}\n        aria-label={new Intl.DateTimeFormat(locale, {\n          weekday: \"long\",\n          year: \"numeric\",\n          month: \"long\",\n          day: \"numeric\",\n        }).format(day)}\n        tabIndex={-1}\n        getRootRef={ref}\n        focusVisibleMode={active ? \"outside\" : \"inside\"}\n        onEnter={handleEnter}\n        onLeave={handleLeave}\n        {...props}\n      >\n        <div\n          vkuiClass={classNames(\n            \"CalendarDay__hinted\",\n            hinted && \"CalendarDay__hinted--active\",\n            hintedSelectionStart && \"CalendarDay__hinted--selection-start\",\n            hintedSelectionEnd && \"CalendarDay__hinted--selection-end\"\n          )}\n        >\n          <div\n            vkuiClass={classNames(\n              \"CalendarDay__inner\",\n              active && !disabled && \"CalendarDay__inner--active\"\n            )}\n          >\n            <div vkuiClass=\"CalendarDay__day-number\">{day.getDate()}</div>\n          </div>\n        </div>\n      </Tappable>\n    );\n  }\n);\n\nCalendarDay.displayName = \"CalendarDay\";\n"],"mappings":"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"}