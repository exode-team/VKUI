{"version":3,"file":"usePagination.js","names":["React","usePagination","currentPage","siblingCount","boundaryCount","totalPages","endPage","useMemo","range","from","to","step","i","push","startPages","Math","min","endPages","max","lowerBoundaryWhenCurrentPageHigh","siblingsStart","upperBoundaryWhenCurrentPageLow","siblingsEnd","length","pages"],"sources":["../../src/hooks/usePagination.ts"],"sourcesContent":["import * as React from \"react\";\n\ninterface UsePaginationProps {\n  /**\n   * Текущая страница.\n   */\n  currentPage?: number;\n  /**\n   * Кол-во всегда видимых страниц по краям текущей страницы.\n   */\n  siblingCount?: number;\n  /**\n   * Кол-во всегда видимых страниц в начале и в конце.\n   */\n  boundaryCount?: number;\n  /**\n   * Общее кол-во страниц.\n   */\n  totalPages?: number;\n}\n\nexport type PaginationPageType = \"start-ellipsis\" | \"end-ellipsis\" | number;\n\nexport type UsePaginationResult = PaginationPageType[];\n\n/**\n * Хук позаимствован у @mui с некоторыми изменениями.\n *  [usePagination.js](https://github.com/mui/material-ui/blob/master/packages/mui-material/src/usePagination/usePagination.js).\n *\n * Примеры вывода:\n *           v\n * [1, 2, 3, 4, 5, 'end-ellipsis', 10]\n *                          v\n * [1, 'start-ellipsis', 4, 5, 6, 'end-ellipsis', 10]\n *                          v\n * [1, 'start-ellipsis', 6, 7, 8, 9, 10]\n */\nexport const usePagination = ({\n  currentPage = 1,\n  siblingCount = 1,\n  boundaryCount = 1,\n  totalPages: endPage = 1,\n}: UsePaginationProps = {}): UsePaginationResult =>\n  React.useMemo(() => {\n    const range = (from: number, to: number, step = 1) => {\n      const range = [];\n      let i = from;\n\n      while (i <= to) {\n        range.push(i);\n        i += step;\n      }\n\n      return range;\n    };\n\n    const startPages = range(1, Math.min(boundaryCount, endPage));\n    const endPages = range(\n      Math.max(endPage - boundaryCount + 1, boundaryCount + 1),\n      endPage\n    );\n\n    const lowerBoundaryWhenCurrentPageHigh =\n      endPage - boundaryCount - 1 - 2 * siblingCount;\n    const siblingsStart = Math.max(\n      Math.min(currentPage - siblingCount, lowerBoundaryWhenCurrentPageHigh),\n      boundaryCount + 2\n    );\n\n    const upperBoundaryWhenCurrentPageLow =\n      boundaryCount + 2 + 2 * siblingCount;\n    const siblingsEnd = Math.min(\n      Math.max(currentPage + siblingCount, upperBoundaryWhenCurrentPageLow),\n      endPages.length > 0 ? endPages[0] - 2 : endPage - 1\n    );\n\n    const pages: UsePaginationResult = startPages;\n\n    if (siblingsStart > boundaryCount + 2) {\n      pages.push(\"start-ellipsis\");\n    } else if (boundaryCount + 1 < endPage - boundaryCount) {\n      pages.push(boundaryCount + 1);\n    }\n\n    pages.push(...range(siblingsStart, siblingsEnd));\n\n    if (siblingsEnd < endPage - boundaryCount - 1) {\n      pages.push(\"end-ellipsis\");\n    } else if (endPage - boundaryCount > boundaryCount) {\n      pages.push(endPage - boundaryCount);\n    }\n\n    pages.push(...endPages);\n\n    return pages;\n  }, [currentPage, endPage, siblingCount, boundaryCount]);\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAyB9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAa;EAAA,+EAKF,CAAC,CAAC;IAAA,wBAJxBC,WAAW;IAAXA,WAAW,iCAAG,CAAC;IAAA,yBACfC,YAAY;IAAZA,YAAY,kCAAG,CAAC;IAAA,0BAChBC,aAAa;IAAbA,aAAa,mCAAG,CAAC;IAAA,uBACjBC,UAAU;IAAEC,OAAO,gCAAG,CAAC;EAAA,OAEvBN,KAAK,CAACO,OAAO,CAAC,YAAM;IAClB,IAAMC,KAAK,GAAG,eAACC,IAAY,EAAEC,EAAU,EAAe;MAAA,IAAbC,IAAI,uEAAG,CAAC;MAC/C,IAAMH,KAAK,GAAG,EAAE;MAChB,IAAII,CAAC,GAAGH,IAAI;MAEZ,OAAOG,CAAC,IAAIF,EAAE,EAAE;QACdF,KAAK,CAACK,IAAI,CAACD,CAAC,CAAC;QACbA,CAAC,IAAID,IAAI;MACX;MAEA,OAAOH,KAAK;IACd,CAAC;IAED,IAAMM,UAAU,GAAGN,KAAK,CAAC,CAAC,EAAEO,IAAI,CAACC,GAAG,CAACZ,aAAa,EAAEE,OAAO,CAAC,CAAC;IAC7D,IAAMW,QAAQ,GAAGT,KAAK,CACpBO,IAAI,CAACG,GAAG,CAACZ,OAAO,GAAGF,aAAa,GAAG,CAAC,EAAEA,aAAa,GAAG,CAAC,CAAC,EACxDE,OAAO,CACR;IAED,IAAMa,gCAAgC,GACpCb,OAAO,GAAGF,aAAa,GAAG,CAAC,GAAG,CAAC,GAAGD,YAAY;IAChD,IAAMiB,aAAa,GAAGL,IAAI,CAACG,GAAG,CAC5BH,IAAI,CAACC,GAAG,CAACd,WAAW,GAAGC,YAAY,EAAEgB,gCAAgC,CAAC,EACtEf,aAAa,GAAG,CAAC,CAClB;IAED,IAAMiB,+BAA+B,GACnCjB,aAAa,GAAG,CAAC,GAAG,CAAC,GAAGD,YAAY;IACtC,IAAMmB,WAAW,GAAGP,IAAI,CAACC,GAAG,CAC1BD,IAAI,CAACG,GAAG,CAAChB,WAAW,GAAGC,YAAY,EAAEkB,+BAA+B,CAAC,EACrEJ,QAAQ,CAACM,MAAM,GAAG,CAAC,GAAGN,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGX,OAAO,GAAG,CAAC,CACpD;IAED,IAAMkB,KAA0B,GAAGV,UAAU;IAE7C,IAAIM,aAAa,GAAGhB,aAAa,GAAG,CAAC,EAAE;MACrCoB,KAAK,CAACX,IAAI,CAAC,gBAAgB,CAAC;IAC9B,CAAC,MAAM,IAAIT,aAAa,GAAG,CAAC,GAAGE,OAAO,GAAGF,aAAa,EAAE;MACtDoB,KAAK,CAACX,IAAI,CAACT,aAAa,GAAG,CAAC,CAAC;IAC/B;IAEAoB,KAAK,CAACX,IAAI,OAAVW,KAAK,qBAAShB,KAAK,CAACY,aAAa,EAAEE,WAAW,CAAC,EAAC;IAEhD,IAAIA,WAAW,GAAGhB,OAAO,GAAGF,aAAa,GAAG,CAAC,EAAE;MAC7CoB,KAAK,CAACX,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC,MAAM,IAAIP,OAAO,GAAGF,aAAa,GAAGA,aAAa,EAAE;MAClDoB,KAAK,CAACX,IAAI,CAACP,OAAO,GAAGF,aAAa,CAAC;IACrC;IAEAoB,KAAK,CAACX,IAAI,OAAVW,KAAK,qBAASP,QAAQ,EAAC;IAEvB,OAAOO,KAAK;EACd,CAAC,EAAE,CAACtB,WAAW,EAAEI,OAAO,EAAEH,YAAY,EAAEC,aAAa,CAAC,CAAC;AAAA"}