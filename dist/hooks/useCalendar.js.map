{"version":3,"sources":["../../src/hooks/useCalendar.ts"],"names":["React","subMonths","addMonths","isSameDay","isBefore","endOfDay","isAfter","startOfDay","useCalendar","value","disablePast","disableFuture","shouldDisableDate","onHeaderChange","onNextMonth","onPrevMonth","useState","Array","isArray","Date","viewDate","setViewDate","focusedDay","setFocusedDay","setPrevMonth","useCallback","setNextMonth","handleSetViewDate","isDayFocused","day","Boolean","isDayDisabled","now","disabled","resetSelectedDay","undefined"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  subMonths,\n  addMonths,\n  isSameDay,\n  isBefore,\n  endOfDay,\n  isAfter,\n  startOfDay,\n} from \"../lib/date\";\nimport { CalendarProps } from \"../components/Calendar/Calendar\";\n\nexport interface UseCalendarDependencies\n  extends Pick<\n    CalendarProps,\n    \"onHeaderChange\" | \"onNextMonth\" | \"onPrevMonth\"\n  > {\n  value?: Array<Date | null> | Date;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  shouldDisableDate?(value: Date): boolean;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onHeaderChange,\n  onNextMonth,\n  onPrevMonth,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date()\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(() => {\n    onPrevMonth?.();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  const setNextMonth = React.useCallback(() => {\n    onNextMonth?.();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n\n  const handleSetViewDate = React.useCallback(\n    (value: Date) => {\n      onHeaderChange?.(value);\n      setViewDate(value);\n    },\n    [onHeaderChange]\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay]\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date) => {\n      const now = new Date();\n      let disabled = false;\n      if (disablePast) {\n        disabled = isBefore(endOfDay(day), now);\n      }\n      if (disableFuture) {\n        disabled = isAfter(startOfDay(day), now);\n      }\n      if (shouldDisableDate) {\n        disabled = shouldDisableDate(day);\n      }\n\n      return disabled;\n    },\n    [disableFuture, disablePast, shouldDisableDate]\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"],"file":"useCalendar.js"}