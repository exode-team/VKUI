{"version":3,"sources":["../../src/hooks/useWaitTransitionFinish.ts"],"names":["React","useDOM","transitionEvent","useWaitTransitionFinish","timeoutRef","useRef","document","waitTransitionFinish","useCallback","element","eventHandler","durationFallback","hidden","supported","name","removeEventListener","addEventListener","current","clearTimeout","setTimeout"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,MAAT;AACA,SAASC,eAAT;AAEA,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAC3C,MAAMC,UAAU,GAAGJ,KAAK,CAACK,MAAN,CAAmD,IAAnD,CAAnB;;AACA,gBAAqBJ,MAAM,EAA3B;AAAA,MAAQK,QAAR,WAAQA,QAAR;;AAEA,MAAMC,oBAAoB,GAAGP,KAAK,CAACQ,WAAN,CAC3B,UACEC,OADF,EAEEC,YAFF,EAGEC,gBAHF,EAIK;AACH,QAAIF,OAAJ,EAAa;AACX,UACE,EAACH,QAAD,aAACA,QAAD,eAACA,QAAQ,CAAEM,MAAX,KACAV,eAAe,CAACW,SADhB,IAEAX,eAAe,CAACY,IAHlB,EAIE;AACAL,QAAAA,OAAO,CAACM,mBAAR,CAA4Bb,eAAe,CAACY,IAA5C,EAAkDJ,YAAlD;AACAD,QAAAA,OAAO,CAACO,gBAAR,CAAyBd,eAAe,CAACY,IAAzC,EAA+CJ,YAA/C;AACD,OAPD,MAOO;AACL,YAAIN,UAAJ,aAAIA,UAAJ,eAAIA,UAAU,CAAEa,OAAhB,EAAyB;AACvBC,UAAAA,YAAY,CAACd,UAAU,CAACa,OAAZ,CAAZ;AACD;;AACDb,QAAAA,UAAU,CAACa,OAAX,GAAqBE,UAAU,CAACT,YAAD,EAAeC,gBAAf,CAA/B;AACD;AACF;AACF,GArB0B,EAsB3B,CAACL,QAAD,EAAWF,UAAX,CAtB2B,CAA7B;AAyBA,SAAO;AACLG,IAAAA,oBAAoB,EAApBA;AADK,GAAP;AAGD,CAhCM","sourcesContent":["import * as React from \"react\";\nimport { useDOM } from \"../lib/dom\";\nimport { transitionEvent } from \"../lib/supportEvents\";\n\nexport const useWaitTransitionFinish = () => {\n  const timeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n  const { document } = useDOM();\n\n  const waitTransitionFinish = React.useCallback(\n    (\n      element: HTMLElement | null,\n      eventHandler: VoidFunction,\n      durationFallback: number\n    ) => {\n      if (element) {\n        if (\n          !document?.hidden &&\n          transitionEvent.supported &&\n          transitionEvent.name\n        ) {\n          element.removeEventListener(transitionEvent.name, eventHandler);\n          element.addEventListener(transitionEvent.name, eventHandler);\n        } else {\n          if (timeoutRef?.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(eventHandler, durationFallback);\n        }\n      }\n    },\n    [document, timeoutRef]\n  );\n\n  return {\n    waitTransitionFinish,\n  };\n};\n"],"file":"useWaitTransitionFinish.js"}