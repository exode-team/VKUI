{"version":3,"file":"scheme.js","names":["VKCOM","warnOnce","getScheme","Scheme","Appearance","warn","normalizeScheme","platform","scheme","appearance","undefined","process","env","NODE_ENV","VKCOM_LIGHT","BRIGHT_LIGHT","SPACE_GRAY","VKCOM_DARK","DEPRECATED_CLIENT_LIGHT","DEPRECATED_CLIENT_DARK"],"sources":["../../src/helpers/scheme.ts"],"sourcesContent":["import { AppearanceSchemeType, AppearanceType } from \"@vkontakte/vk-bridge\";\nimport { PlatformType, VKCOM } from \"../lib/platform\";\nimport { warnOnce } from \"../lib/warnOnce\";\nimport { getScheme } from \"./getScheme\";\n\nexport enum Scheme {\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости со старыми версиями клиентов\n   */\n  DEPRECATED_CLIENT_LIGHT = \"client_light\",\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости со старыми версиями клиентов\n   */\n  DEPRECATED_CLIENT_DARK = \"client_dark\",\n  /**\n   * @deprecated будет удалено в 5.0.0\n   * версия оставлена для совместимости с vkcom, когда там была только одна схема\n   */\n  VKCOM = \"vkcom\",\n\n  BRIGHT_LIGHT = \"bright_light\",\n  SPACE_GRAY = \"space_gray\",\n  VKCOM_LIGHT = \"vkcom_light\",\n  VKCOM_DARK = \"vkcom_dark\",\n}\n\nexport type AppearanceScheme =\n  | AppearanceSchemeType\n  | Scheme.DEPRECATED_CLIENT_LIGHT\n  | Scheme.DEPRECATED_CLIENT_DARK\n  | Scheme.VKCOM\n  | Scheme.VKCOM_DARK\n  | Scheme.VKCOM_LIGHT\n  | \"inherit\";\n\nexport enum Appearance {\n  DARK = \"dark\",\n  LIGHT = \"light\",\n}\n\nconst warn = warnOnce(\"scheme\");\n\nexport interface NormalizeSchemeProps {\n  platform: PlatformType;\n  scheme?: AppearanceScheme;\n  appearance?: AppearanceType;\n}\n\nexport function normalizeScheme({\n  platform,\n  scheme,\n  appearance,\n}: NormalizeSchemeProps): Scheme | \"inherit\" {\n  if (scheme === \"inherit\") {\n    return scheme;\n  }\n\n  if (appearance || scheme === undefined) {\n    return getScheme({ platform, appearance });\n  }\n\n  if (scheme === Scheme.VKCOM) {\n    process.env.NODE_ENV === \"development\" &&\n      warn(\n        `Схема \"${Scheme.VKCOM}\" устарела и будет удалена в v5.0.0. Вместо неё используйте \"${Scheme.VKCOM_LIGHT}\"`\n      );\n    return Scheme.VKCOM_LIGHT;\n  }\n  if (\n    platform === VKCOM &&\n    (scheme === Scheme.BRIGHT_LIGHT || scheme === Scheme.SPACE_GRAY)\n  ) {\n    process.env.NODE_ENV === \"development\" &&\n      warn(\n        `Платформа \"vkcom\" и схема \"${scheme}\" несовместимы. С этой платформой можно использовать схемы \"${Scheme.VKCOM_LIGHT}\" или \"${Scheme.VKCOM_DARK}\"`,\n        \"error\"\n      );\n    return Scheme.VKCOM_LIGHT;\n  }\n  switch (scheme) {\n    case Scheme.DEPRECATED_CLIENT_LIGHT:\n      return Scheme.BRIGHT_LIGHT;\n    case Scheme.DEPRECATED_CLIENT_DARK:\n      return Scheme.SPACE_GRAY;\n    default:\n      return scheme as Scheme;\n  }\n}\n"],"mappings":"AACA,SAAuBA,KAAK;AAC5B,SAASC,QAAQ;AACjB,SAASC,SAAS;AAElB,WAAYC,MAAM;AAqBjB,WArBWA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;AAAA,GAANA,MAAM,KAANA,MAAM;AAgClB,WAAYC,UAAU;AAGrB,WAHWA,UAAU;EAAVA,UAAU;EAAVA,UAAU;AAAA,GAAVA,UAAU,KAAVA,UAAU;AAKtB,IAAMC,IAAI,GAAGJ,QAAQ,CAAC,QAAQ,CAAC;AAQ/B,OAAO,SAASK,eAAe,OAIc;EAAA,IAH3CC,QAAQ,QAARA,QAAQ;IACRC,MAAM,QAANA,MAAM;IACNC,UAAU,QAAVA,UAAU;EAEV,IAAID,MAAM,KAAK,SAAS,EAAE;IACxB,OAAOA,MAAM;EACf;EAEA,IAAIC,UAAU,IAAID,MAAM,KAAKE,SAAS,EAAE;IACtC,OAAOR,SAAS,CAAC;MAAEK,QAAQ,EAARA,QAAQ;MAAEE,UAAU,EAAVA;IAAW,CAAC,CAAC;EAC5C;EAEA,IAAID,MAAM,KAAKL,MAAM,CAACH,KAAK,EAAE;IAC3BW,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IACpCR,IAAI,4CACQF,MAAM,CAACH,KAAK,8RAAgEG,MAAM,CAACW,WAAW,QACzG;IACH,OAAOX,MAAM,CAACW,WAAW;EAC3B;EACA,IACEP,QAAQ,KAAKP,KAAK,KACjBQ,MAAM,KAAKL,MAAM,CAACY,YAAY,IAAIP,MAAM,KAAKL,MAAM,CAACa,UAAU,CAAC,EAChE;IACAL,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IACpCR,IAAI,oHAC4BG,MAAM,gUAA+DL,MAAM,CAACW,WAAW,qCAAUX,MAAM,CAACc,UAAU,SAChJ,OAAO,CACR;IACH,OAAOd,MAAM,CAACW,WAAW;EAC3B;EACA,QAAQN,MAAM;IACZ,KAAKL,MAAM,CAACe,uBAAuB;MACjC,OAAOf,MAAM,CAACY,YAAY;IAC5B,KAAKZ,MAAM,CAACgB,sBAAsB;MAChC,OAAOhB,MAAM,CAACa,UAAU;IAC1B;MACE,OAAOR,MAAM;EAAW;AAE9B"}